{"ast":null,"code":"var _jsxFileName = \"/Applications/MAMP/htdocs/websites/johan-de-meij/johan-app/src/components/dashboard/NewGalleryImage.jsx\";\nimport React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { mainAction } from \"redux/actions/index.actions\";\nimport { Form, Row, Col, Button, Container, Table } from \"react-bootstrap\";\nimport { ACTIONS } from \"redux/actions/types\";\nimport SideNav from \"components/dashboard/SideNav\";\nimport dayjs from \"dayjs\";\n\nconst GalleryImage = props => {\n  let mainProps = props;\n  let d = new Date();\n  const [id, setId] = useState(dayjs(d).format(\"YYYYMMDDHHmmss\"));\n  const [selectedFile, setSelectedFile] = useState();\n  const [uploadStatus, setUploadStatus] = useState(false);\n  const [validated, setValidated] = useState(false);\n  const [file, setFile] = useState();\n  useEffect(() => {\n    document.title = `Johan De Meij | Edit Post`;\n    props.actions.mainAction(ACTIONS.LOAD_GALLERY, {}); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const handleImageSubmit = e => {// console.log(props)\n  };\n\n  const uploadImage = () => {\n    let image = {\n      name: file,\n      id,\n      date: d,\n      path: selectedFile\n    };\n    mainProps.actions.mainAction(ACTIONS.INSERT_GALLERY_IMAGE, image);\n  };\n\n  const deleteGalleryImage = () => {\n    let image = {\n      docId: props.docId\n    };\n    mainProps.actions.mainAction(ACTIONS.DELETE_GALLERY_IMAGE, image);\n  };\n\n  const onChangeHandler = e => {\n    setSelectedFile(window.URL.createObjectURL(e.target.files[0]));\n    setFile(e.target.files[0]);\n    setUploadStatus(true);\n  };\n\n  const selecteImageToUpload = e => {\n    document.querySelector(\"input#gallery-image\").click();\n  };\n\n  const renderImage = () => {\n    if (props.image) {\n      return /*#__PURE__*/React.createElement(\"img\", {\n        width: \"100%\",\n        height: \"100%\",\n        \"object-fit\": \"contain\",\n        src: !selectedFile ? \"https://firebasestorage.googleapis.com/v0/b/johandemeij-513b2.appspot.com/o/gallery%2F\" + props.image + \"?alt=media\" : selectedFile,\n        onClick: e => selecteImageToUpload(e),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 9\n        }\n      });\n    } else {\n      return /*#__PURE__*/React.createElement(\"img\", {\n        width: \"100%\",\n        height: \"100%\",\n        \"object-fit\": \"contain\",\n        src: !selectedFile ? \"/images/missing.png\" : selectedFile,\n        onClick: e => selecteImageToUpload(e),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 9\n        }\n      });\n    }\n  };\n\n  const ImageList = () => {\n    console.log(props);\n    return Object.values(props.galleryImages).map(image => {\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        width: \"100%\",\n        height: \"100%\",\n        \"object-fit\": \"contain\",\n        src: \"https://firebasestorage.googleapis.com/v0/b/johandemeij-513b2.appspot.com/o/gallery%2F\" + image.name + \"?alt=media\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 13\n        }\n      }))));\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Container, {\n    className: \"dashboard\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: {\n      span: 2\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(SideNav, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    lg: {\n      span: \"10\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"section\", {\n    id: \"images\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }\n  }, \"id:\", id, /*#__PURE__*/React.createElement(Form, {\n    noValidate: true,\n    validated: validated,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: {\n      span: 4\n    },\n    className: \"gallery-image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 19\n    }\n  }, renderImage(), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginTop: \"15px\",\n      textAlign: \"center\",\n      font: \"400 8px/10px 'Work Sans', sans-serif\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 21\n    }\n  }, !uploadStatus ? props.imageName : \"\")), /*#__PURE__*/React.createElement(Col, {\n    lg: {\n      span: 6\n    },\n    className: \"caption\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Form.Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    controlId: \"backCaption\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 25\n    }\n  }, \"Caption\"), /*#__PURE__*/React.createElement(Form.Control, {\n    required: true,\n    type: \"text\",\n    placeholder: \"\",\n    defaultValue: props.caption //onChange={}\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 25\n    }\n  }))), /*#__PURE__*/React.createElement(Form.Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    id: \"gallery-image\",\n    onChange: e => onChangeHandler(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 23\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    variant: \"dark\",\n    onClick: e => selecteImageToUpload(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 23\n    }\n  }, \"Upload\"), \" \")))), /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: {\n      span: 2\n    },\n    className: \"gallery-image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Table, {\n    className: \"table table-hover\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    style: {\n      \"textAlign\": \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 19\n    }\n  }, \"Image\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    style: {\n      \"textAlign\": \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 19\n    }\n  }, \"info\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    style: {\n      \"textAlign\": \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 19\n    }\n  }))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(ImageList, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 16\n    }\n  }))))))))));\n};\n\nfunction mapStateToProps(state) {\n  return {\n    galleryImages: state.galleryReducer\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    actions: bindActionCreators({\n      mainAction\n    }, dispatch)\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(GalleryImage);","map":{"version":3,"sources":["/Applications/MAMP/htdocs/websites/johan-de-meij/johan-app/src/components/dashboard/NewGalleryImage.jsx"],"names":["React","useEffect","useState","connect","bindActionCreators","mainAction","Form","Row","Col","Button","Container","Table","ACTIONS","SideNav","dayjs","GalleryImage","props","mainProps","d","Date","id","setId","format","selectedFile","setSelectedFile","uploadStatus","setUploadStatus","validated","setValidated","file","setFile","document","title","actions","LOAD_GALLERY","handleImageSubmit","e","uploadImage","image","name","date","path","INSERT_GALLERY_IMAGE","deleteGalleryImage","docId","DELETE_GALLERY_IMAGE","onChangeHandler","window","URL","createObjectURL","target","files","selecteImageToUpload","querySelector","click","renderImage","ImageList","console","log","Object","values","galleryImages","map","span","marginTop","textAlign","font","imageName","caption","mapStateToProps","state","galleryReducer","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { mainAction } from \"redux/actions/index.actions\";\nimport { Form, Row, Col, Button, Container,Table } from \"react-bootstrap\";\nimport { ACTIONS } from \"redux/actions/types\";\nimport SideNav from \"components/dashboard/SideNav\";\nimport dayjs from \"dayjs\";\nconst GalleryImage = (props) => {\n  let mainProps = props;\n  let d = new Date();\n  const [id, setId] = useState(dayjs(d).format(\"YYYYMMDDHHmmss\"));\n  const [selectedFile, setSelectedFile] = useState();\n  const [uploadStatus, setUploadStatus] = useState(false);\n  const [validated, setValidated] = useState(false);\n  const [file, setFile] = useState();\n\n  useEffect(() => {\n    document.title = `Johan De Meij | Edit Post`;\n    props.actions.mainAction(ACTIONS.LOAD_GALLERY,{})\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  const handleImageSubmit = (e) => {\n    // console.log(props)\n  };\n\n  const uploadImage = () => {\n    let image = { name: file, id, date: d, path: selectedFile};\n    mainProps.actions.mainAction(ACTIONS.INSERT_GALLERY_IMAGE, image);\n  };\n\n  const deleteGalleryImage = () => {\n    let image = { docId: props.docId };\n    mainProps.actions.mainAction(ACTIONS.DELETE_GALLERY_IMAGE, image);\n  };\n  const onChangeHandler = (e) => {\n    setSelectedFile(window.URL.createObjectURL(e.target.files[0]));\n    setFile(e.target.files[0]);\n    setUploadStatus(true);\n  };\n\n  const selecteImageToUpload = (e) => {\n    document.querySelector(\"input#gallery-image\").click();\n  };\n\n  const renderImage = () => {\n    if (props.image) {\n      return (\n        <img\n          width=\"100%\"\n          height=\"100%\"\n          object-fit=\"contain\"\n          src={\n            !selectedFile\n              ? \"https://firebasestorage.googleapis.com/v0/b/johandemeij-513b2.appspot.com/o/gallery%2F\" +\n                props.image +\n                \"?alt=media\"\n              : selectedFile\n          }\n          onClick={(e) => selecteImageToUpload(e)}\n        />\n      );\n    } else {\n      return (\n        <img\n          width=\"100%\"\n          height=\"100%\"\n          object-fit=\"contain\"\n          src={!selectedFile ? \"/images/missing.png\" : selectedFile}\n          onClick={(e) => selecteImageToUpload(e)}\n        />\n      );\n    }\n  };\nconst ImageList =()=>{\nconsole.log(props)\n  return Object.values(props.galleryImages).map(image=>{\n    \n    return(<>\n      <tr>\n        <td><img\n              width=\"100%\"\n              height=\"100%\"\n              object-fit=\"contain\"\n              src={\"https://firebasestorage.googleapis.com/v0/b/johandemeij-513b2.appspot.com/o/gallery%2F\" + image.name + \"?alt=media\"}\n            /></td>\n      </tr>\n      </>)\n  })\n}\n  return (\n    <>\n      <Container className=\"dashboard\">\n        <Row>\n          <Col lg={{ span: 2 }}>\n            <SideNav />\n          </Col>\n          <Col lg={{ span: \"10\" }}>\n            <section id=\"images\">\n              id:{id}\n              <Form\n                noValidate\n                validated={validated}\n              >\n                <Row>\n                  <Col lg={{ span: 4 }} className=\"gallery-image\">\n                    {renderImage()}\n                    <div\n                      style={{\n                        marginTop: \"15px\",\n                        textAlign: \"center\",\n                        font: \"400 8px/10px 'Work Sans', sans-serif\",\n                      }}\n                    >\n                      {!uploadStatus ? props.imageName : \"\"}\n                    </div>\n                  </Col>\n                  <Col lg={{ span: 6 }} className=\"caption\">\n                    <Form.Row>\n                      <Form.Group controlId={\"backCaption\"}>\n                        <Form.Label>Caption</Form.Label>\n                        <Form.Control\n                          required\n                          type=\"text\"\n                          placeholder=\"\"\n                          defaultValue={props.caption}\n                          //onChange={}\n                        />\n                      </Form.Group>\n                    </Form.Row>\n                    <Form.Row>\n                      <input\n                        type=\"file\"\n                        id={\"gallery-image\"}\n                        onChange={(e) => onChangeHandler(e)}\n                      />\n                      <Button\n                        variant=\"dark\"\n                        onClick={(e) => selecteImageToUpload(e)}\n                      >\n                        Upload\n                      </Button>{\" \"}\n                      \n                    </Form.Row>\n                  </Col>\n                </Row>\n              </Form>\n              <Row>\n              <Col lg={{ span: 2 }} className=\"gallery-image\">\n              <Table className=\"table table-hover\">\n              <thead >\n                <tr>\n                  <th scope=\"col\" style={{ \"textAlign\": \"center\" }}>Image</th>\n                  <th scope=\"col\" style={{ \"textAlign\": \"center\" }}>info</th>\n                  <th scope=\"col\" style={{ \"textAlign\": \"center\" }}></th>\n                </tr>\n              </thead>\n              <tbody>\n               <ImageList />\n              </tbody>\n            </Table>\n                    \n                  </Col>\n              </Row>\n            </section>\n          </Col>\n        </Row>\n      </Container>\n    </>\n  );\n};\nfunction mapStateToProps(state) {\n  return {\n    galleryImages: state.galleryReducer,\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    actions: bindActionCreators({ mainAction }, dispatch),\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(GalleryImage);\n"]},"metadata":{},"sourceType":"module"}