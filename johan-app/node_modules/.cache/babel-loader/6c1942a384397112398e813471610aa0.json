{"ast":null,"code":"import _slicedToArray from\"/Applications/MAMP/htdocs/websites/johan-de-meij/johan-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import{mainAction}from\"redux/actions/index.actions\";import{Form,Row,Col,Button}from\"react-bootstrap\";import{ACTIONS}from\"redux/actions/types\";var ProfileImage=function ProfileImage(props){var mainProps=props;var _useState=useState(),_useState2=_slicedToArray(_useState,2),selectedFile=_useState2[0],setSelectedFile=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),uploadStatus=_useState4[0],setUploadStatus=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),caption=_useState6[0],setCaption=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),validated=_useState8[0],setValidated=_useState8[1];var _useState9=useState(\"frontCover\"),_useState10=_slicedToArray(_useState9,2),coverLocation=_useState10[0],setCoverLocation=_useState10[1];var _useState11=useState(),_useState12=_slicedToArray(_useState11,2),file=_useState12[0],setFile=_useState12[1];//const {ID,images} = props\nuseEffect(function(){document.title=\"Johan De Meij | Edit Post\";// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);var handleImageSubmit=function handleImageSubmit(e){// console.log(props)\n};var uploadImage=function uploadImage(){var image={image:file,path:selectedFile,albumID:props.currentPost,caption:caption,cover:coverLocation};console.log(image);//  mainProps.actions.mainAction(ACTIONS.UPLOAD_PRESENTATION_IMAGE,_.cloneDeep(image))\n// setUploadStatus(true)\n};var insertImage=function insertImage(){var image={image:file,path:selectedFile,albumID:props.currentPost,caption:caption,cover:coverLocation};// console.log(image)\nmainProps.actions.mainAction(ACTIONS.UPLOAD_PRESENTATION_IMAGE,image);};var deletePostImage=function deletePostImage(){var image={name:props.postImage.image[0].imageName,ID:props.postImage.image[0].albumID};mainProps.actions.mainAction(ACTIONS.DELETE_PRESENTATION_IMAGE,image);};var onChangeHandler=function onChangeHandler(e){setSelectedFile(window.URL.createObjectURL(e.target.files[0]));setFile(e.target.files[0]);setUploadStatus(true);};var renderUploadButtons=function renderUploadButtons(_id){if(selectedFile&&uploadStatus)return/*#__PURE__*/React.createElement(Button,{variant:\"dark\",onClick:function onClick(){return uploadImage();}},\"upload\");return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Button,{variant:\"primary\",onClick:function onClick(e){return selecteImageToUpload(e);}},\"Change\"),/*#__PURE__*/React.createElement(Button,{variant:\"danger\",onClick:function onClick(){return deletePostImage(_id);}},\"Delete\"));};var renderInsertButtons=function renderInsertButtons(){if(selectedFile&&uploadStatus)return/*#__PURE__*/React.createElement(Button,{variant:\"warning\",onClick:function onClick(){return insertImage();}},\"upload\");return/*#__PURE__*/React.createElement(Button,{variant:\"primary\",onClick:function onClick(e){return selecteImageToUpload(e);}},\"Insert image\");};var selecteImageToUpload=function selecteImageToUpload(e){document.querySelector('input#post-image').click();};var postImage=Object.values(props.postImage?props.postImage:[]).map(function(image){return image;});console.log(props);return/*#__PURE__*/React.createElement(\"section\",{id:\"images\"},/*#__PURE__*/React.createElement(Form,{noValidate:true,validated:validated,onSubmit:handleImageSubmit},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{lg:{span:2},className:\"post-image\"},/*#__PURE__*/React.createElement(\"img\",{src:!selectedFile?\"https://firebasestorage.googleapis.com/v0/b/johandemeij-513b2.appspot.com/o/posts%2F\"+props.image+'?alt=media':selectedFile,onClick:function onClick(e){return selecteImageToUpload(e);}}),/*#__PURE__*/React.createElement(\"div\",{style:{marginTop:\"15px\",textAlign:\"center\",font:\"400 8px/10px 'Work Sans', sans-serif\"}},!uploadStatus?props.imageName:\"\")),/*#__PURE__*/React.createElement(Col,{lg:{span:6},className:\"caption\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Form.Row,null,/*#__PURE__*/React.createElement(Form.Group,{controlId:\"showpost\"},/*#__PURE__*/React.createElement(Form.Label,null,props.type===\"front\"?\"Front Cover \":\"Back Cover \",\"Caption\"),/*#__PURE__*/React.createElement(Form.Control,{required:true,type:\"text\",placeholder:\"\",defaultValue:props.caption?props.caption:'',onChange:function onChange(e){return setCaption(e.target.value);}}))))),/*#__PURE__*/React.createElement(Col,{lg:{span:4},className:\"action-button\"},props.imageName?renderUploadButtons(props._id):renderInsertButtons(),/*#__PURE__*/React.createElement(\"input\",{type:\"file\",id:\"post-image\",onChange:function onChange(e){return onChangeHandler(e);}})))));return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",null,\"Loading\"));};function mapStateToProps(state){return{postImage:state.singlePostReducer};}function mapDispatchToProps(dispatch){return{actions:bindActionCreators({mainAction:mainAction},dispatch)};}export default connect(mapStateToProps,mapDispatchToProps)(ProfileImage);","map":{"version":3,"sources":["/Applications/MAMP/htdocs/websites/johan-de-meij/johan-app/src/components/dashboard/PublicationImage.jsx"],"names":["React","useEffect","useState","connect","bindActionCreators","mainAction","Form","Row","Col","Button","ACTIONS","ProfileImage","props","mainProps","selectedFile","setSelectedFile","uploadStatus","setUploadStatus","caption","setCaption","validated","setValidated","coverLocation","setCoverLocation","file","setFile","document","title","handleImageSubmit","e","uploadImage","image","path","albumID","currentPost","cover","console","log","insertImage","actions","UPLOAD_PRESENTATION_IMAGE","deletePostImage","name","postImage","imageName","ID","DELETE_PRESENTATION_IMAGE","onChangeHandler","window","URL","createObjectURL","target","files","renderUploadButtons","_id","selecteImageToUpload","renderInsertButtons","querySelector","click","Object","values","map","span","marginTop","textAlign","font","type","value","mapStateToProps","state","singlePostReducer","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { mainAction } from \"redux/actions/index.actions\"\nimport { Form, Row, Col, Button} from \"react-bootstrap\";\nimport { ACTIONS } from \"redux/actions/types\";\n\nconst ProfileImage = (props) => {\n  let mainProps = props\n  \n    const [selectedFile,setSelectedFile] = useState()\n    const [uploadStatus,setUploadStatus] = useState(false)\n    const [caption,setCaption] = useState()\n    const [validated, setValidated] = useState(false);\n    const [coverLocation,setCoverLocation]= useState(\"frontCover\")\n    const [file,setFile] = useState()\n   //const {ID,images} = props\n    useEffect(() => {\n        document.title = `Johan De Meij | Edit Post`;\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n      }, []);\n    const handleImageSubmit = (e) => {\n     // console.log(props)\n    }\n    const uploadImage = () => {\n    \n      let image = {\n        image:file,\n        path:selectedFile,\n        albumID:props.currentPost,\n        caption,\n        cover:coverLocation\n      }\n     console.log(image)\n     //  mainProps.actions.mainAction(ACTIONS.UPLOAD_PRESENTATION_IMAGE,_.cloneDeep(image))\n        // setUploadStatus(true)\n      }\n      \n    const insertImage = () => {\n    \n      let image = {\n        image:file,\n        path:selectedFile,\n        albumID:props.currentPost,\n        caption,\n        cover:coverLocation\n      }\n     // console.log(image)\n       mainProps.actions.mainAction(ACTIONS.UPLOAD_PRESENTATION_IMAGE,image)\n      }\n      const deletePostImage = () => {\n        let image = {\n          name:props.postImage.image[0].imageName,\n          ID:props.postImage.image[0].albumID,\n        }\n\n       mainProps.actions.mainAction(ACTIONS.DELETE_PRESENTATION_IMAGE,image)\n      } \n      const onChangeHandler = (e) => {\n        setSelectedFile(window.URL.createObjectURL(e.target.files[0]))\n        setFile(e.target.files[0])\n        setUploadStatus(true)\n      } \n      const renderUploadButtons = (_id) => {\n        if(selectedFile && uploadStatus)\n        return <Button variant=\"dark\" onClick={()=>uploadImage()}>upload</Button>\n        return (<>\n        <Button variant=\"primary\" onClick={(e)=>selecteImageToUpload(e)} >Change</Button>\n        <Button variant=\"danger\" onClick={()=>deletePostImage(_id)} >Delete</Button>\n        </>)\n      }\n      const renderInsertButtons = () => {\n        if(selectedFile && uploadStatus)\n        return <Button variant=\"warning\" onClick={()=>insertImage()}>upload</Button>\n        return <Button variant=\"primary\" onClick={(e)=>selecteImageToUpload(e)} >Insert image</Button>\n      }\n      const selecteImageToUpload = (e) => {\n        document.querySelector('input#post-image').click()\n      }\n      let postImage = Object.values(props.postImage?props.postImage:[]).map(image => {\n        return image\n      })\n      console.log(props)\n    return(\n        <section id=\"images\">\n          <Form noValidate validated={validated} onSubmit={handleImageSubmit}>\n            <Row>\n            <Col lg={{span:2}} className=\"post-image\">\n             <img src={!selectedFile ? \"https://firebasestorage.googleapis.com/v0/b/johandemeij-513b2.appspot.com/o/posts%2F\"+props.image+'?alt=media':selectedFile} onClick={(e)=>selecteImageToUpload(e)} />\n    <div style={{marginTop:\"15px\",textAlign:\"center\",font: \"400 8px/10px 'Work Sans', sans-serif\"}}>{!uploadStatus ? props.imageName:\"\"}</div>\n            </Col>\n             <Col lg={{span:6}} className=\"caption\">\n             <div><Form.Row>\n              <Form.Group controlId=\"showpost\">\n              <Form.Label>{props.type === \"front\" ? \"Front Cover \":\"Back Cover \"}Caption</Form.Label>\n              <Form.Control\n                      required\n                      type=\"text\"\n                      placeholder=\"\"\n                      defaultValue={props.caption ? props.caption:''}\n                      onChange={e => setCaption(e.target.value)}\n                    />\n              </Form.Group>\n            </Form.Row></div>\n               </Col>\n               <Col lg={{span:4}}  className=\"action-button\">{props.imageName ? renderUploadButtons(props._id):renderInsertButtons()}<input type=\"file\" id=\"post-image\" onChange={(e)=>onChangeHandler(e)}/></Col>\n               </Row>\n            </Form>\n          </section>\n    )\n    return (<><div>Loading</div></>)\n}\nfunction mapStateToProps(state) {\n    return {\n      postImage:state.singlePostReducer,\n    };\n  }\n  \n  function mapDispatchToProps(dispatch) {\n    return {\n      actions: bindActionCreators({mainAction}, dispatch)\n    };\n  }\n  \n  export default connect(mapStateToProps, mapDispatchToProps)(ProfileImage);"]},"metadata":{},"sourceType":"module"}