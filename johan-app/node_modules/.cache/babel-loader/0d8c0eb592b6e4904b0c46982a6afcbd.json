{"ast":null,"code":"var _jsxFileName = \"/Applications/MAMP/htdocs/websites/johan-de-meij/johan-app/src/components/dashboard/NewGalleryImage.jsx\";\nimport React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { mainAction } from \"redux/actions/index.actions\";\nimport { Form, Row, Col, Button, Container } from \"react-bootstrap\";\nimport { ACTIONS } from \"redux/actions/types\";\nimport SideNav from \"components/dashboard/SideNav\";\nimport dayjs from \"dayjs\";\n\nconst GalleryImage = props => {\n  let mainProps = props;\n  let d = new Date();\n  const [id, setId] = useState(dayjs(d).format('YYYYMMDDHHmmss'));\n  const [selectedFile, setSelectedFile] = useState();\n  const [uploadStatus, setUploadStatus] = useState(false);\n  const [validated, setValidated] = useState(false);\n  const [file, setFile] = useState();\n  useEffect(() => {\n    document.title = `Johan De Meij | Edit Post`; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const handleImageSubmit = e => {// console.log(props)\n  };\n\n  const uploadImage = () => {\n    let image = {\n      docId: props.docId,\n      image: file,\n      id,\n      date: d,\n      path: selectedFile\n    };\n    mainProps.actions.mainAction(ACTIONS.INSERT_GALLERY_IMAGE, image);\n  };\n\n  const deleteGalleryImage = () => {\n    let image = {\n      docId: props.docId\n    };\n    mainProps.actions.mainAction(ACTIONS.DELETE_GALLERY_IMAGE, image);\n  };\n\n  const onChangeHandler = e => {\n    setSelectedFile(window.URL.createObjectURL(e.target.files[0]));\n    setFile(e.target.files[0]);\n    setUploadStatus(true);\n  };\n\n  const selecteImageToUpload = e => {\n    document.querySelector('input#gallery-image').click();\n  };\n\n  const renderImage = () => {\n    if (props.image) {\n      return /*#__PURE__*/React.createElement(\"img\", {\n        width: \"100%\",\n        height: \"100%\",\n        \"object-fit\": \"contain\",\n        src: !selectedFile ? \"https://firebasestorage.googleapis.com/v0/b/johandemeij-513b2.appspot.com/o/gallery%2F\" + props.image + '?alt=media' : selectedFile,\n        onClick: e => selecteImageToUpload(e),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 17\n        }\n      });\n    } else {\n      return /*#__PURE__*/React.createElement(\"img\", {\n        width: \"100%\",\n        height: \"100%\",\n        \"object-fit\": \"contain\",\n        src: !selectedFile ? \"/images/missing.png\" : selectedFile,\n        onClick: e => selecteImageToUpload(e),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 17\n        }\n      });\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Container, {\n    className: \"dashboard\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: {\n      span: 2\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(SideNav, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    lg: {\n      span: \"10\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"section\", {\n    id: \"images\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    noValidate: true,\n    validated: validated,\n    onSubmit: handleImageSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: {\n      span: 4\n    },\n    className: \"gallery-image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }\n  }, renderImage(), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginTop: \"15px\",\n      textAlign: \"center\",\n      font: \"400 8px/10px 'Work Sans', sans-serif\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 5\n    }\n  }, !uploadStatus ? props.imageName : \"\")), /*#__PURE__*/React.createElement(Col, {\n    lg: {\n      span: 4\n    },\n    className: \"caption\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 14\n    }\n  }, /*#__PURE__*/React.createElement(Form.Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    controlId: \"backCaption\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 15\n    }\n  }, \"Caption\"), /*#__PURE__*/React.createElement(Form.Control, {\n    required: true,\n    type: \"text\",\n    placeholder: \"\",\n    defaultValue: props.caption //onChange={}\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(Form.Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"dark\",\n    onClick: e => selecteImageToUpload(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }\n  }, \"Upload\"), \" \", /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    id: \"gallery-image\",\n    onChange: e => onChangeHandler(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }\n  }))))))))));\n};\n\nfunction mapStateToProps(state) {\n  return {\n    postImage: state.singlePostReducer\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    actions: bindActionCreators({\n      mainAction\n    }, dispatch)\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(GalleryImage);","map":{"version":3,"sources":["/Applications/MAMP/htdocs/websites/johan-de-meij/johan-app/src/components/dashboard/NewGalleryImage.jsx"],"names":["React","useEffect","useState","connect","bindActionCreators","mainAction","Form","Row","Col","Button","Container","ACTIONS","SideNav","dayjs","GalleryImage","props","mainProps","d","Date","id","setId","format","selectedFile","setSelectedFile","uploadStatus","setUploadStatus","validated","setValidated","file","setFile","document","title","handleImageSubmit","e","uploadImage","image","docId","date","path","actions","INSERT_GALLERY_IMAGE","deleteGalleryImage","DELETE_GALLERY_IMAGE","onChangeHandler","window","URL","createObjectURL","target","files","selecteImageToUpload","querySelector","click","renderImage","span","marginTop","textAlign","font","imageName","caption","mapStateToProps","state","postImage","singlePostReducer","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { mainAction } from \"redux/actions/index.actions\"\nimport { Form, Row, Col, Button, Container} from \"react-bootstrap\";\nimport { ACTIONS } from \"redux/actions/types\";\nimport SideNav from \"components/dashboard/SideNav\";\nimport dayjs from \"dayjs\";\nconst GalleryImage = (props) => {\n    let mainProps = props\n    let d = new Date()\n    const [id, setId] = useState(dayjs(d).format('YYYYMMDDHHmmss'));\n    const [selectedFile,setSelectedFile] = useState()\n    const [uploadStatus,setUploadStatus] = useState(false)\n    const [validated, setValidated] = useState(false);\n    const [file,setFile] = useState()\n \n    useEffect(() => {\n        document.title = `Johan De Meij | Edit Post`;\n       \n        // eslint-disable-next-line react-hooks/exhaustive-deps\n      }, []);\n    const handleImageSubmit = (e) => {\n     // console.log(props)\n    }\n   \n    const uploadImage = () => {\n    \n      let image = {\n        docId:props.docId,\n        image:file,\n        id,\n        date:d,\n        path:selectedFile\n      }\n       mainProps.actions.mainAction(ACTIONS.INSERT_GALLERY_IMAGE,image)\n      }\n\n    const deleteGalleryImage = () => {\n        let image = {\n          docId:props.docId\n        }\n\n       mainProps.actions.mainAction(ACTIONS.DELETE_GALLERY_IMAGE,image)\n    } \n      const onChangeHandler = (e) => {\n        setSelectedFile(window.URL.createObjectURL(e.target.files[0]))\n        setFile(e.target.files[0])\n        setUploadStatus(true)\n      } \n\n      \n      const selecteImageToUpload = (e) => {\n        document.querySelector('input#gallery-image').click()\n      }\n     \n      const renderImage = () => {\n       if(props.image){\n        return (<img  width=\"100%\" height=\"100%\" object-fit=\"contain\" src={!selectedFile ? \"https://firebasestorage.googleapis.com/v0/b/johandemeij-513b2.appspot.com/o/gallery%2F\"+props.image+'?alt=media':selectedFile} onClick={(e)=>selecteImageToUpload(e)} />)\n       } else {\n        return (<img  width=\"100%\" height=\"100%\" object-fit=\"contain\" src={!selectedFile ? \"/images/missing.png\":selectedFile} onClick={(e)=>selecteImageToUpload(e)} />)\n       }\n\n      }\n\n    return(<>\n        <Container className=\"dashboard\">\n        <Row>\n          <Col lg={{ span: 2 }}><SideNav /></Col>\n          <Col lg={{ span: \"10\" }}>\n          <section id=\"images\">\n          <Form noValidate validated={validated} onSubmit={handleImageSubmit}>\n            <Row>\n            <Col lg={{span:4}} className=\"gallery-image\">\n             {renderImage()}\n    <div style={{marginTop:\"15px\",textAlign:\"center\",font: \"400 8px/10px 'Work Sans', sans-serif\"}}>{!uploadStatus ? props.imageName:\"\"}</div>\n            </Col>\n             <Col lg={{span:4}} className=\"caption\">\n          <Form.Row>\n              <Form.Group controlId={\"backCaption\"}>\n              <Form.Label>Caption</Form.Label>\n              <Form.Control\n                      required\n                      type=\"text\"\n                      placeholder=\"\"\n                      defaultValue={props.caption}\n                      //onChange={}\n                    />\n              </Form.Group>\n            </Form.Row>\n            <Form.Row>\n            <Button variant=\"dark\" onClick={(e)=>selecteImageToUpload(e)} >Upload</Button>{\" \"}\n            <input type=\"file\" id={\"gallery-image\"} onChange={(e)=>onChangeHandler(e)}/>\n            </Form.Row>\n            \n               </Col>\n               </Row>\n            </Form>\n          </section>\n          </Col>\n          </Row>\n          </Container>\n    </>)\n}\nfunction mapStateToProps(state) {\n    return {\n      postImage:state.singlePostReducer\n    };\n  }\n  \n  function mapDispatchToProps(dispatch) {\n    return {\n      actions: bindActionCreators({mainAction}, dispatch)\n    };\n  }\n  \n  export default connect(mapStateToProps, mapDispatchToProps)(GalleryImage);"]},"metadata":{},"sourceType":"module"}