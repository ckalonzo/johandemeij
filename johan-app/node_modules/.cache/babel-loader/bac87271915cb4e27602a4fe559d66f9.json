{"ast":null,"code":"import _slicedToArray from\"/Applications/MAMP/htdocs/websites/johan-de-meij/johan-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import{Form,Container,Row,Col,Button}from\"react-bootstrap\";import{ACTIONS}from\"redux/actions/types\";import SideNav from\"components/dashboard/SideNav\";import{mainAction}from\"redux/actions/index.actions\";import CKEditor from'@ckeditor/ckeditor5-react';import ClassicEditor from'@ckeditor/ckeditor5-build-classic';import PostImage from\"components/dashboard/PostImage\";var EditPost=function EditPost(props){var _props$post=props.post,_id=_props$post._id,ID=_props$post.ID,postTitle=_props$post.postTitle,postDate=_props$post.postDate,postContent=_props$post.postContent,showPost=_props$post.showPost,postImage=_props$post.postImage;var _useState=useState(showPost),_useState2=_slicedToArray(_useState,2),postStatus=_useState2[0],setPostStatus=_useState2[1];var _useState3=useState(postTitle),_useState4=_slicedToArray(_useState3,2),title=_useState4[0],setTitle=_useState4[1];var _useState5=useState(postDate),_useState6=_slicedToArray(_useState5,2),date=_useState6[0],setDate=_useState6[1];var _useState7=useState(postContent),_useState8=_slicedToArray(_useState7,2),content=_useState8[0],setContent=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),validated=_useState10[0],setValidated=_useState10[1];var _useState11=useState(postImage),_useState12=_slicedToArray(_useState11,2),postImg=_useState12[0],setPostImg=_useState12[1];useEffect(function(){// Update the document title using the browser API\nwindow.scrollTo(0,0);document.title=\"Johan De Meij | Edit Post\";props.actions.mainAction(ACTIONS.LOAD_POST,props.match.params.id);// props.actions.mainAction(ACTIONS.LOAD_POST_IMAGES,{})\n// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);var handleSubmit=function handleSubmit(event){event.preventDefault();var newsItem={_id:_id,ID:ID,showPost:postStatus?postStatus:showPost,title:title?title:postTitle,date:date?date:postDate,content:content,postImage:postImg?postImg:postImage};var form=event.currentTarget;if(form.checkValidity()===false){event.stopPropagation();}setValidated(true);props.actions.mainAction(ACTIONS.UPDATE_POST,newsItem);window.scrollTo(0,0);};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{lg:{span:2}},/*#__PURE__*/React.createElement(SideNav,null)),/*#__PURE__*/React.createElement(Col,{lg:{span:\"10\"}},props.post.postImage?/*#__PURE__*/React.createElement(PostImage,Object.assign({currentPost:props.match.params.id},props.post.postImage[0])):\"\",/*#__PURE__*/React.createElement(\"section\",{id:\"product\"},/*#__PURE__*/React.createElement(Form,{noValidate:true,validated:validated,onSubmit:handleSubmit},/*#__PURE__*/React.createElement(Form.Row,null,/*#__PURE__*/React.createElement(Form.Group,{controlId:\"showpost\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Show Post\"),/*#__PURE__*/React.createElement(Form.Control,{as:\"select\",custom:true,onChange:function onChange(e){return setPostStatus(e.target.value);}},/*#__PURE__*/React.createElement(\"option\",{value:showPost},parseInt(showPost,10)===1?\"ON\":\"OFF\"),/*#__PURE__*/React.createElement(\"option\",{value:\"1\"},\"ON\"),/*#__PURE__*/React.createElement(\"option\",{value:\"2\"},\"OFF\")))),/*#__PURE__*/React.createElement(Form.Row,null,/*#__PURE__*/React.createElement(Form.Group,{as:Col,controlId:\"title\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Title\"),/*#__PURE__*/React.createElement(Form.Control,{required:true,type:\"text\",placeholder:\"\",defaultValue:postTitle,onChange:function onChange(e){return setTitle(e.target.value);}}),/*#__PURE__*/React.createElement(Form.Control.Feedback,{type:\"invalid\"},\"Please provide a title.\"),/*#__PURE__*/React.createElement(Form.Control.Feedback,null,\"Looks good!\"))),/*#__PURE__*/React.createElement(Form.Row,null,/*#__PURE__*/React.createElement(Form.Group,{as:Col,controlId:\"date\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Date\"),/*#__PURE__*/React.createElement(Form.Control,{required:true,type:\"text\",placeholder:\"\",defaultValue:postDate,onChange:function onChange(e){return setDate(e.target.value);}}),/*#__PURE__*/React.createElement(Form.Control.Feedback,{type:\"invalid\"},\"Please provide a product description.\"),/*#__PURE__*/React.createElement(Form.Control.Feedback,null,\"Looks good!\"))),/*#__PURE__*/React.createElement(Form.Row,null,/*#__PURE__*/React.createElement(Form.Group,{as:Col,controlId:\"content\"},/*#__PURE__*/React.createElement(CKEditor,{editor:ClassicEditor,data:postContent?postContent:content,toolbar:('heading','|','bold','italic','link','bulletedList','numberedList','blockQuote'),onInit:function onInit(editor){// You can store the \"editor\" and use when it is needed.\n// console.log( 'Editor is ready to use!', editor );\n},onChange:function onChange(event,editor){var data=editor.getData();// console.log( { event, editor, data } );\nsetContent(data);},onBlur:function onBlur(event,editor){var data=editor.getData();console.log('Blur.',editor);setContent(data);},onFocus:function onFocus(event,editor){console.log('Focus.',editor);}}))),/*#__PURE__*/React.createElement(Button,{type:\"submit\"},\"Update\")))))));};function mapStateToProps(state){return{post:state.singlePostReducer,posts:state.postsReducer,postImages:state.postImagesReducer};}function mapDispatchToProps(dispatch){return{actions:bindActionCreators({mainAction:mainAction},dispatch)};}export default connect(mapStateToProps,mapDispatchToProps)(EditPost);","map":{"version":3,"sources":["/Applications/MAMP/htdocs/websites/johan-de-meij/johan-app/src/components/dashboard/EditPost.jsx"],"names":["React","useEffect","useState","connect","bindActionCreators","Form","Container","Row","Col","Button","ACTIONS","SideNav","mainAction","CKEditor","ClassicEditor","PostImage","EditPost","props","post","_id","ID","postTitle","postDate","postContent","showPost","postImage","postStatus","setPostStatus","title","setTitle","date","setDate","content","setContent","validated","setValidated","postImg","setPostImg","window","scrollTo","document","actions","LOAD_POST","match","params","id","handleSubmit","event","preventDefault","newsItem","form","currentTarget","checkValidity","stopPropagation","UPDATE_POST","span","e","target","value","parseInt","editor","data","getData","console","log","mapStateToProps","state","singlePostReducer","posts","postsReducer","postImages","postImagesReducer","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { Form, Container, Row, Col, Button} from \"react-bootstrap\";\nimport { ACTIONS } from \"redux/actions/types\";\nimport SideNav from \"components/dashboard/SideNav\";\nimport { mainAction } from \"redux/actions/index.actions\"\nimport CKEditor from '@ckeditor/ckeditor5-react';\nimport ClassicEditor from '@ckeditor/ckeditor5-build-classic';\nimport PostImage from \"components/dashboard/PostImage\"\n\nconst EditPost = props => {\n  const {_id,ID,postTitle,postDate,postContent,showPost,postImage} = props.post\n  const [postStatus, setPostStatus] = useState(showPost);\n  const [title, setTitle] = useState(postTitle);\n  const [date, setDate] = useState(postDate);\n  const [content, setContent] = useState(postContent);\n  const [validated, setValidated] = useState(false);\n  const [postImg,setPostImg] = useState(postImage)\n\n\n  useEffect(() => {\n    // Update the document title using the browser API\n    window.scrollTo(0,0)\n    document.title = `Johan De Meij | Edit Post`;\n    props.actions.mainAction(ACTIONS.LOAD_POST,props.match.params.id)\n   // props.actions.mainAction(ACTIONS.LOAD_POST_IMAGES,{})\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  const handleSubmit = event => {\n    event.preventDefault();\n    \n    let newsItem = {\n      _id,\n      ID,\n      showPost:postStatus ? postStatus:showPost,\n      title:title?title:postTitle,\n      date:date?date:postDate,\n      content,\n      postImage: postImg ? postImg : postImage\n    }\n    const form = event.currentTarget;\n    if (form.checkValidity() === false) {\n      event.stopPropagation();\n    }\n    setValidated(true);\n   props.actions.mainAction(ACTIONS.UPDATE_POST,newsItem)\n   window.scrollTo(0,0)\n  };\n  \n  return (\n    <>\n      <Container>\n        <Row>\n          \n          <Col lg={{ span: 2 }}>\n              <SideNav />\n          </Col>\n          <Col lg={{span:\"10\" }}> \n            {props.post.postImage ? <PostImage currentPost={props.match.params.id}{...props.post.postImage[0]}/>:\"\"}\n            <section id=\"product\">\n              <Form noValidate validated={validated} onSubmit={handleSubmit}>\n                <Form.Row>\n                            <Form.Group controlId=\"showpost\">\n                              <Form.Label>Show Post</Form.Label>\n                              <Form.Control\n                                as=\"select\"\n                                custom\n                                onChange={e => setPostStatus(e.target.value)}\n                              >\n                                <option value={showPost}>{parseInt(showPost,10) === 1 ? \"ON\":\"OFF\"}</option>\n                                <option value=\"1\">ON</option>\n                                <option value=\"2\">OFF</option>\n                              </Form.Control>\n                            </Form.Group>\n                          </Form.Row>\n                <Form.Row>\n                  <Form.Group as={Col}  controlId=\"title\">\n                    <Form.Label>Title</Form.Label>\n                    <Form.Control\n                      required\n                      type=\"text\"\n                      placeholder=\"\"\n                      defaultValue={postTitle}\n                      onChange={e => setTitle(e.target.value)}\n                      \n                    />\n                    <Form.Control.Feedback type=\"invalid\">\n                        Please provide a title.\n                      </Form.Control.Feedback>\n                    <Form.Control.Feedback>Looks good!</Form.Control.Feedback>\n                  </Form.Group>\n                  </Form.Row>\n                <Form.Row>\n                  <Form.Group as={Col} controlId=\"date\">\n                    <Form.Label>Date</Form.Label>\n                    <Form.Control\n                      required\n                      type=\"text\"\n                      placeholder=\"\"\n                      defaultValue={postDate}\n                      onChange={e => setDate(e.target.value)}\n                      \n                    />\n                    <Form.Control.Feedback type=\"invalid\">\n                        Please provide a product description.\n                      </Form.Control.Feedback>\n                    <Form.Control.Feedback>Looks good!</Form.Control.Feedback>\n                  </Form.Group>\n                  \n                </Form.Row>\n                <Form.Row>\n                  <Form.Group as={Col} controlId=\"content\">\n                    <CKEditor\n                        editor={ ClassicEditor }\n                        data={postContent ? postContent:content}\n                        toolbar= {'heading', '|', 'bold', 'italic', 'link', 'bulletedList', 'numberedList', 'blockQuote' }\n                        onInit={ editor => {\n                            // You can store the \"editor\" and use when it is needed.\n                           // console.log( 'Editor is ready to use!', editor );\n                        } }\n                        onChange={ ( event, editor ) => {\n                            const data = editor.getData();\n                           // console.log( { event, editor, data } );\n                            setContent(data)\n                        } }\n                        onBlur={ ( event, editor ) => {\n                          const data = editor.getData();\n                            console.log( 'Blur.', editor );\n                            setContent(data)\n                        } }\n                        onFocus={ ( event, editor ) => {\n                            console.log( 'Focus.', editor );\n                        } }\n                    />\n                  </Form.Group>\n                  </Form.Row>\n                <Button type=\"submit\">Update</Button>\n              </Form> \n            </section>\n          </Col>\n        </Row> \n      </Container>\n    </>\n  );\n};\nfunction mapStateToProps(state) {\n  return {\n    post: state.singlePostReducer,\n    posts:state.postsReducer,\n    postImages:state.postImagesReducer\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    actions: bindActionCreators({mainAction}, dispatch)\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EditPost);\n"]},"metadata":{},"sourceType":"module"}