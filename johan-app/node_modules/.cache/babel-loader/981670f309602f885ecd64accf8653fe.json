{"ast":null,"code":"var _jsxFileName = \"/Applications/MAMP/htdocs/websites/johan-de-meij/johan-app/src/components/dashboard/Posts.jsx\";\nimport React, { useEffect, useState } from 'react';\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { mainAction } from 'redux/actions/index.actions';\nimport { Button } from \"react-bootstrap\";\nimport { ACTIONS } from \"redux/actions/types\";\nimport { Container, Row, Col } from \"react-bootstrap\";\nimport SideNav from \"components/dashboard/SideNav\"; //import { Link } from \"react-router-dom\";\n\nimport EditPost from \"components/dashboard/EditPost\";\n\nconst Posts = props => {\n  const [section, setSection] = useState(\"list\");\n  useEffect(() => {\n    // Update the document title using the browser API\n    document.title = `JDM Dashboard | posts`; //if(props.categories.length === 0)\n\n    props.actions.mainAction(ACTIONS.RESET_IMAGE, {});\n    props.actions.mainAction(ACTIONS.LOAD_DASHBOARD_POSTS, []); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const deletePost = (_id, ID, imageID) => {\n    props.actions.mainAction(ACTIONS.DELETE_POST_IMAGE, {\n      image: imageID,\n      post: ID\n    });\n    props.actions.mainAction(ACTIONS.DELETE_POST, {\n      image: _id,\n      post: ID\n    });\n  };\n\n  const handleClick = props => {\n    //setSection(\"edit\")\n    props.history.push('/dashboard/news/new');\n  };\n\n  const loadPost = post => {\n    props.history.push('/dashboard/news/edit/' + post.ID);\n  };\n\n  const PostList = () => {\n    if (Object.keys(props.posts).length > 0) {\n      return Object.values(props.posts).map(post => {\n        let imageID = Object.values(post.postImage ? post.postImage : []).map((image, i) => {\n          if (i === 0) return image._id;\n        });\n        console.log(imageID[0]);\n        return /*#__PURE__*/React.createElement(\"tr\", {\n          key: post._id,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 42,\n            columnNumber: 20\n          }\n        }, /*#__PURE__*/React.createElement(\"td\", {\n          className: \"post-title\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 43,\n            columnNumber: 13\n          }\n        }, post.postTitle), /*#__PURE__*/React.createElement(\"td\", {\n          style: {\n            \"textAlign\": \"center\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 44,\n            columnNumber: 13\n          }\n        }, post.postDate), /*#__PURE__*/React.createElement(\"td\", {\n          className: \"post-actions\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 45,\n            columnNumber: 13\n          }\n        }, /*#__PURE__*/React.createElement(\"button\", {\n          className: \"btn btn-datatable btn-icon btn-transparent-dark mr-2\",\n          onClick: () => loadPost(post),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 15\n          }\n        }, /*#__PURE__*/React.createElement(\"svg\", {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          width: \"24\",\n          height: \"24\",\n          viewBox: \"0 0 24 24\",\n          fill: \"none\",\n          stroke: \"currentColor\",\n          strokeWidth: \"2\",\n          strokeLinecap: \"round\",\n          strokeLinejoin: \"round\",\n          className: \"feather feather-more-vertical\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 118\n          }\n        }, /*#__PURE__*/React.createElement(\"circle\", {\n          cx: \"12\",\n          cy: \"12\",\n          r: \"1\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 338\n          }\n        }), /*#__PURE__*/React.createElement(\"circle\", {\n          cx: \"12\",\n          cy: \"5\",\n          r: \"1\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 377\n          }\n        }), /*#__PURE__*/React.createElement(\"circle\", {\n          cx: \"12\",\n          cy: \"19\",\n          r: \"1\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 415\n          }\n        }))), /*#__PURE__*/React.createElement(\"button\", {\n          className: \"btn btn-datatable btn-icon btn-transparent-dark\",\n          onClick: () => deletePost(post._id, post.ID, imageID),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 13\n          }\n        }, /*#__PURE__*/React.createElement(\"svg\", {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          width: \"24\",\n          height: \"24\",\n          viewBox: \"0 0 24 24\",\n          fill: \"none\",\n          stroke: \"currentColor\",\n          strokeWidth: \"2\",\n          strokeLinecap: \"round\",\n          strokeLinejoin: \"round\",\n          className: \"feather feather-trash-2\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 132\n          }\n        }, /*#__PURE__*/React.createElement(\"polyline\", {\n          points: \"3 6 5 6 21 6\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 346\n          }\n        }), /*#__PURE__*/React.createElement(\"path\", {\n          d: \"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 389\n          }\n        }), /*#__PURE__*/React.createElement(\"line\", {\n          x1: \"10\",\n          y1: \"11\",\n          x2: \"10\",\n          y2: \"17\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 485\n          }\n        }), /*#__PURE__*/React.createElement(\"line\", {\n          x1: \"14\",\n          y1: \"11\",\n          x2: \"14\",\n          y2: \"17\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 530\n          }\n        })))));\n      });\n    } else {\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        colSpan: \"3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 11\n        }\n      }, \"Loading....\"));\n    }\n  };\n\n  if (section === \"list\") {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Container, {\n      id: \"dashboard\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      lg: {\n        span: 2\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(SideNav, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 16\n      }\n    })), /*#__PURE__*/React.createElement(Col, {\n      lg: {\n        span: 10\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table table-hover\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      style: {\n        \"textAlign\": \"center\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 15\n      }\n    }, \"Title\"), /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      style: {\n        \"textAlign\": \"center\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 15\n      }\n    }, \"Date\"), /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"col\",\n      style: {\n        \"textAlign\": \"center\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      onClick: () => handleClick(props),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 62\n      }\n    }, \"Add News\")))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(PostList, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 12\n      }\n    })))))));\n  } else if (section === \"edit\") {\n    return /*#__PURE__*/React.createElement(EditPost, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }\n    });\n  } else {\n    return null;\n  }\n};\n\nfunction mapStateToProps(state) {\n  return {\n    posts: state.postsReducer\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    actions: bindActionCreators({\n      mainAction\n    }, dispatch)\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Posts);","map":{"version":3,"sources":["/Applications/MAMP/htdocs/websites/johan-de-meij/johan-app/src/components/dashboard/Posts.jsx"],"names":["React","useEffect","useState","connect","bindActionCreators","mainAction","Button","ACTIONS","Container","Row","Col","SideNav","EditPost","Posts","props","section","setSection","document","title","actions","RESET_IMAGE","LOAD_DASHBOARD_POSTS","deletePost","_id","ID","imageID","DELETE_POST_IMAGE","image","post","DELETE_POST","handleClick","history","push","loadPost","PostList","Object","keys","posts","length","values","map","postImage","i","console","log","postTitle","postDate","span","mapStateToProps","state","postsReducer","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React,{useEffect,useState} from 'react'\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { mainAction } from 'redux/actions/index.actions'\nimport { Button } from \"react-bootstrap\"\nimport { ACTIONS } from \"redux/actions/types\"\nimport { Container,Row,Col } from \"react-bootstrap\"\nimport SideNav from \"components/dashboard/SideNav\"\n//import { Link } from \"react-router-dom\";\nimport EditPost from \"components/dashboard/EditPost\"\n\nconst Posts = (props) => {\n    const [section,setSection] = useState(\"list\")\n    useEffect(() => {\n        // Update the document title using the browser API\n        document.title = `JDM Dashboard | posts`;\n        //if(props.categories.length === 0)\n        props.actions.mainAction(ACTIONS.RESET_IMAGE,{})\n       props.actions.mainAction(ACTIONS.LOAD_DASHBOARD_POSTS,[])\n       // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[])\n    const deletePost = (_id,ID,imageID) => {\n     \n     props.actions.mainAction(ACTIONS.DELETE_POST_IMAGE,{image:imageID,post:ID})\n     props.actions.mainAction(ACTIONS.DELETE_POST,{image:_id,post:ID})\n    } \n    const handleClick = (props) => {\n        //setSection(\"edit\")\n        props.history.push('/dashboard/news/new')\n    }\n    const loadPost = (post) => {\n      props.history.push('/dashboard/news/edit/'+post.ID)\n    }\n    const PostList = () => {\n      if(Object.keys(props.posts).length > 0){\n        \n        return Object.values(props.posts).map(post =>{\n          let imageID = Object.values(post.postImage ? post.postImage:[]).map((image,i )=>{\n            if(i===0) \n            return image._id})\n          console.log(imageID[0])\n          return ( <tr key={post._id}>\n            <td className=\"post-title\">{post.postTitle}</td>\n            <td style={{\"textAlign\":\"center\"}}>{post.postDate}</td>\n            <td className=\"post-actions\">\n              \n              <button className=\"btn btn-datatable btn-icon btn-transparent-dark mr-2\"  onClick={()=>loadPost(post)}><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className=\"feather feather-more-vertical\"><circle cx=\"12\" cy=\"12\" r=\"1\"></circle><circle cx=\"12\" cy=\"5\" r=\"1\"></circle><circle cx=\"12\" cy=\"19\" r=\"1\"></circle></svg></button> \n\n            <button className=\"btn btn-datatable btn-icon btn-transparent-dark\" onClick={()=>deletePost(post._id,post.ID,imageID)}><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className=\"feather feather-trash-2\"><polyline points=\"3 6 5 6 21 6\"></polyline><path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"></path><line x1=\"10\" y1=\"11\" x2=\"10\" y2=\"17\"></line><line x1=\"14\" y1=\"11\" x2=\"14\" y2=\"17\"></line></svg></button></td>\n          </tr> )\n        })\n      } else {\n        return (<tr>\n          <td  colSpan=\"3\">Loading....</td>\n        </tr>)\n      }\n    }\n    \n    if(section === \"list\") {\n        return (<>\n        <Container id=\"dashboard\">\n        <Row>\n            <Col lg={{span:2}}>\n               <SideNav />\n            </Col>\n            <Col lg={{span:10}}>\n            <table className=\"table table-hover\">\n          <thead >\n            <tr>\n              <th scope=\"col\" style={{\"textAlign\":\"center\"}}>Title</th>\n              <th scope=\"col\" style={{\"textAlign\":\"center\"}}>Date</th>\n              <th scope=\"col\" style={{\"textAlign\":\"center\"}}><Button onClick={()=>handleClick(props)}>Add News</Button></th>\n            </tr>\n          </thead>\n          <tbody>\n           <PostList />\n          </tbody>\n        </table>\n            </Col>\n        </Row>\n    </Container>\n            </>)\n    } else if (section===\"edit\") {\n        return (<EditPost />)\n    } else {\n        return null\n    }\n    \n}\n\nfunction mapStateToProps(state) {\n    return {\n      posts:state.postsReducer\n    };\n  }\n  \n  function mapDispatchToProps(dispatch) {\n    return {\n      actions: bindActionCreators(\n        {\n            mainAction\n        },\n        dispatch\n      )\n    };\n  }\n  \n  export default connect(\n    mapStateToProps,\n    mapDispatchToProps\n  )(Posts);\n"]},"metadata":{},"sourceType":"module"}