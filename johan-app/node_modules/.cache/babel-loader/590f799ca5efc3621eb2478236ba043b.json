{"ast":null,"code":"import _objectSpread from\"/Users/laurakalonzo/Documents/DEV/johandemeij/johan-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{ACTIONS}from'redux/actions/types.js';import{mainAction}from\"redux/actions/index.actions\";import{database,db}from\"../../firebase\";import _ from'lodash';var initialState={};var d=new Date();var day=d.getDate();var month=d.getMonth()+1;var year=d.getFullYear();export default function agendaReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case ACTIONS.CREATE_NEW_AGENDA:{var stateCopy=_.cloneDeep(action.payload);db.collection(\"agendas\").add(stateCopy).then(function(docRef){console.log(docRef);stateCopy._id=docRef.id;action.asyncDispatch(mainAction(ACTIONS.CREATE_NEW_AGENDA_SUCCESS,stateCopy));});return state;}case ACTIONS.CREATE_NEW_AGENDA_SUCCESS:{return action.payload;}case ACTIONS.DELETE_AGENDA:{db.collection(\"agendas\").where('id','==',action.payload).get().then(function(querySnapshot){querySnapshot.forEach(function(doc){return doc.ref.delete();});action.asyncDispatch(mainAction(ACTIONS.DELETE_AGENDA_SUCCESS,[]));});return state;}case ACTIONS.DELETE_AGENDA_SUCCESS:{action.asyncDispatch(mainAction(ACTIONS.LOAD_AGENDAS,[]));return state;}case ACTIONS.LOAD_CD_AGENDA:{db.collection(\"agendas\").where(\"year\",\"==\",year.toString()).orderBy(\"month\",\"asc\").get().then(function(snapshot){var data=snapshot.docs.map(function(doc){return doc.data();});action.asyncDispatch(mainAction(ACTIONS.LOAD_CD_AGENDA_SUCCESS,data));});return state;}case ACTIONS.LOAD_CD_AGENDA_SUCCESS:{return _.orderBy(action.payload,['month','day'],['asc','asc']);}case ACTIONS.LOAD_CD_AGENDA_FAIL:{return state;}case ACTIONS.LOAD_AGENDAS:{db.collection(\"agendas\").where(\"year\",\"==\",year.toString()).orderBy(\"month\",\"asc\").get().then(function(snapshot){var data=snapshot.docs.map(function(doc){return doc.data();});var agendas=[];Object.values(data).map(function(agenda){agenda.date=\"\".concat(agenda.month,\"-\").concat(agenda.day,\"-\").concat(agenda.year);agenda.month=+agenda.month;// console.log(agenda.month ,\">=\", month ,\"&&\", +agenda.day.replace(/^0+/, '') ,\">\", day)\nif(+agenda.month>=+month)return agendas.push(agenda);});action.asyncDispatch(mainAction(ACTIONS.LOAD_CD_AGENDA_SUCCESS,agendas));});return state;}case ACTIONS.LOAD_AGENDAS_SUCCESS:{return action.payload;}case ACTIONS.LOAD_AGENDAS_FAIL:{return state;}case ACTIONS.LOAD_AGENDAS_FILTERED:{db.collection(\"agendas\").where(\"year\",\"==\",action.payload.year.toString()).orderBy(\"month\",\"asc\").get().then(function(snapshot){var agendas=[];var data=snapshot.docs.map(function(doc){return doc.data();});Object.values(data).map(function(agenda){agenda.date=\"\".concat(agenda.month,\"-\").concat(agenda.day,\"-\").concat(agenda.year);agenda.month=+agenda.month;return agendas.push(agenda);});action.asyncDispatch(mainAction(ACTIONS.LOAD_AGENDAS_SUCCESS,_.orderBy(agendas,['month','day'],['asc','asc'])));});return state;}case ACTIONS.LOAD_AGENDAS_FILTERED:{return action.payload;}case ACTIONS.LOAD_AGENDA:{// let stateCopy = []\n// var agendaRef = database.ref('agendas/'+action.payload)\n//  agendaRef.on('value',(snap,i)=>{\n// const data = snap.val()\n// if(data) \n// action.asyncDispatch(mainAction(ACTIONS.LOAD_AGENDA_SUCCESS,{...data}))\n// })\n// var agendaRef = database.ref('agendas').orderByChild('id').startAt(action.payload).endAt(action.payload)\n//  agendaRef.on('child_added',(snap,i)=>{\n// const data = snap.val()\n// stateCopy = data\n// if(stateCopy)\n// action.asyncDispatch(mainAction(ACTIONS.LOAD_AGENDA_SUCCESS,{...stateCopy}))\n// })\ndb.collection(\"agendas\").where(\"id\",\"==\",action.payload).get().then(function(snapshot){var data=snapshot.docs.map(function(doc){return doc.data();});action.asyncDispatch(mainAction(ACTIONS.LOAD_AGENDA_SUCCESS,_objectSpread({},data)));});return state;}case ACTIONS.LOAD_AGENDA_SUCCESS:{return action.payload[0];}case ACTIONS.LOAD_AGENDA_FAIL:{return state;}case ACTIONS.UPDATE_AGENDA:{var _id='';db.collection(\"agendas\").where(\"id\",\"==\",action.payload.id).get().then(function(snapshot){var data=snapshot.docs.map(function(doc){_id=doc.id;return doc.data();});db.collection(\"agendas\").doc(_id).update(action.payload).then(function(){console.log(\"success\");action.asyncDispatch(mainAction(ACTIONS.UPDATE_AGENDA_SUCCESS,action.payload));});});return state;}case ACTIONS.UPDATE_AGENDA_SUCCESS:{var _stateCopy=_.cloneDeep(action.payload);action.asyncDispatch(mainAction(ACTIONS.LOAD_AGENDA,_stateCopy.id));return _stateCopy;}case ACTIONS.UPDATE_AGENDA_FAIL:{return state;}default:return _objectSpread({},state);}}","map":{"version":3,"sources":["/Users/laurakalonzo/Documents/DEV/johandemeij/johan-app/src/redux/reducers/agenda.reducer.js"],"names":["ACTIONS","mainAction","database","db","_","initialState","d","Date","day","getDate","month","getMonth","year","getFullYear","agendaReducer","state","action","type","CREATE_NEW_AGENDA","stateCopy","cloneDeep","payload","collection","add","then","docRef","console","log","_id","id","asyncDispatch","CREATE_NEW_AGENDA_SUCCESS","DELETE_AGENDA","where","get","querySnapshot","forEach","doc","ref","delete","DELETE_AGENDA_SUCCESS","LOAD_AGENDAS","LOAD_CD_AGENDA","toString","orderBy","snapshot","data","docs","map","LOAD_CD_AGENDA_SUCCESS","LOAD_CD_AGENDA_FAIL","agendas","Object","values","agenda","date","push","LOAD_AGENDAS_SUCCESS","LOAD_AGENDAS_FAIL","LOAD_AGENDAS_FILTERED","LOAD_AGENDA","LOAD_AGENDA_SUCCESS","LOAD_AGENDA_FAIL","UPDATE_AGENDA","update","UPDATE_AGENDA_SUCCESS","UPDATE_AGENDA_FAIL"],"mappings":"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","sourcesContent":["import { ACTIONS } from 'redux/actions/types.js'\nimport { mainAction } from \"redux/actions/index.actions\"\nimport { database,db} from \"../../firebase\";\nimport _ from 'lodash'\nconst initialState = {\n};\nlet d = new Date();\nlet day = d.getDate();\nlet month = d.getMonth()+1;\nlet year = d.getFullYear()\nexport default function agendaReducer (state = initialState, action) {\n  switch (action.type) {\n    case ACTIONS.CREATE_NEW_AGENDA:{\n\n    let stateCopy = _.cloneDeep(action.payload)\n      \n        db.collection(\"agendas\")\n          .add(stateCopy)\n          .then(function(docRef){\n            console.log(docRef)\n            stateCopy._id = docRef.id\n            action.asyncDispatch(mainAction(ACTIONS.CREATE_NEW_AGENDA_SUCCESS,stateCopy))\n          });\n    return state\n    }\n    case ACTIONS.CREATE_NEW_AGENDA_SUCCESS:{\n    return action.payload\n    }\n    case ACTIONS.DELETE_AGENDA:{\n    db.collection(\"agendas\")\n    .where('id','==',action.payload)\n     .get()\n     .then((querySnapshot) => {\n       querySnapshot.forEach((doc)=> doc.ref.delete())\n       action.asyncDispatch(mainAction(ACTIONS.DELETE_AGENDA_SUCCESS,[]))\n     });\n\n    return state\n    }  \n    case ACTIONS.DELETE_AGENDA_SUCCESS:{\n    action.asyncDispatch(mainAction(ACTIONS.LOAD_AGENDAS,[]))\n    return state\n    }  \n    case ACTIONS.LOAD_CD_AGENDA: {\n\n\n    db.collection(\"agendas\")\n    .where(\"year\",\"==\",year.toString())\n    .orderBy(\"month\",\"asc\")\n    .get()\n    .then(snapshot => {\n      const data = snapshot.docs.map(doc => {return doc.data()});\n      action.asyncDispatch(mainAction(ACTIONS.LOAD_CD_AGENDA_SUCCESS,data))\n    })\n    return state\n    }\n    case ACTIONS.LOAD_CD_AGENDA_SUCCESS: {\n    return _.orderBy(action.payload,['month','day'],['asc','asc'])\n    }\n    case ACTIONS.LOAD_CD_AGENDA_FAIL: {\n\n    return state\n    }\n    case ACTIONS.LOAD_AGENDAS: {\n\n    db.collection(\"agendas\")\n    .where(\"year\",\"==\",year.toString())\n    .orderBy(\"month\",\"asc\")\n    .get()\n    .then(snapshot => {\n      const data = snapshot.docs.map(doc => {return doc.data()});\n      let agendas = []\n      Object.values(data).map(agenda=>{\n        agenda.date = `${agenda.month}-${agenda.day}-${agenda.year}`\n        agenda.month = +agenda.month\n       // console.log(agenda.month ,\">=\", month ,\"&&\", +agenda.day.replace(/^0+/, '') ,\">\", day)\n       if(+agenda.month >= +month )\n        return agendas.push(agenda)\n      })\n      action.asyncDispatch(mainAction(ACTIONS.LOAD_CD_AGENDA_SUCCESS,agendas))\n    })\n    return state\n    }\n    case ACTIONS.LOAD_AGENDAS_SUCCESS:{\n\n    return action.payload\n    }\n    case ACTIONS.LOAD_AGENDAS_FAIL:{\n    return state\n    }\n    case ACTIONS.LOAD_AGENDAS_FILTERED:{\n    db.collection(\"agendas\")\n    .where(\"year\",\"==\",action.payload.year.toString())\n    .orderBy(\"month\",\"asc\")\n    .get()\n    .then(snapshot => {\n      let agendas = []\n      const data = snapshot.docs.map(doc => {return doc.data()});\n      Object.values(data).map(agenda=>{\n        agenda.date = `${agenda.month}-${agenda.day}-${agenda.year}`\n        agenda.month = +agenda.month\n        return agendas.push(agenda)\n      })\n      action.asyncDispatch(mainAction(ACTIONS.LOAD_AGENDAS_SUCCESS,_.orderBy(agendas,['month','day'],['asc','asc'])))\n    })\n    return state\n    }\n    case ACTIONS.LOAD_AGENDAS_FILTERED:{\n      return action.payload\n    }\n    case ACTIONS.LOAD_AGENDA:{\n    // let stateCopy = []\n    // var agendaRef = database.ref('agendas/'+action.payload)\n    //  agendaRef.on('value',(snap,i)=>{\n    // const data = snap.val()\n    // if(data) \n    // action.asyncDispatch(mainAction(ACTIONS.LOAD_AGENDA_SUCCESS,{...data}))\n      \n    // })\n    // var agendaRef = database.ref('agendas').orderByChild('id').startAt(action.payload).endAt(action.payload)\n    //  agendaRef.on('child_added',(snap,i)=>{\n    // const data = snap.val()\n    // stateCopy = data\n    // if(stateCopy)\n    // action.asyncDispatch(mainAction(ACTIONS.LOAD_AGENDA_SUCCESS,{...stateCopy}))\n      \n    // })\n    db.collection(\"agendas\")\n    .where(\"id\",\"==\",action.payload)\n    .get()\n    .then(snapshot => {\n      const data = snapshot.docs.map(doc => doc.data());\n      action.asyncDispatch(mainAction(ACTIONS.LOAD_AGENDA_SUCCESS,{...data}))\n    })\n    return state\n    }\n    case ACTIONS.LOAD_AGENDA_SUCCESS:{\n    return action.payload[0]\n    }\n    case ACTIONS.LOAD_AGENDA_FAIL:{\n    return state\n    }\n    case ACTIONS.UPDATE_AGENDA:{\n      let _id =''\n      db.collection(\"agendas\")\n    .where(\"id\",\"==\",action.payload.id)\n    .get()\n    .then(snapshot => {\n      const data = snapshot.docs.map(doc => {\n        _id = doc.id\n        return doc.data()});\n        db.collection(\"agendas\").doc(_id)\n        .update(action.payload).then(()=>{\n          console.log(\"success\")\n        action.asyncDispatch(mainAction(ACTIONS.UPDATE_AGENDA_SUCCESS,action.payload))\n     });\n    })\n     \n    return state\n    }\n    case ACTIONS.UPDATE_AGENDA_SUCCESS:{\n    let stateCopy = _.cloneDeep(action.payload)\n    action.asyncDispatch(mainAction(ACTIONS.LOAD_AGENDA,stateCopy.id))\n    return stateCopy\n    }\n    case ACTIONS.UPDATE_AGENDA_FAIL:{\n   \n    return state\n    }\n    default: \n      return {\n        ...state\n    }\n  }\n}"]},"metadata":{},"sourceType":"module"}