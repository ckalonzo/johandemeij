{"ast":null,"code":"import _regeneratorRuntime from\"/Users/carlkalonzo/Documents/DEV/johandemeij/johan-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/carlkalonzo/Documents/DEV/johandemeij/johan-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/carlkalonzo/Documents/DEV/johandemeij/johan-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import{Form,Container,Row,Col,Button}from\"react-bootstrap\";import{ACTIONS}from\"redux/actions/types\";import SideNav from\"components/dashboard/SideNav\";import{mainAction}from\"redux/actions/index.actions\";import CKEditor from'@ckeditor/ckeditor5-react';import ClassicEditor from'@ckeditor/ckeditor5-build-classic';import _ from\"lodash\";import PublicationImage from\"components/dashboard/PublicationImage\";import Loading from\"components/shared/Loading\";import PresentationMusic from\"components/dashboard/PresentationMusic\";var NewPublication=function NewPublication(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),validated=_useState4[0],setValidated=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),field_cdName=_useState6[0],setCdName=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),field_subTitle=_useState8[0],setSubTitle=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),field_composer=_useState10[0],setComposer=_useState10[1];var _useState11=useState(),_useState12=_slicedToArray(_useState11,2),field_instrumentation=_useState12[0],setInstrumentation=_useState12[1];var _useState13=useState(),_useState14=_slicedToArray(_useState13,2),field_synopsis=_useState14[0],setSynopsis=_useState14[1];var _useState15=useState(),_useState16=_slicedToArray(_useState15,2),field_totalTime=_useState16[0],setTotalTime=_useState16[1];var _useState17=useState(),_useState18=_slicedToArray(_useState17,2),field_category=_useState18[0],setCategory=_useState18[1];var _useState19=useState(props.presentation.synopsis),_useState20=_slicedToArray(_useState19,2),field_codes=_useState20[0],setCodes=_useState20[1];var _useState21=useState(),_useState22=_slicedToArray(_useState21,2),field_grade=_useState22[0],setGrade=_useState22[1];var _useState23=useState(),_useState24=_slicedToArray(_useState23,2),field_cd=_useState24[0],setCd=_useState24[1];var _useState25=useState(),_useState26=_slicedToArray(_useState25,2),field_otherCd=_useState26[0],setOtherCd=_useState26[1];var _useState27=useState(),_useState28=_slicedToArray(_useState27,2),field_score=_useState28[0],setScore=_useState28[1];var _useState29=useState(),_useState30=_slicedToArray(_useState29,2),field_audio=_useState30[0],setAudio=_useState30[1];var _useState31=useState(),_useState32=_slicedToArray(_useState31,2),field_video=_useState32[0],setVideo=_useState32[1];useEffect(function(){// Update the document title using the browser API\nwindow.scrollTo(0,0);props.actions.mainAction(ACTIONS.LOAD_ALL_PRESENTATIONS,[]);props.actions.mainAction(ACTIONS.LOAD_CDS,[]);var publicationId=props.match.params.id;if(publicationId)props.actions.mainAction(ACTIONS.LOAD_PRESENTATION,publicationId);// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);var handleSubmit=function handleSubmit(event){event.preventDefault();var testArray=[];var lastItem=Object.values(props.allPresentations).map(function(item,i){return testArray.push({id:parseInt(item.id,10)});});var publicationItem={id:(_.orderBy(testArray,'id','desc')[0].id+1).toString(),cdName:field_cdName?field_cdName:\"\",subTitle:field_subTitle?field_subTitle:\"\",composer:field_composer?field_composer:\"\",instrumentation:field_instrumentation?field_instrumentation:\"\",synopsis:field_synopsis?field_synopsis:\"\",totalTime:field_totalTime?field_totalTime:\"\",category:field_category?field_category:\"\",codes:field_codes?field_codes:\"\",grade:field_grade?field_grade:\"\",cd:field_cd?field_cd:\"\",otherCd:field_otherCd?field_otherCd:\"\",score:field_score?field_score:\"\",audio:field_audio?field_audio:\"\",video:field_video?field_video:\"\"};var form=event.currentTarget;if(form.checkValidity()===false){event.stopPropagation();}setValidated(true);props.actions.mainAction(ACTIONS.CREATE_NEW_PUBLICATION,publicationItem);props.history.push('/dashboard/publications/edit/'+(_.orderBy(testArray,'id','desc')[0].id+1));};var handleUpdate=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var publicationItem,input,nativeInputValueSetter,inputEvent,form;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();publicationItem={_id:props.presentation._id,id:props.presentation.id,cdName:document.getElementById('cdName').value,subTitle:document.getElementById('subtitle').value,composer:document.getElementById('composer').value,instrumentation:document.getElementById('instrumentation').value,synopsis:field_synopsis,totalTime:document.getElementById('totalTime').value,category:document.getElementById('category').value,codes:document.getElementById('codes').value,grade:document.getElementById('grade').value,cd:document.getElementById('cd').value,otherCd:document.getElementById('otherCD').value,score:document.getElementById('score').value,audio:document.getElementById('audio').value,video:document.getElementById('video').value,frontCaption:document.getElementById('frontCaption').value,backCaption:document.getElementById('backCaption').value};input=document.querySelector(\"form:first-child input\");nativeInputValueSetter=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,\"value\").set;nativeInputValueSetter.call(input,\"\");inputEvent=new Event(\"input\",{bubbles:true});input.dispatchEvent(inputEvent);form=event.currentTarget;if(form.checkValidity()===false){event.stopPropagation();}window.scrollTo(0,0);setValidated(true);setLoading(true);props.actions.mainAction(ACTIONS.UPDATE_PUBLICATION,publicationItem);//props.history.push('/dashboard/publications/edit/'+props.presentation.id)\ncase 13:case\"end\":return _context.stop();}}},_callee);}));return function handleUpdate(_x){return _ref.apply(this,arguments);};}();var renderPublicationImage=function renderPublicationImage(){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(PublicationImage,{docId:props.presentation._id,ID:props.presentation.id,image:props.presentation.frontCover,caption:props.presentation.frontCaption,type:\"front\"}),/*#__PURE__*/React.createElement(PublicationImage,{docId:props.presentation._id,ID:props.presentation.id,image:props.presentation.backCover,caption:props.presentation.backCaption,type:\"back\"}));};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Container,{className:\"dashboard\"},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{lg:{span:2}},/*#__PURE__*/React.createElement(SideNav,null)),/*#__PURE__*/React.createElement(Col,{lg:{span:\"10\"}},Object.keys(props.presentation).length>0?renderPublicationImage():'',/*#__PURE__*/React.createElement(PresentationMusic,{ID:props.match.params.id}),loading?/*#__PURE__*/React.createElement(Loading,null):/*#__PURE__*/React.createElement(\"section\",{id:\"product\"},/*#__PURE__*/React.createElement(Form,{noValidate:true,validated:validated,onSubmit:Object.keys(props.presentation).length>0?handleUpdate:handleSubmit},/*#__PURE__*/React.createElement(Form.Row,null,/*#__PURE__*/React.createElement(Col,{lg:\"6\"},/*#__PURE__*/React.createElement(Form.Group,{as:Col,controlId:\"cdName\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Name\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",placeholder:\"\",defaultValue:props.presentation.cdName,onChange:function onChange(e){return setCdName(e.target.value);},onBlur:function onBlur(e){return setCdName(e.target.value);}}),/*#__PURE__*/React.createElement(Form.Control.Feedback,{type:\"invalid\"},\"Please provide a name.\"),/*#__PURE__*/React.createElement(Form.Control.Feedback,null,\"Looks good!\")),\" \"),/*#__PURE__*/React.createElement(Col,{lg:\"6\"},/*#__PURE__*/React.createElement(Form.Group,{as:Col,controlId:\"subtitle\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Sub Title\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",placeholder:\"\",defaultValue:props.presentation.subTitle,onChange:function onChange(e){return setSubTitle(e.target.value);}}),/*#__PURE__*/React.createElement(Form.Control.Feedback,{type:\"invalid\"},\"Please provide a Sub title.\"),/*#__PURE__*/React.createElement(Form.Control.Feedback,null,\"Looks good!\")))),/*#__PURE__*/React.createElement(Form.Row,null,/*#__PURE__*/React.createElement(Col,{lg:\"6\"},/*#__PURE__*/React.createElement(Form.Group,{as:Col,controlId:\"composer\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Composer\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",placeholder:\"\",defaultValue:props.presentation.composer,onChange:function onChange(e){return setComposer(e.target.value);}}),/*#__PURE__*/React.createElement(Form.Control.Feedback,{type:\"invalid\"},\"Please provide a composer.\"),/*#__PURE__*/React.createElement(Form.Control.Feedback,null,\"Looks good!\"))),/*#__PURE__*/React.createElement(Col,{lg:\"6\"},\" \",/*#__PURE__*/React.createElement(Form.Group,{as:Col,controlId:\"instrumentation\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Instrumentaion\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",placeholder:\"\",defaultValue:props.presentation.instrumentation,onChange:function onChange(e){return setInstrumentation(e.target.value);}}),/*#__PURE__*/React.createElement(Form.Control.Feedback,{type:\"invalid\"},\"Please provide a instrumentaion.\"),/*#__PURE__*/React.createElement(Form.Control.Feedback,null,\"Looks good!\")))),/*#__PURE__*/React.createElement(Form.Row,null,/*#__PURE__*/React.createElement(Col,{lg:\"6\"},/*#__PURE__*/React.createElement(Form.Group,{as:Col,controlId:\"totalTime\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Time\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",placeholder:\"\",defaultValue:props.presentation.totalTime,onChange:function onChange(e){return setTotalTime(e.target.value);}}),/*#__PURE__*/React.createElement(Form.Control.Feedback,{type:\"invalid\"},\"Please provide a product time.\"),/*#__PURE__*/React.createElement(Form.Control.Feedback,null,\"Looks good!\"))),/*#__PURE__*/React.createElement(Col,{lg:\"6\"},/*#__PURE__*/React.createElement(Form.Group,{as:Col,controlId:\"codes\"},/*#__PURE__*/React.createElement(Form.Label,null,\"codes\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",placeholder:\"\",defaultValue:props.presentation.codes,onChange:function onChange(e){return setCodes(e.target.value);},onBlur:function onBlur(e){return setCodes(e.target.value);}}),/*#__PURE__*/React.createElement(Form.Control.Feedback,{type:\"invalid\"},\"Please provide a product description.\"),/*#__PURE__*/React.createElement(Form.Control.Feedback,null,\"Looks good!\")))),/*#__PURE__*/React.createElement(Form.Row,null,/*#__PURE__*/React.createElement(Col,{lg:\"12\"},/*#__PURE__*/React.createElement(Form.Group,{as:Col,controlId:\"cd\"},/*#__PURE__*/React.createElement(Form.Label,null,\"CD\"),/*#__PURE__*/React.createElement(Form.Control,{required:true,as:\"select\",onChange:function onChange(e){return setCd(e.target.value);},onBlur:function onBlur(e){return setCd(e.target.value);},defaultValue:field_cd},/*#__PURE__*/React.createElement(\"option\",{value:\"\"},\"SELECT A CD\"),Object.values(_.orderBy(props.allCds?props.allCds:[],\"cd_name\",\"asc\")).map(function(CD){if(CD.id===props.presentation.cd)return/*#__PURE__*/React.createElement(\"option\",{key:CD.id,value:CD.id,selected:true},CD.cd_name);return/*#__PURE__*/React.createElement(\"option\",{key:CD.id,value:CD.id},CD.cd_name);})),\"                    \",/*#__PURE__*/React.createElement(Form.Control.Feedback,{type:\"invalid\"},\"Please provide a CD.\"),/*#__PURE__*/React.createElement(Form.Control.Feedback,null,\"Looks good!\")))),/*#__PURE__*/React.createElement(Form.Row,null,/*#__PURE__*/React.createElement(Col,{lg:\"6\"},/*#__PURE__*/React.createElement(Form.Group,{as:Col,controlId:\"grade\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Grade\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",placeholder:\"\",defaultValue:props.presentation.grade,onChange:function onChange(e){return setGrade(e.target.value);}}),/*#__PURE__*/React.createElement(Form.Control.Feedback,{type:\"invalid\"},\"Please provide a grade.\"),/*#__PURE__*/React.createElement(Form.Control.Feedback,null,\"Looks good!\"))),/*#__PURE__*/React.createElement(Col,{lg:\"6\"},/*#__PURE__*/React.createElement(Form.Group,{as:Col,controlId:\"otherCD\"},/*#__PURE__*/React.createElement(Form.Label,null,\"otherCD\"),/*#__PURE__*/React.createElement(Form.Control,{required:true,as:\"select\",onChange:function onChange(e){return setOtherCd(e.target.value);},onBlur:function onBlur(e){return setOtherCd(e.target.value);},defaultValue:field_otherCd},/*#__PURE__*/React.createElement(\"option\",{value:\"\"},\"SELECT A CD\"),Object.values(_.orderBy(props.allCds?props.allCds:[],\"cd_name\",\"asc\")).map(function(CD){if(CD.id===props.presentation.otherCd)return/*#__PURE__*/React.createElement(\"option\",{key:CD.id,value:CD.id,selected:true},CD.cd_name);return/*#__PURE__*/React.createElement(\"option\",{key:CD.id,value:CD.id},CD.cd_name);})),/*#__PURE__*/React.createElement(Form.Control.Feedback,{type:\"invalid\"},\"Please provide a cd.\"),/*#__PURE__*/React.createElement(Form.Control.Feedback,null,\"Looks good!\")))),/*#__PURE__*/React.createElement(Form.Row,null,/*#__PURE__*/React.createElement(Col,{lg:\"6\"},/*#__PURE__*/React.createElement(Form.Group,{as:Col,controlId:\"score\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Score\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",placeholder:\"\",defaultValue:props.presentation.score,onChange:function onChange(e){return setScore(e.target.value);}}),/*#__PURE__*/React.createElement(Form.Control.Feedback,{type:\"invalid\"},\"Please provide a score.\"),/*#__PURE__*/React.createElement(Form.Control.Feedback,null,\"Looks good!\"))),/*#__PURE__*/React.createElement(Col,{lg:\"6\"},/*#__PURE__*/React.createElement(Form.Group,{as:Col,controlId:\"audio\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Audio\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",placeholder:\"\",defaultValue:props.presentation.audio,onChange:function onChange(e){return setAudio(e.target.value);}}),/*#__PURE__*/React.createElement(Form.Control.Feedback,{type:\"invalid\"},\"Please provide audo.\"),/*#__PURE__*/React.createElement(Form.Control.Feedback,null,\"Looks good!\")))),/*#__PURE__*/React.createElement(Form.Row,null,/*#__PURE__*/React.createElement(Col,{lg:\"6\"},/*#__PURE__*/React.createElement(Form.Group,{as:Col,controlId:\"category\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Category\"),/*#__PURE__*/React.createElement(Form.Control,{as:\"select\",onChange:function onChange(e){return setCategory(e.target.value);},onBlur:function onBlur(e){return setCategory(e.target.value);},defaultValue:parseInt(props.presentation.category,10)},props.presentation.category>0?/*#__PURE__*/React.createElement(\"option\",{defaultValue:props.presentation.category,selected:true},props.categories.filter(function(category){return category.id===parseInt(props.presentation.category,10);}).map(function(category){return category.name;})):\"\",props.categories.map(function(category){return/*#__PURE__*/React.createElement(\"option\",{value:category.id},category.name);})),/*#__PURE__*/React.createElement(Form.Control.Feedback,{type:\"invalid\"},\"Please select a category.\"),/*#__PURE__*/React.createElement(Form.Control.Feedback,null,\"Looks good!\"))),/*#__PURE__*/React.createElement(Col,{lg:\"6\"},/*#__PURE__*/React.createElement(Form.Group,{as:Col,controlId:\"video\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Video\"),/*#__PURE__*/React.createElement(Form.Control,{as:\"textarea\",rows:\"3\",onChange:function onChange(e){return setVideo(e.target.value);},defaultValue:props.presentation.video}),/*#__PURE__*/React.createElement(Form.Control.Feedback,{type:\"invalid\"},\"Please provide a video.\"),/*#__PURE__*/React.createElement(Form.Control.Feedback,null,\"Looks good!\")))),/*#__PURE__*/React.createElement(Form.Row,null,/*#__PURE__*/React.createElement(Form.Group,{as:Col,controlId:\"content\"},/*#__PURE__*/React.createElement(CKEditor,{editor:ClassicEditor,data:props.presentation.synopsis?props.presentation.synopsis:field_synopsis,toolbar:('heading','|','bold','italic','link','bulletedList','numberedList','blockQuote'),onInit:function onInit(editor){// You can store the \"editor\" and use when it is needed.\n// console.log( 'Editor is ready to use!', editor );\n},onChange:function onChange(event,editor){var data=editor.getData();// console.log( { event, editor, data } );\nsetSynopsis(data?data:props.presentation.synopsis);},onBlur:function onBlur(event,editor){var data=editor.getData();console.log('Blur.',editor);setSynopsis(data?data:props.presentation.synopsis);},onFocus:function onFocus(event,editor){console.log('Focus.',editor);}}))),/*#__PURE__*/React.createElement(Button,{type:\"submit\"},Object.keys(props.presentation).length>0?\"Update Publication\":\"Create Publication\")))))));};function mapStateToProps(state){return{allPresentations:_.orderBy(state.AllPresentationsReducer,\"id\",\"asc\"),categories:state.musicReducer.categories,presentation:state.presentationReducer,presentationImages:state.postImagesReducer,allCds:state.cdsReducer};}function mapDispatchToProps(dispatch){return{actions:bindActionCreators({mainAction:mainAction},dispatch)};}export default connect(mapStateToProps,mapDispatchToProps)(NewPublication);","map":{"version":3,"sources":["/Users/carlkalonzo/Documents/DEV/johandemeij/johan-app/src/components/dashboard/NewPublication.jsx"],"names":["React","useEffect","useState","connect","bindActionCreators","Form","Container","Row","Col","Button","ACTIONS","SideNav","mainAction","CKEditor","ClassicEditor","_","PublicationImage","Loading","PresentationMusic","NewPublication","props","loading","setLoading","validated","setValidated","field_cdName","setCdName","field_subTitle","setSubTitle","field_composer","setComposer","field_instrumentation","setInstrumentation","field_synopsis","setSynopsis","field_totalTime","setTotalTime","field_category","setCategory","presentation","synopsis","field_codes","setCodes","field_grade","setGrade","field_cd","setCd","field_otherCd","setOtherCd","field_score","setScore","field_audio","setAudio","field_video","setVideo","window","scrollTo","actions","LOAD_ALL_PRESENTATIONS","LOAD_CDS","publicationId","match","params","id","LOAD_PRESENTATION","handleSubmit","event","preventDefault","testArray","lastItem","Object","values","allPresentations","map","item","i","push","parseInt","publicationItem","orderBy","toString","cdName","subTitle","composer","instrumentation","totalTime","category","codes","grade","cd","otherCd","score","audio","video","form","currentTarget","checkValidity","stopPropagation","CREATE_NEW_PUBLICATION","history","handleUpdate","_id","document","getElementById","value","frontCaption","backCaption","input","querySelector","nativeInputValueSetter","getOwnPropertyDescriptor","HTMLInputElement","prototype","set","call","inputEvent","Event","bubbles","dispatchEvent","UPDATE_PUBLICATION","renderPublicationImage","frontCover","backCover","span","keys","length","e","target","allCds","CD","cd_name","categories","filter","name","editor","data","getData","console","log","mapStateToProps","state","AllPresentationsReducer","musicReducer","presentationReducer","presentationImages","postImagesReducer","cdsReducer","mapDispatchToProps","dispatch"],"mappings":"ogBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,kBAAT,KAAmC,OAAnC,CACA,OAASC,IAAT,CAAeC,SAAf,CAA0BC,GAA1B,CAA+BC,GAA/B,CAAoCC,MAApC,KAAiD,iBAAjD,CACA,OAASC,OAAT,KAAwB,qBAAxB,CACA,MAAOC,CAAAA,OAAP,KAAoB,8BAApB,CACA,OAASC,UAAT,KAA2B,6BAA3B,CACA,MAAOC,CAAAA,QAAP,KAAqB,2BAArB,CACA,MAAOC,CAAAA,aAAP,KAA0B,mCAA1B,CACA,MAAOC,CAAAA,CAAP,KAAc,QAAd,CACA,MAAOC,CAAAA,gBAAP,KAA6B,uCAA7B,CACA,MAAOC,CAAAA,OAAP,KAAoB,2BAApB,CACA,MAAOC,CAAAA,iBAAP,KAA8B,wCAA9B,CACA,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAAAC,KAAK,CAAI,eACDlB,QAAQ,CAAC,KAAD,CADP,wCACvBmB,OADuB,eACfC,UADe,8BAEIpB,QAAQ,CAAC,KAAD,CAFZ,yCAEvBqB,SAFuB,eAEZC,YAFY,8BAGGtB,QAAQ,EAHX,yCAGvBuB,YAHuB,eAGVC,SAHU,8BAIOxB,QAAQ,EAJf,yCAIvByB,cAJuB,eAIRC,WAJQ,8BAKO1B,QAAQ,EALf,0CAKvB2B,cALuB,gBAKRC,WALQ,gCAMqB5B,QAAQ,EAN7B,2CAMvB6B,qBANuB,gBAMDC,kBANC,gCAOO9B,QAAQ,EAPf,2CAOvB+B,cAPuB,gBAORC,WAPQ,gCAQShC,QAAQ,EARjB,2CAQvBiC,eARuB,gBAQPC,YARO,gCASOlC,QAAQ,EATf,2CASvBmC,cATuB,gBASRC,WATQ,gCAUCpC,QAAQ,CAACkB,KAAK,CAACmB,YAAN,CAAmBC,QAApB,CAVT,2CAUvBC,WAVuB,gBAUXC,QAVW,gCAWCxC,QAAQ,EAXT,2CAWvByC,WAXuB,gBAWXC,QAXW,gCAYL1C,QAAQ,EAZH,2CAYvB2C,QAZuB,gBAYdC,KAZc,gCAaK5C,QAAQ,EAbb,2CAavB6C,aAbuB,gBAaTC,UAbS,gCAcC9C,QAAQ,EAdT,2CAcvB+C,WAduB,gBAcXC,QAdW,gCAeChD,QAAQ,EAfT,2CAevBiD,WAfuB,gBAeXC,QAfW,gCAgBClD,QAAQ,EAhBT,2CAgBvBmD,WAhBuB,gBAgBXC,QAhBW,gBAmB9BrD,SAAS,CAAC,UAAM,CACd;AACAsD,MAAM,CAACC,QAAP,CAAgB,CAAhB,CAAkB,CAAlB,EACApC,KAAK,CAACqC,OAAN,CAAc7C,UAAd,CAAyBF,OAAO,CAACgD,sBAAjC,CAAwD,EAAxD,EACAtC,KAAK,CAACqC,OAAN,CAAc7C,UAAd,CAAyBF,OAAO,CAACiD,QAAjC,CAA0C,EAA1C,EACD,GAAIC,CAAAA,aAAa,CAAGxC,KAAK,CAACyC,KAAN,CAAYC,MAAZ,CAAmBC,EAAvC,CACC,GAAGH,aAAH,CACAxC,KAAK,CAACqC,OAAN,CAAc7C,UAAd,CAAyBF,OAAO,CAACsD,iBAAjC,CAAmDJ,aAAnD,EACA;AACD,CATQ,CASN,EATM,CAAT,CAUA,GAAMK,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAAAC,KAAK,CAAI,CAC5BA,KAAK,CAACC,cAAN,GACA,GAAIC,CAAAA,SAAS,CAAG,EAAhB,CACA,GAAIC,CAAAA,QAAQ,CAAGC,MAAM,CAACC,MAAP,CAAcnD,KAAK,CAACoD,gBAApB,EAAsCC,GAAtC,CAA0C,SAACC,IAAD,CAAMC,CAAN,CAAW,CAEhE,MAAOP,CAAAA,SAAS,CAACQ,IAAV,CAAe,CAACb,EAAE,CAACc,QAAQ,CAACH,IAAI,CAACX,EAAN,CAAS,EAAT,CAAZ,CAAf,CAAP,CACH,CAHc,CAAf,CAKA,GAAIe,CAAAA,eAAe,CAAG,CAClBf,EAAE,CAAC,CAAChD,CAAC,CAACgE,OAAF,CAAUX,SAAV,CAAoB,IAApB,CAAyB,MAAzB,EAAiC,CAAjC,EAAoCL,EAApC,CAAyC,CAA1C,EAA6CiB,QAA7C,EADe,CAElBC,MAAM,CAACxD,YAAY,CAAGA,YAAH,CAAgB,EAFjB,CAGlByD,QAAQ,CAACvD,cAAc,CAAGA,cAAH,CAAkB,EAHvB,CAIlBwD,QAAQ,CAACtD,cAAc,CAAGA,cAAH,CAAkB,EAJvB,CAKlBuD,eAAe,CAACrD,qBAAqB,CAAGA,qBAAH,CAAyB,EAL5C,CAMlBS,QAAQ,CAACP,cAAc,CAAGA,cAAH,CAAkB,EANvB,CAOlBoD,SAAS,CAAClD,eAAe,CAAGA,eAAH,CAAmB,EAP1B,CAQlBmD,QAAQ,CAACjD,cAAc,CAAGA,cAAH,CAAkB,EARvB,CASlBkD,KAAK,CAAC9C,WAAW,CAAGA,WAAH,CAAe,EATd,CAUlB+C,KAAK,CAAC7C,WAAW,CAAGA,WAAH,CAAe,EAVd,CAWlB8C,EAAE,CAAC5C,QAAQ,CAAGA,QAAH,CAAY,EAXL,CAYlB6C,OAAO,CAAC3C,aAAa,CAAGA,aAAH,CAAiB,EAZpB,CAalB4C,KAAK,CAAC1C,WAAW,CAAGA,WAAH,CAAe,EAbd,CAclB2C,KAAK,CAACzC,WAAW,CAAGA,WAAH,CAAe,EAdd,CAelB0C,KAAK,CAACxC,WAAW,CAAGA,WAAH,CAAe,EAfd,CAAtB,CAkBA,GAAMyC,CAAAA,IAAI,CAAG5B,KAAK,CAAC6B,aAAnB,CACA,GAAID,IAAI,CAACE,aAAL,KAAyB,KAA7B,CAAoC,CAClC9B,KAAK,CAAC+B,eAAN,GACD,CACDzE,YAAY,CAAC,IAAD,CAAZ,CACAJ,KAAK,CAACqC,OAAN,CAAc7C,UAAd,CAAyBF,OAAO,CAACwF,sBAAjC,CAAwDpB,eAAxD,EACA1D,KAAK,CAAC+E,OAAN,CAAcvB,IAAd,CAAmB,iCAAiC7D,CAAC,CAACgE,OAAF,CAAUX,SAAV,CAAoB,IAApB,CAAyB,MAAzB,EAAiC,CAAjC,EAAoCL,EAApC,CAAyC,CAA1E,CAAnB,EACD,CAjCD,CAkCA,GAAMqC,CAAAA,YAAY,0FAAG,iBAAMlC,KAAN,mLACnBA,KAAK,CAACC,cAAN,GACIW,eAFe,CAEG,CAClBuB,GAAG,CAACjF,KAAK,CAACmB,YAAN,CAAmB8D,GADL,CAElBtC,EAAE,CAAC3C,KAAK,CAACmB,YAAN,CAAmBwB,EAFJ,CAGlBkB,MAAM,CAACqB,QAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAHvB,CAIlBtB,QAAQ,CAACoB,QAAQ,CAACC,cAAT,CAAwB,UAAxB,EAAoCC,KAJ3B,CAKlBrB,QAAQ,CAACmB,QAAQ,CAACC,cAAT,CAAwB,UAAxB,EAAoCC,KAL3B,CAMlBpB,eAAe,CAACkB,QAAQ,CAACC,cAAT,CAAwB,iBAAxB,EAA2CC,KANzC,CAOlBhE,QAAQ,CAACP,cAPS,CAQlBoD,SAAS,CAACiB,QAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCC,KAR7B,CASlBlB,QAAQ,CAACgB,QAAQ,CAACC,cAAT,CAAwB,UAAxB,EAAoCC,KAT3B,CAUlBjB,KAAK,CAACe,QAAQ,CAACC,cAAT,CAAwB,OAAxB,EAAiCC,KAVrB,CAWlBhB,KAAK,CAACc,QAAQ,CAACC,cAAT,CAAwB,OAAxB,EAAiCC,KAXrB,CAYlBf,EAAE,CAACa,QAAQ,CAACC,cAAT,CAAwB,IAAxB,EAA8BC,KAZf,CAalBd,OAAO,CAACY,QAAQ,CAACC,cAAT,CAAwB,SAAxB,EAAmCC,KAbzB,CAclBb,KAAK,CAACW,QAAQ,CAACC,cAAT,CAAwB,OAAxB,EAAiCC,KAdrB,CAelBZ,KAAK,CAACU,QAAQ,CAACC,cAAT,CAAwB,OAAxB,EAAiCC,KAfrB,CAgBlBX,KAAK,CAACS,QAAQ,CAACC,cAAT,CAAwB,OAAxB,EAAiCC,KAhBrB,CAiBlBC,YAAY,CAACH,QAAQ,CAACC,cAAT,CAAwB,cAAxB,EAAwCC,KAjBnC,CAkBlBE,WAAW,CAACJ,QAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAlBjC,CAFH,CAsBdG,KAtBc,CAsBNL,QAAQ,CAACM,aAAT,CAAuB,wBAAvB,CAtBM,CAuBdC,sBAvBc,CAuBWvC,MAAM,CAACwC,wBAAP,CAC5BvD,MAAM,CAACwD,gBAAP,CAAwBC,SADI,CAE5B,OAF4B,EAG5BC,GA1BiB,CA2BnBJ,sBAAsB,CAACK,IAAvB,CAA4BP,KAA5B,CAAmC,EAAnC,EAEKQ,UA7Bc,CA6BD,GAAIC,CAAAA,KAAJ,CAAU,OAAV,CAAmB,CAAEC,OAAO,CAAE,IAAX,CAAnB,CA7BC,CA8BnBV,KAAK,CAACW,aAAN,CAAoBH,UAApB,EACMrB,IA/Ba,CA+BN5B,KAAK,CAAC6B,aA/BA,CAgCnB,GAAID,IAAI,CAACE,aAAL,KAAyB,KAA7B,CAAoC,CAClC9B,KAAK,CAAC+B,eAAN,GACD,CACD1C,MAAM,CAACC,QAAP,CAAgB,CAAhB,CAAkB,CAAlB,EACAhC,YAAY,CAAC,IAAD,CAAZ,CACAF,UAAU,CAAC,IAAD,CAAV,CACAF,KAAK,CAACqC,OAAN,CAAc7C,UAAd,CAAyBF,OAAO,CAAC6G,kBAAjC,CAAoDzC,eAApD,EACA;AAvCmB,uDAAH,kBAAZsB,CAAAA,YAAY,4CAAlB,CAyCA,GAAMoB,CAAAA,sBAAsB,CAAG,QAAzBA,CAAAA,sBAAyB,EAAM,CACnC,mBAAQ,qDACR,oBAAC,gBAAD,EAAkB,KAAK,CAAEpG,KAAK,CAACmB,YAAN,CAAmB8D,GAA5C,CAAiD,EAAE,CAAEjF,KAAK,CAACmB,YAAN,CAAmBwB,EAAxE,CAA4E,KAAK,CAAE3C,KAAK,CAACmB,YAAN,CAAmBkF,UAAtG,CAAkH,OAAO,CAAErG,KAAK,CAACmB,YAAN,CAAmBkE,YAA9I,CAA4J,IAAI,CAAC,OAAjK,EADQ,cAER,oBAAC,gBAAD,EAAkB,KAAK,CAAErF,KAAK,CAACmB,YAAN,CAAmB8D,GAA5C,CAAiD,EAAE,CAAEjF,KAAK,CAACmB,YAAN,CAAmBwB,EAAxE,CAA4E,KAAK,CAAE3C,KAAK,CAACmB,YAAN,CAAmBmF,SAAtG,CAAiH,OAAO,CAAEtG,KAAK,CAACmB,YAAN,CAAmBmE,WAA7I,CAA0J,IAAI,CAAC,MAA/J,EAFQ,CAAR,CAID,CALD,CAMA,mBACE,qDACE,oBAAC,SAAD,EAAW,SAAS,CAAC,WAArB,eACE,oBAAC,GAAD,mBACE,oBAAC,GAAD,EAAK,EAAE,CAAE,CAAEiB,IAAI,CAAE,CAAR,CAAT,eAAsB,oBAAC,OAAD,MAAtB,CADF,cAEE,oBAAC,GAAD,EAAK,EAAE,CAAE,CAACA,IAAI,CAAC,IAAN,CAAT,EACCrD,MAAM,CAACsD,IAAP,CAAYxG,KAAK,CAACmB,YAAlB,EAAgCsF,MAAhC,CAAyC,CAAzC,CAA6CL,sBAAsB,EAAnE,CAAsE,EADvE,cAEA,oBAAC,iBAAD,EAAmB,EAAE,CAAEpG,KAAK,CAACyC,KAAN,CAAYC,MAAZ,CAAmBC,EAA1C,EAFA,CAGC1C,OAAO,cAAG,oBAAC,OAAD,MAAH,cAAgB,+BAAS,EAAE,CAAC,SAAZ,eACpB,oBAAC,IAAD,EAAM,UAAU,KAAhB,CAAiB,SAAS,CAAEE,SAA5B,CAAuC,QAAQ,CAAE+C,MAAM,CAACsD,IAAP,CAAYxG,KAAK,CAACmB,YAAlB,EAAgCsF,MAAhC,CAAyC,CAAzC,CAA4CzB,YAA5C,CAA0DnC,YAA3G,eACA,oBAAC,IAAD,CAAM,GAAN,mBAAU,oBAAC,GAAD,EAAK,EAAE,CAAC,GAAR,eACN,oBAAC,IAAD,CAAM,KAAN,EAAY,EAAE,CAAEzD,GAAhB,CAAsB,SAAS,CAAC,QAAhC,eACG,oBAAC,IAAD,CAAM,KAAN,aADH,cAEE,oBAAC,IAAD,CAAM,OAAN,EACE,IAAI,CAAC,MADP,CAEE,WAAW,CAAC,EAFd,CAGE,YAAY,CAAEY,KAAK,CAACmB,YAAN,CAAmB0C,MAHnC,CAIE,QAAQ,CAAE,kBAAA6C,CAAC,QAAIpG,CAAAA,SAAS,CAACoG,CAAC,CAACC,MAAF,CAASvB,KAAV,CAAb,EAJb,CAKE,MAAM,CAAE,gBAAAsB,CAAC,QAAIpG,CAAAA,SAAS,CAACoG,CAAC,CAACC,MAAF,CAASvB,KAAV,CAAb,EALX,EAFF,cASE,oBAAC,IAAD,CAAM,OAAN,CAAc,QAAd,EAAuB,IAAI,CAAC,SAA5B,2BATF,cAYE,oBAAC,IAAD,CAAM,OAAN,CAAc,QAAd,oBAZF,CADM,KAAV,cAeG,oBAAC,GAAD,EAAK,EAAE,CAAC,GAAR,eACC,oBAAC,IAAD,CAAM,KAAN,EAAY,EAAE,CAAEhG,GAAhB,CAAuB,SAAS,CAAC,UAAjC,eACA,oBAAC,IAAD,CAAM,KAAN,kBADA,cAEE,oBAAC,IAAD,CAAM,OAAN,EAEE,IAAI,CAAC,MAFP,CAGE,WAAW,CAAC,EAHd,CAIE,YAAY,CAAEY,KAAK,CAACmB,YAAN,CAAmB2C,QAJnC,CAKE,QAAQ,CAAE,kBAAA4C,CAAC,QAAIlG,CAAAA,WAAW,CAACkG,CAAC,CAACC,MAAF,CAASvB,KAAV,CAAf,EALb,EAFF,cAUE,oBAAC,IAAD,CAAM,OAAN,CAAc,QAAd,EAAuB,IAAI,CAAC,SAA5B,gCAVF,cAaE,oBAAC,IAAD,CAAM,OAAN,CAAc,QAAd,oBAbF,CADD,CAfH,CADA,cAkCI,oBAAC,IAAD,CAAM,GAAN,mBACA,oBAAC,GAAD,EAAK,EAAE,CAAC,GAAR,eAAY,oBAAC,IAAD,CAAM,KAAN,EAAY,EAAE,CAAEhG,GAAhB,CAAsB,SAAS,CAAC,UAAhC,eACV,oBAAC,IAAD,CAAM,KAAN,iBADU,cAEV,oBAAC,IAAD,CAAM,OAAN,EACE,IAAI,CAAC,MADP,CAEE,WAAW,CAAC,EAFd,CAGE,YAAY,CAAEY,KAAK,CAACmB,YAAN,CAAmB4C,QAHnC,CAIE,QAAQ,CAAE,kBAAA2C,CAAC,QAAIhG,CAAAA,WAAW,CAACgG,CAAC,CAACC,MAAF,CAASvB,KAAV,CAAf,EAJb,EAFU,cAQV,oBAAC,IAAD,CAAM,OAAN,CAAc,QAAd,EAAuB,IAAI,CAAC,SAA5B,+BARU,cAWV,oBAAC,IAAD,CAAM,OAAN,CAAc,QAAd,oBAXU,CAAZ,CADA,cAcA,oBAAC,GAAD,EAAK,EAAE,CAAC,GAAR,mBAAa,oBAAC,IAAD,CAAM,KAAN,EAAY,EAAE,CAAEhG,GAAhB,CAAsB,SAAS,CAAC,iBAAhC,eACX,oBAAC,IAAD,CAAM,KAAN,uBADW,cAEX,oBAAC,IAAD,CAAM,OAAN,EACE,IAAI,CAAC,MADP,CAEE,WAAW,CAAC,EAFd,CAGE,YAAY,CAAEY,KAAK,CAACmB,YAAN,CAAmB6C,eAHnC,CAIE,QAAQ,CAAE,kBAAA0C,CAAC,QAAI9F,CAAAA,kBAAkB,CAAC8F,CAAC,CAACC,MAAF,CAASvB,KAAV,CAAtB,EAJb,EAFW,cASX,oBAAC,IAAD,CAAM,OAAN,CAAc,QAAd,EAAuB,IAAI,CAAC,SAA5B,qCATW,cAYX,oBAAC,IAAD,CAAM,OAAN,CAAc,QAAd,oBAZW,CAAb,CAdA,CAlCJ,cA+DE,oBAAC,IAAD,CAAM,GAAN,mBACA,oBAAC,GAAD,EAAK,EAAE,CAAC,GAAR,eAAY,oBAAC,IAAD,CAAM,KAAN,EAAY,EAAE,CAAEhG,GAAhB,CAAqB,SAAS,CAAC,WAA/B,eACR,oBAAC,IAAD,CAAM,KAAN,aADQ,cAER,oBAAC,IAAD,CAAM,OAAN,EAEE,IAAI,CAAC,MAFP,CAGE,WAAW,CAAC,EAHd,CAIE,YAAY,CAAEY,KAAK,CAACmB,YAAN,CAAmB8C,SAJnC,CAKE,QAAQ,CAAE,kBAAAyC,CAAC,QAAI1F,CAAAA,YAAY,CAAC0F,CAAC,CAACC,MAAF,CAASvB,KAAV,CAAhB,EALb,EAFQ,cAUR,oBAAC,IAAD,CAAM,OAAN,CAAc,QAAd,EAAuB,IAAI,CAAC,SAA5B,mCAVQ,cAaR,oBAAC,IAAD,CAAM,OAAN,CAAc,QAAd,oBAbQ,CAAZ,CADA,cAgBA,oBAAC,GAAD,EAAK,EAAE,CAAC,GAAR,eAAY,oBAAC,IAAD,CAAM,KAAN,EAAY,EAAE,CAAEhG,GAAhB,CAAqB,SAAS,CAAC,OAA/B,eACR,oBAAC,IAAD,CAAM,KAAN,cADQ,cAER,oBAAC,IAAD,CAAM,OAAN,EAEE,IAAI,CAAC,MAFP,CAGE,WAAW,CAAC,EAHd,CAIE,YAAY,CAAEY,KAAK,CAACmB,YAAN,CAAmBgD,KAJnC,CAKE,QAAQ,CAAE,kBAAAuC,CAAC,QAAIpF,CAAAA,QAAQ,CAACoF,CAAC,CAACC,MAAF,CAASvB,KAAV,CAAZ,EALb,CAME,MAAM,CAAE,gBAAAsB,CAAC,QAAIpF,CAAAA,QAAQ,CAACoF,CAAC,CAACC,MAAF,CAASvB,KAAV,CAAZ,EANX,EAFQ,cAUR,oBAAC,IAAD,CAAM,OAAN,CAAc,QAAd,EAAuB,IAAI,CAAC,SAA5B,0CAVQ,cAaR,oBAAC,IAAD,CAAM,OAAN,CAAc,QAAd,oBAbQ,CAAZ,CAhBA,CA/DF,cAgGE,oBAAC,IAAD,CAAM,GAAN,mBACA,oBAAC,GAAD,EAAK,EAAE,CAAC,IAAR,eAAa,oBAAC,IAAD,CAAM,KAAN,EAAY,EAAE,CAAEhG,GAAhB,CAAqB,SAAS,CAAC,IAA/B,eACT,oBAAC,IAAD,CAAM,KAAN,WADS,cAET,oBAAC,IAAD,CAAM,OAAN,EACE,QAAQ,KADV,CAEE,EAAE,CAAC,QAFL,CAGE,QAAQ,CAAE,kBAAAsH,CAAC,QAAIhF,CAAAA,KAAK,CAACgF,CAAC,CAACC,MAAF,CAASvB,KAAV,CAAT,EAHb,CAIE,MAAM,CAAE,gBAAAsB,CAAC,QAAIhF,CAAAA,KAAK,CAACgF,CAAC,CAACC,MAAF,CAASvB,KAAV,CAAT,EAJX,CAKE,YAAY,CAAE3D,QALhB,eAOG,8BAAQ,KAAK,CAAC,EAAd,gBAPH,CAQIyB,MAAM,CAACC,MAAP,CAAcxD,CAAC,CAACgE,OAAF,CAAU3D,KAAK,CAAC4G,MAAN,CAAe5G,KAAK,CAAC4G,MAArB,CAA4B,EAAtC,CAAyC,SAAzC,CAAmD,KAAnD,CAAd,EAAyEvD,GAAzE,CAA6E,SAAAwD,EAAE,CAAE,CAC7F,GAAGA,EAAE,CAAClE,EAAH,GAAU3C,KAAK,CAACmB,YAAN,CAAmBkD,EAAhC,CACA,mBAAO,8BAAQ,GAAG,CAAEwC,EAAE,CAAClE,EAAhB,CAAoB,KAAK,CAAEkE,EAAE,CAAClE,EAA9B,CAAkC,QAAQ,KAA1C,EAA4CkE,EAAE,CAACC,OAA/C,CAAP,CACA,mBAAO,8BAAQ,GAAG,CAAED,EAAE,CAAClE,EAAhB,CAAoB,KAAK,CAAEkE,EAAE,CAAClE,EAA9B,EAAoCkE,EAAE,CAACC,OAAvC,CAAP,CACC,CAJW,CARJ,CAFS,qCAgB0B,oBAAC,IAAD,CAAM,OAAN,CAAc,QAAd,EAAuB,IAAI,CAAC,SAA5B,yBAhB1B,cAmBT,oBAAC,IAAD,CAAM,OAAN,CAAc,QAAd,oBAnBS,CAAb,CADA,CAhGF,cAuHE,oBAAC,IAAD,CAAM,GAAN,mBACA,oBAAC,GAAD,EAAK,EAAE,CAAC,GAAR,eAAY,oBAAC,IAAD,CAAM,KAAN,EAAY,EAAE,CAAE1H,GAAhB,CAAqB,SAAS,CAAC,OAA/B,eACR,oBAAC,IAAD,CAAM,KAAN,cADQ,cAER,oBAAC,IAAD,CAAM,OAAN,EAEE,IAAI,CAAC,MAFP,CAGE,WAAW,CAAC,EAHd,CAIE,YAAY,CAAEY,KAAK,CAACmB,YAAN,CAAmBiD,KAJnC,CAKE,QAAQ,CAAE,kBAAAsC,CAAC,QAAIlF,CAAAA,QAAQ,CAACkF,CAAC,CAACC,MAAF,CAASvB,KAAV,CAAZ,EALb,EAFQ,cAUR,oBAAC,IAAD,CAAM,OAAN,CAAc,QAAd,EAAuB,IAAI,CAAC,SAA5B,4BAVQ,cAaR,oBAAC,IAAD,CAAM,OAAN,CAAc,QAAd,oBAbQ,CAAZ,CADA,cAgBA,oBAAC,GAAD,EAAK,EAAE,CAAC,GAAR,eAAY,oBAAC,IAAD,CAAM,KAAN,EAAY,EAAE,CAAEhG,GAAhB,CAAqB,SAAS,CAAC,SAA/B,eACR,oBAAC,IAAD,CAAM,KAAN,gBADQ,cAER,oBAAC,IAAD,CAAM,OAAN,EACA,QAAQ,KADR,CAEA,EAAE,CAAC,QAFH,CAGA,QAAQ,CAAE,kBAAAsH,CAAC,QAAI9E,CAAAA,UAAU,CAAC8E,CAAC,CAACC,MAAF,CAASvB,KAAV,CAAd,EAHX,CAIA,MAAM,CAAE,gBAAAsB,CAAC,QAAI9E,CAAAA,UAAU,CAAC8E,CAAC,CAACC,MAAF,CAASvB,KAAV,CAAd,EAJT,CAKA,YAAY,CAAEzD,aALd,eAOC,8BAAQ,KAAK,CAAC,EAAd,gBAPD,CAQPuB,MAAM,CAACC,MAAP,CAAcxD,CAAC,CAACgE,OAAF,CAAU3D,KAAK,CAAC4G,MAAN,CAAe5G,KAAK,CAAC4G,MAArB,CAA4B,EAAtC,CAAyC,SAAzC,CAAmD,KAAnD,CAAd,EAAyEvD,GAAzE,CAA6E,SAAAwD,EAAE,CAAE,CAClF,GAAGA,EAAE,CAAClE,EAAH,GAAU3C,KAAK,CAACmB,YAAN,CAAmBmD,OAAhC,CACA,mBAAO,8BAAQ,GAAG,CAAEuC,EAAE,CAAClE,EAAhB,CAAoB,KAAK,CAAEkE,EAAE,CAAClE,EAA9B,CAAkC,QAAQ,KAA1C,EAA4CkE,EAAE,CAACC,OAA/C,CAAP,CACA,mBAAO,8BAAQ,GAAG,CAAED,EAAE,CAAClE,EAAhB,CAAoB,KAAK,CAAEkE,EAAE,CAAClE,EAA9B,EAAoCkE,EAAE,CAACC,OAAvC,CAAP,CACC,CAJA,CARO,CAFQ,cAiBR,oBAAC,IAAD,CAAM,OAAN,CAAc,QAAd,EAAuB,IAAI,CAAC,SAA5B,yBAjBQ,cAoBR,oBAAC,IAAD,CAAM,OAAN,CAAc,QAAd,oBApBQ,CAAZ,CAhBA,CAvHF,cA+JE,oBAAC,IAAD,CAAM,GAAN,mBACA,oBAAC,GAAD,EAAK,EAAE,CAAC,GAAR,eAAY,oBAAC,IAAD,CAAM,KAAN,EAAY,EAAE,CAAE1H,GAAhB,CAAqB,SAAS,CAAC,OAA/B,eACR,oBAAC,IAAD,CAAM,KAAN,cADQ,cAER,oBAAC,IAAD,CAAM,OAAN,EAEE,IAAI,CAAC,MAFP,CAGE,WAAW,CAAC,EAHd,CAIE,YAAY,CAAEY,KAAK,CAACmB,YAAN,CAAmBoD,KAJnC,CAKE,QAAQ,CAAE,kBAAAmC,CAAC,QAAI5E,CAAAA,QAAQ,CAAC4E,CAAC,CAACC,MAAF,CAASvB,KAAV,CAAZ,EALb,EAFQ,cAUR,oBAAC,IAAD,CAAM,OAAN,CAAc,QAAd,EAAuB,IAAI,CAAC,SAA5B,4BAVQ,cAaR,oBAAC,IAAD,CAAM,OAAN,CAAc,QAAd,oBAbQ,CAAZ,CADA,cAgBA,oBAAC,GAAD,EAAK,EAAE,CAAC,GAAR,eAAY,oBAAC,IAAD,CAAM,KAAN,EAAY,EAAE,CAAEhG,GAAhB,CAAqB,SAAS,CAAC,OAA/B,eACR,oBAAC,IAAD,CAAM,KAAN,cADQ,cAER,oBAAC,IAAD,CAAM,OAAN,EAEE,IAAI,CAAC,MAFP,CAGE,WAAW,CAAC,EAHd,CAIE,YAAY,CAAEY,KAAK,CAACmB,YAAN,CAAmBqD,KAJnC,CAKE,QAAQ,CAAE,kBAAAkC,CAAC,QAAI1E,CAAAA,QAAQ,CAAC0E,CAAC,CAACC,MAAF,CAASvB,KAAV,CAAZ,EALb,EAFQ,cAUR,oBAAC,IAAD,CAAM,OAAN,CAAc,QAAd,EAAuB,IAAI,CAAC,SAA5B,yBAVQ,cAaR,oBAAC,IAAD,CAAM,OAAN,CAAc,QAAd,oBAbQ,CAAZ,CAhBA,CA/JF,cA+LE,oBAAC,IAAD,CAAM,GAAN,mBACI,oBAAC,GAAD,EAAK,EAAE,CAAC,GAAR,eAAY,oBAAC,IAAD,CAAM,KAAN,EAAY,EAAE,CAAEhG,GAAhB,CAAqB,SAAS,CAAC,UAA/B,eACZ,oBAAC,IAAD,CAAM,KAAN,iBADY,cAEZ,oBAAC,IAAD,CAAM,OAAN,EAEE,EAAE,CAAC,QAFL,CAGE,QAAQ,CAAE,kBAAAsH,CAAC,QAAIxF,CAAAA,WAAW,CAACwF,CAAC,CAACC,MAAF,CAASvB,KAAV,CAAf,EAHb,CAIE,MAAM,CAAE,gBAAAsB,CAAC,QAAIxF,CAAAA,WAAW,CAACwF,CAAC,CAACC,MAAF,CAASvB,KAAV,CAAf,EAJX,CAKE,YAAY,CAAE3B,QAAQ,CAACzD,KAAK,CAACmB,YAAN,CAAmB+C,QAApB,CAA6B,EAA7B,CALxB,EAOClE,KAAK,CAACmB,YAAN,CAAmB+C,QAAnB,CAA8B,CAA9B,cAAkC,8BAAQ,YAAY,CAAElE,KAAK,CAACmB,YAAN,CAAmB+C,QAAzC,CAAmD,QAAQ,KAA3D,EAA6DlE,KAAK,CAAC+G,UAAN,CAAiBC,MAAjB,CAAwB,SAAA9C,QAAQ,QAAIA,CAAAA,QAAQ,CAACvB,EAAT,GAAgBc,QAAQ,CAACzD,KAAK,CAACmB,YAAN,CAAmB+C,QAApB,CAA6B,EAA7B,CAA5B,EAAhC,EAA8Fb,GAA9F,CAAkG,SAAAa,QAAQ,QAAIA,CAAAA,QAAQ,CAAC+C,IAAb,EAA1G,CAA7D,CAAlC,CAAwO,EAPzO,CAQCjH,KAAK,CAAC+G,UAAN,CAAiB1D,GAAjB,CAAqB,SAAAa,QAAQ,CAAE,CAC5B,mBAAO,8BAAQ,KAAK,CAAEA,QAAQ,CAACvB,EAAxB,EAA6BuB,QAAQ,CAAC+C,IAAtC,CAAP,CACH,CAFA,CARD,CAFY,cAeZ,oBAAC,IAAD,CAAM,OAAN,CAAc,QAAd,EAAuB,IAAI,CAAC,SAA5B,8BAfY,cAkBZ,oBAAC,IAAD,CAAM,OAAN,CAAc,QAAd,oBAlBY,CAAZ,CADJ,cAqBI,oBAAC,GAAD,EAAK,EAAE,CAAC,GAAR,eAAY,oBAAC,IAAD,CAAM,KAAN,EAAY,EAAE,CAAE7H,GAAhB,CAAqB,SAAS,CAAC,OAA/B,eACZ,oBAAC,IAAD,CAAM,KAAN,cADY,cAEZ,oBAAC,IAAD,CAAM,OAAN,EAEE,EAAE,CAAC,UAFL,CAEgB,IAAI,CAAC,GAFrB,CAGE,QAAQ,CAAE,kBAAAsH,CAAC,QAAIxE,CAAAA,QAAQ,CAACwE,CAAC,CAACC,MAAF,CAASvB,KAAV,CAAZ,EAHb,CAIE,YAAY,CAAEpF,KAAK,CAACmB,YAAN,CAAmBsD,KAJnC,EAFY,cAQZ,oBAAC,IAAD,CAAM,OAAN,CAAc,QAAd,EAAuB,IAAI,CAAC,SAA5B,4BARY,cAWZ,oBAAC,IAAD,CAAM,OAAN,CAAc,QAAd,oBAXY,CAAZ,CArBJ,CA/LF,cAoOE,oBAAC,IAAD,CAAM,GAAN,mBACE,oBAAC,IAAD,CAAM,KAAN,EAAY,EAAE,CAAErF,GAAhB,CAAqB,SAAS,CAAC,SAA/B,eACE,oBAAC,QAAD,EACI,MAAM,CAAGM,aADb,CAEI,IAAI,CAAEM,KAAK,CAACmB,YAAN,CAAmBC,QAAnB,CAA8BpB,KAAK,CAACmB,YAAN,CAAmBC,QAAjD,CAA2DP,cAFrE,CAGI,OAAO,EAAG,UAAW,GAAX,CAAgB,MAAhB,CAAwB,QAAxB,CAAkC,MAAlC,CAA0C,cAA1C,CAA0D,cAA1D,CAA0E,YAA7E,CAHX,CAII,MAAM,CAAG,gBAAAqG,MAAM,CAAI,CACf;AACD;AACF,CAPL,CAQI,QAAQ,CAAG,kBAAEpE,KAAF,CAASoE,MAAT,CAAqB,CAC5B,GAAMC,CAAAA,IAAI,CAAGD,MAAM,CAACE,OAAP,EAAb,CACD;AACAtG,WAAW,CAACqG,IAAI,CAAGA,IAAH,CAAUnH,KAAK,CAACmB,YAAN,CAAmBC,QAAlC,CAAX,CACF,CAZL,CAaI,MAAM,CAAG,gBAAE0B,KAAF,CAASoE,MAAT,CAAqB,CAC5B,GAAMC,CAAAA,IAAI,CAAGD,MAAM,CAACE,OAAP,EAAb,CACEC,OAAO,CAACC,GAAR,CAAa,OAAb,CAAsBJ,MAAtB,EACApG,WAAW,CAACqG,IAAI,CAAGA,IAAH,CAAUnH,KAAK,CAACmB,YAAN,CAAmBC,QAAlC,CAAX,CACH,CAjBL,CAkBI,OAAO,CAAG,iBAAE0B,KAAF,CAASoE,MAAT,CAAqB,CAC3BG,OAAO,CAACC,GAAR,CAAa,QAAb,CAAuBJ,MAAvB,EACH,CApBL,EADF,CADF,CApOF,cA8PE,oBAAC,MAAD,EAAQ,IAAI,CAAC,QAAb,EAAuBhE,MAAM,CAACsD,IAAP,CAAYxG,KAAK,CAACmB,YAAlB,EAAgCsF,MAAhC,CAAyC,CAAzC,CAA4C,oBAA5C,CAAkE,oBAAzF,CA9PF,CADoB,CAHxB,CAFF,CADF,CADF,CADF,CA+QD,CA7XD,CA8XA,QAASc,CAAAA,eAAT,CAAyBC,KAAzB,CAAgC,CAE9B,MAAO,CACLpE,gBAAgB,CAACzD,CAAC,CAACgE,OAAF,CAAU6D,KAAK,CAACC,uBAAhB,CAAwC,IAAxC,CAA6C,KAA7C,CADZ,CAELV,UAAU,CAACS,KAAK,CAACE,YAAN,CAAmBX,UAFzB,CAGL5F,YAAY,CAACqG,KAAK,CAACG,mBAHd,CAILC,kBAAkB,CAACJ,KAAK,CAACK,iBAJpB,CAKLjB,MAAM,CAACY,KAAK,CAACM,UALR,CAAP,CAOD,CAED,QAASC,CAAAA,kBAAT,CAA4BC,QAA5B,CAAsC,CACpC,MAAO,CACL3F,OAAO,CAAErD,kBAAkB,CAAC,CAACQ,UAAU,CAAVA,UAAD,CAAD,CAAewI,QAAf,CADtB,CAAP,CAGD,CAED,cAAejJ,CAAAA,OAAO,CAACwI,eAAD,CAAkBQ,kBAAlB,CAAP,CAA6ChI,cAA7C,CAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { Form, Container, Row, Col, Button} from \"react-bootstrap\";\nimport { ACTIONS } from \"redux/actions/types\";\nimport SideNav from \"components/dashboard/SideNav\";\nimport { mainAction } from \"redux/actions/index.actions\"\nimport CKEditor from '@ckeditor/ckeditor5-react';\nimport ClassicEditor from '@ckeditor/ckeditor5-build-classic';\nimport _ from \"lodash\"\nimport PublicationImage from \"components/dashboard/PublicationImage\"\nimport Loading from \"components/shared/Loading\"\nimport PresentationMusic from \"components/dashboard/PresentationMusic\"\nconst NewPublication = props => {\n  const [loading,setLoading] = useState(false)\n  const [validated, setValidated] = useState(false);\n  const [field_cdName,setCdName] = useState()\n  const [field_subTitle,setSubTitle] = useState()\n  const [field_composer,setComposer] = useState()\n  const [field_instrumentation,setInstrumentation] = useState()\n  const [field_synopsis,setSynopsis] = useState()\n  const [field_totalTime,setTotalTime] = useState()\n  const [field_category,setCategory] = useState()\n  const [field_codes,setCodes] = useState(props.presentation.synopsis)\n  const [field_grade,setGrade] = useState()\n  const [field_cd,setCd] = useState()\n  const [field_otherCd,setOtherCd] = useState()\n  const [field_score,setScore] = useState()\n  const [field_audio,setAudio] = useState()\n  const [field_video,setVideo] = useState()\n\n\n  useEffect(() => {\n    // Update the document title using the browser API\n    window.scrollTo(0,0)\n    props.actions.mainAction(ACTIONS.LOAD_ALL_PRESENTATIONS,[])\n    props.actions.mainAction(ACTIONS.LOAD_CDS,[])\n   let publicationId = props.match.params.id\n    if(publicationId)\n    props.actions.mainAction(ACTIONS.LOAD_PRESENTATION,publicationId)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  const handleSubmit = event => {\n    event.preventDefault();\n    let testArray = []\n    let lastItem = Object.values(props.allPresentations).map((item,i) =>{\n       \n        return testArray.push({id:parseInt(item.id,10)})\n    })\n    \n    let publicationItem = {\n        id:(_.orderBy(testArray,'id','desc')[0].id + 1).toString(),\n        cdName:field_cdName ? field_cdName:\"\",\n        subTitle:field_subTitle ? field_subTitle:\"\",\n        composer:field_composer ? field_composer:\"\",\n        instrumentation:field_instrumentation ? field_instrumentation:\"\",\n        synopsis:field_synopsis ? field_synopsis:\"\",\n        totalTime:field_totalTime ? field_totalTime:\"\",\n        category:field_category ? field_category:\"\",\n        codes:field_codes ? field_codes:\"\",\n        grade:field_grade ? field_grade:\"\",\n        cd:field_cd ? field_cd:\"\",\n        otherCd:field_otherCd ? field_otherCd:\"\",\n        score:field_score ? field_score:\"\",\n        audio:field_audio ? field_audio:\"\",\n        video:field_video ? field_video:\"\"\n    }\n\n    const form = event.currentTarget;\n    if (form.checkValidity() === false) {\n      event.stopPropagation();\n    }\n    setValidated(true);\n    props.actions.mainAction(ACTIONS.CREATE_NEW_PUBLICATION,publicationItem)\n    props.history.push('/dashboard/publications/edit/'+(_.orderBy(testArray,'id','desc')[0].id + 1))\n  };\n  const handleUpdate = async event => {\n    event.preventDefault();\n    let publicationItem = {\n        _id:props.presentation._id,\n        id:props.presentation.id,\n        cdName:document.getElementById('cdName').value,\n        subTitle:document.getElementById('subtitle').value,\n        composer:document.getElementById('composer').value,\n        instrumentation:document.getElementById('instrumentation').value,\n        synopsis:field_synopsis,\n        totalTime:document.getElementById('totalTime').value,\n        category:document.getElementById('category').value,\n        codes:document.getElementById('codes').value,\n        grade:document.getElementById('grade').value,\n        cd:document.getElementById('cd').value,\n        otherCd:document.getElementById('otherCD').value,\n        score:document.getElementById('score').value,\n        audio:document.getElementById('audio').value,\n        video:document.getElementById('video').value,\n        frontCaption:document.getElementById('frontCaption').value,\n        backCaption:document.getElementById('backCaption').value,\n    }\n   const input = document.querySelector(\"form:first-child input\");\n   const nativeInputValueSetter = Object.getOwnPropertyDescriptor(\n      window.HTMLInputElement.prototype,\n      \"value\"\n    ).set;\n    nativeInputValueSetter.call(input, \"\");\n\n   const inputEvent = new Event(\"input\", { bubbles: true });\n    input.dispatchEvent(inputEvent);\n    const form = event.currentTarget;\n    if (form.checkValidity() === false) {\n      event.stopPropagation();\n    }\n    window.scrollTo(0,0)\n    setValidated(true);\n    setLoading(true)\n    props.actions.mainAction(ACTIONS.UPDATE_PUBLICATION,publicationItem)\n    //props.history.push('/dashboard/publications/edit/'+props.presentation.id)\n  } \n  const renderPublicationImage = () => {\n    return (<>\n    <PublicationImage docId={props.presentation._id} ID={props.presentation.id} image={props.presentation.frontCover} caption={props.presentation.frontCaption} type=\"front\" />\n    <PublicationImage docId={props.presentation._id} ID={props.presentation.id} image={props.presentation.backCover} caption={props.presentation.backCaption} type=\"back\" />\n    </>)\n  }\n  return (\n    <>\n      <Container className=\"dashboard\">\n        <Row>\n          <Col lg={{ span: 2 }}><SideNav /></Col>\n          <Col lg={{span:\"10\" }}> \n          {Object.keys(props.presentation).length > 0 ? renderPublicationImage():''}\n          <PresentationMusic ID={props.match.params.id}  />\n          {loading ? <Loading /> :<section id=\"product\">\n              <Form noValidate validated={validated} onSubmit={Object.keys(props.presentation).length > 0 ?handleUpdate :handleSubmit}>\n              <Form.Row><Col lg=\"6\">\n                  <Form.Group as={Col}  controlId=\"cdName\">\n                     <Form.Label>Name</Form.Label>\n                    <Form.Control\n                      type=\"text\"\n                      placeholder=\"\"\n                      defaultValue={props.presentation.cdName}\n                      onChange={e => setCdName(e.target.value)}\n                      onBlur={e => setCdName(e.target.value)}\n                    />\n                    <Form.Control.Feedback type=\"invalid\">\n                        Please provide a name.\n                      </Form.Control.Feedback>\n                    <Form.Control.Feedback>Looks good!</Form.Control.Feedback>\n                  </Form.Group> </Col>\n                 <Col lg=\"6\">\n                  <Form.Group as={Col}   controlId=\"subtitle\">\n                  <Form.Label>Sub Title</Form.Label>\n                    <Form.Control\n                     \n                      type=\"text\"\n                      placeholder=\"\"\n                      defaultValue={props.presentation.subTitle}\n                      onChange={e => setSubTitle(e.target.value)}\n                      \n                    />\n                    <Form.Control.Feedback type=\"invalid\">\n                        Please provide a Sub title.\n                      </Form.Control.Feedback>\n                    <Form.Control.Feedback>Looks good!</Form.Control.Feedback>\n                  </Form.Group>\n                  </Col>\n                  </Form.Row> \n                  <Form.Row>\n                  <Col lg=\"6\"><Form.Group as={Col}  controlId=\"composer\">\n                    <Form.Label>Composer</Form.Label>\n                    <Form.Control\n                      type=\"text\"\n                      placeholder=\"\"\n                      defaultValue={props.presentation.composer}\n                      onChange={e => setComposer(e.target.value)}\n                    />\n                    <Form.Control.Feedback type=\"invalid\">\n                        Please provide a composer.\n                      </Form.Control.Feedback>\n                    <Form.Control.Feedback>Looks good!</Form.Control.Feedback>\n                  </Form.Group></Col>\n                  <Col lg=\"6\"> <Form.Group as={Col}  controlId=\"instrumentation\">\n                    <Form.Label>Instrumentaion</Form.Label>\n                    <Form.Control\n                      type=\"text\"\n                      placeholder=\"\"\n                      defaultValue={props.presentation.instrumentation}\n                      onChange={e => setInstrumentation(e.target.value)}\n                      \n                    />\n                    <Form.Control.Feedback type=\"invalid\">\n                        Please provide a instrumentaion.\n                      </Form.Control.Feedback>\n                    <Form.Control.Feedback>Looks good!</Form.Control.Feedback>\n                  </Form.Group></Col>\n                  </Form.Row>\n                <Form.Row>\n                <Col lg=\"6\"><Form.Group as={Col} controlId=\"totalTime\">\n                    <Form.Label>Time</Form.Label>\n                    <Form.Control\n                     \n                      type=\"text\"\n                      placeholder=\"\"\n                      defaultValue={props.presentation.totalTime}\n                      onChange={e => setTotalTime(e.target.value)}\n                      \n                    />\n                    <Form.Control.Feedback type=\"invalid\">\n                        Please provide a product time.\n                      </Form.Control.Feedback>\n                    <Form.Control.Feedback>Looks good!</Form.Control.Feedback>\n                  </Form.Group></Col> \n                <Col lg=\"6\"><Form.Group as={Col} controlId=\"codes\">\n                    <Form.Label>codes</Form.Label>\n                    <Form.Control\n                     \n                      type=\"text\"\n                      placeholder=\"\"\n                      defaultValue={props.presentation.codes}\n                      onChange={e => setCodes(e.target.value)}\n                      onBlur={e => setCodes(e.target.value)}\n                    />\n                    <Form.Control.Feedback type=\"invalid\">\n                        Please provide a product description.\n                      </Form.Control.Feedback>\n                    <Form.Control.Feedback>Looks good!</Form.Control.Feedback>\n                  </Form.Group>\n                  </Col>\n                </Form.Row>\n                <Form.Row>\n                <Col lg=\"12\"><Form.Group as={Col} controlId=\"cd\">\n                    <Form.Label>CD</Form.Label>\n                    <Form.Control\n                      required\n                      as=\"select\"\n                      onChange={e => setCd(e.target.value)}\n                      onBlur={e => setCd(e.target.value)}\n                      defaultValue={field_cd}\n                    >\n                       <option value=\"\" >SELECT A CD</option>\n                       {Object.values(_.orderBy(props.allCds ? props.allCds:[],\"cd_name\",\"asc\")).map(CD=>{\n            if(CD.id === props.presentation.cd)\n            return <option key={CD.id} value={CD.id} selected>{CD.cd_name}</option>\n            return <option key={CD.id} value={CD.id} >{CD.cd_name}</option>\n            })}\n                        \n                    </Form.Control>                    <Form.Control.Feedback type=\"invalid\">\n                        Please provide a CD.\n                      </Form.Control.Feedback>\n                    <Form.Control.Feedback>Looks good!</Form.Control.Feedback>\n                  </Form.Group></Col>\n                </Form.Row>\n                <Form.Row>\n                <Col lg=\"6\"><Form.Group as={Col} controlId=\"grade\">\n                    <Form.Label>Grade</Form.Label>\n                    <Form.Control\n                     \n                      type=\"text\"\n                      placeholder=\"\"\n                      defaultValue={props.presentation.grade}\n                      onChange={e => setGrade(e.target.value)}\n                      \n                    />\n                    <Form.Control.Feedback type=\"invalid\">\n                        Please provide a grade.\n                      </Form.Control.Feedback>\n                    <Form.Control.Feedback>Looks good!</Form.Control.Feedback>\n                  </Form.Group></Col>\n                <Col lg=\"6\"><Form.Group as={Col} controlId=\"otherCD\">\n                    <Form.Label>otherCD</Form.Label>\n                    <Form.Control\n                    required\n                    as=\"select\"\n                    onChange={e => setOtherCd(e.target.value)}\n                    onBlur={e => setOtherCd(e.target.value)}\n                    defaultValue={field_otherCd}\n                  >\n                     <option value=\"\" >SELECT A CD</option>\n            {Object.values(_.orderBy(props.allCds ? props.allCds:[],\"cd_name\",\"asc\")).map(CD=>{\n            if(CD.id === props.presentation.otherCd)\n            return <option key={CD.id} value={CD.id} selected>{CD.cd_name}</option>\n            return <option key={CD.id} value={CD.id} >{CD.cd_name}</option>\n            })}\n                      \n                  </Form.Control>\n                    <Form.Control.Feedback type=\"invalid\">\n                        Please provide a cd.\n                      </Form.Control.Feedback>\n                    <Form.Control.Feedback>Looks good!</Form.Control.Feedback>\n                  </Form.Group></Col>\n\n                </Form.Row>\n                <Form.Row>\n                <Col lg=\"6\"><Form.Group as={Col} controlId=\"score\">\n                    <Form.Label>Score</Form.Label>\n                    <Form.Control\n                     \n                      type=\"text\"\n                      placeholder=\"\"\n                      defaultValue={props.presentation.score}\n                      onChange={e => setScore(e.target.value)}\n                      \n                    />\n                    <Form.Control.Feedback type=\"invalid\">\n                        Please provide a score.\n                      </Form.Control.Feedback>\n                    <Form.Control.Feedback>Looks good!</Form.Control.Feedback>\n                  </Form.Group></Col>\n                <Col lg=\"6\"><Form.Group as={Col} controlId=\"audio\">\n                    <Form.Label>Audio</Form.Label>\n                    <Form.Control\n                     \n                      type=\"text\"\n                      placeholder=\"\"\n                      defaultValue={props.presentation.audio}\n                      onChange={e => setAudio(e.target.value)}\n                      \n                    />\n                    <Form.Control.Feedback type=\"invalid\">\n                        Please provide audo.\n                      </Form.Control.Feedback>\n                    <Form.Control.Feedback>Looks good!</Form.Control.Feedback>\n                  </Form.Group></Col>\n                </Form.Row>\n                <Form.Row>\n                    <Col lg=\"6\"><Form.Group as={Col} controlId=\"category\">\n                    <Form.Label>Category</Form.Label>\n                    <Form.Control\n                     \n                      as=\"select\"\n                      onChange={e => setCategory(e.target.value)}\n                      onBlur={e => setCategory(e.target.value)}\n                      defaultValue={parseInt(props.presentation.category,10)}\n                    >\n                    {props.presentation.category > 0 ? <option defaultValue={props.presentation.category} selected>{props.categories.filter(category => category.id === parseInt(props.presentation.category,10)).map(category => category.name)}</option> : \"\"}\n                    {props.categories.map(category=>{\n                        return <option value={category.id}>{category.name}</option>\n                    })}\n                        \n                    </Form.Control>\n                    <Form.Control.Feedback type=\"invalid\">\n                        Please select a category.\n                      </Form.Control.Feedback>\n                    <Form.Control.Feedback>Looks good!</Form.Control.Feedback>\n                  </Form.Group></Col>\n                    <Col lg=\"6\"><Form.Group as={Col} controlId=\"video\">\n                    <Form.Label>Video</Form.Label>\n                    <Form.Control\n                     \n                      as=\"textarea\" rows=\"3\"\n                      onChange={e => setVideo(e.target.value)}\n                      defaultValue={props.presentation.video}\n                    />\n                    <Form.Control.Feedback type=\"invalid\">\n                        Please provide a video.\n                      </Form.Control.Feedback>\n                    <Form.Control.Feedback>Looks good!</Form.Control.Feedback>\n                  </Form.Group></Col>\n                  \n                  \n                </Form.Row>\n                <Form.Row>\n                  <Form.Group as={Col} controlId=\"content\">\n                    <CKEditor\n                        editor={ ClassicEditor }\n                        data={props.presentation.synopsis ? props.presentation.synopsis: field_synopsis}\n                        toolbar= {'heading', '|', 'bold', 'italic', 'link', 'bulletedList', 'numberedList', 'blockQuote' }\n                        onInit={ editor => {\n                            // You can store the \"editor\" and use when it is needed.\n                           // console.log( 'Editor is ready to use!', editor );\n                        } }\n                        onChange={ ( event, editor ) => {\n                            const data = editor.getData();\n                           // console.log( { event, editor, data } );\n                           setSynopsis(data ? data : props.presentation.synopsis)\n                        } }\n                        onBlur={ ( event, editor ) => {\n                          const data = editor.getData();\n                            console.log( 'Blur.', editor );\n                            setSynopsis(data ? data : props.presentation.synopsis)\n                        } }\n                        onFocus={ ( event, editor ) => {\n                            console.log( 'Focus.', editor );\n                        } }\n                    />\n                  </Form.Group>\n                  </Form.Row>\n                <Button type=\"submit\">{Object.keys(props.presentation).length > 0 ?\"Update Publication\" :\"Create Publication\"}</Button>\n              </Form> \n            </section>  }\n          </Col>\n        </Row> \n      </Container>\n    </>\n  );\n};\nfunction mapStateToProps(state) {\n    \n  return {\n    allPresentations:_.orderBy(state.AllPresentationsReducer,\"id\",\"asc\"),\n    categories:state.musicReducer.categories,\n    presentation:state.presentationReducer,\n    presentationImages:state.postImagesReducer,\n    allCds:state.cdsReducer\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    actions: bindActionCreators({mainAction}, dispatch)\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(NewPublication);\n"]},"metadata":{},"sourceType":"module"}