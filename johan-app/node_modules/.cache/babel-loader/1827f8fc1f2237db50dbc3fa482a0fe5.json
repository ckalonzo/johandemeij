{"ast":null,"code":"var _jsxFileName = \"/Users/carlkalonzo/Documents/DEV/johandemeij/johan-app/src/components/dashboard/PresentationMusic.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport { Form, Row, Col, Button, Table } from \"react-bootstrap\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { ACTIONS } from \"redux/actions/types\";\nimport { mainAction } from \"redux/actions/index.actions\";\nimport dayjs from \"dayjs\";\n\nconst PresentationMusicUpload = props => {\n  const [file, setFile] = useState(null);\n  const [selectedFile, setSelectedFile] = useState();\n  const [fileUrl, setFileUrl] = useState(null);\n  let d = new Date();\n  const [id, setId] = useState(dayjs(d).format('YYYYMMDDHHmmss'));\n  useEffect(() => {\n    props.actions.mainAction(ACTIONS.LOAD_PUBLICATION_MUSIC, props.ID); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const onFormSubmit = e => {\n    e.preventDefault(); // Stop form submit\n\n    fileUpload();\n  };\n\n  const onChange = e => {\n    setFile(e.target.files[0]);\n    setFileUrl(window.URL.createObjectURL(e.target.files[0]));\n    setSelectedFile(e.target.files[0].name);\n    console.log(e.target.files[0].name);\n  };\n\n  const fileUpload = () => {\n    let mp3File = {\n      id,\n      file,\n      fileurl: fileUrl,\n      pres_id: props.ID\n    };\n    props.actions.mainAction(ACTIONS.CREATE_PUBLICATION_MUSIC, mp3File); //props.history.push('/dashboard/publications/edit/'+props.ID)\n  };\n\n  const deleteMusic = (ID, NAME) => {\n    props.actions.mainAction(ACTIONS.DELETE_PUBLICATION_MUSIC, {\n      ID,\n      name: NAME\n    });\n  };\n\n  const renderMusicTracks = props => {\n    // console.log(props)\n    return Object.values(props ? props.music : []).map(track => {\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"tr\", {\n        key: track.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"figcaption\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 14\n        }\n      }, `Listen to ${track.musicName}`), /*#__PURE__*/React.createElement(\"audio\", {\n        controls: true,\n        src: `https://firebasestorage.googleapis.com/v0/b/johandemeij-513b2.appspot.com/o/music%2F${track.musicName}?alt=media`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 14\n        }\n      }, \"Your browser does not support the\", /*#__PURE__*/React.createElement(\"code\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 22\n        }\n      }, \"audio\"), \" element.\")), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 10\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        onClick: () => deleteMusic(track.id, track.musicName),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 14\n        }\n      }, \"Delete\"))));\n    });\n  };\n\n  const selecteImageToUpload = e => {\n    e.preventDefault();\n    document.querySelector('input#mp3-file').click();\n  };\n\n  console.log(props, props.music.length);\n  return /*#__PURE__*/React.createElement(\"section\", {\n    id: \"music\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: {\n      span: 3,\n      offset: props.music.length > 0 ? 3 : 0\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"outline-secondary\",\n    style: {\n      marginRight: \"10px\",\n      marginBottom: \"15px\"\n    },\n    onClick: e => selecteImageToUpload(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 25\n    }\n  }, \"choose a file\"), \" \", selectedFile, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    id: \"mp3-file\",\n    onChange: e => onChange(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    lg: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: e => fileUpload(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 25\n    }\n  }, \"Add music\")), Object.values(props.music).length > 0 ? /*#__PURE__*/React.createElement(Col, {\n    lg: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 58\n    }\n  }, /*#__PURE__*/React.createElement(Table, {\n    striped: true,\n    bordered: true,\n    hover: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 70\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    colSpan: \"2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }\n  }, \"music\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 3\n    }\n  }, renderMusicTracks(props)))) : \"\")), /*#__PURE__*/React.createElement(Row, {\n    style: {\n      marginTop: \"15px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }\n  }));\n};\n\nfunction mapStateToProps(state) {\n  return {\n    music: state.presentationMusicReducer\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    actions: bindActionCreators({\n      mainAction\n    }, dispatch)\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PresentationMusicUpload);","map":{"version":3,"sources":["/Users/carlkalonzo/Documents/DEV/johandemeij/johan-app/src/components/dashboard/PresentationMusic.jsx"],"names":["React","useState","useEffect","Form","Row","Col","Button","Table","connect","bindActionCreators","ACTIONS","mainAction","dayjs","PresentationMusicUpload","props","file","setFile","selectedFile","setSelectedFile","fileUrl","setFileUrl","d","Date","id","setId","format","actions","LOAD_PUBLICATION_MUSIC","ID","onFormSubmit","e","preventDefault","fileUpload","onChange","target","files","window","URL","createObjectURL","name","console","log","mp3File","fileurl","pres_id","CREATE_PUBLICATION_MUSIC","deleteMusic","NAME","DELETE_PUBLICATION_MUSIC","renderMusicTracks","Object","values","music","map","track","musicName","selecteImageToUpload","document","querySelector","click","length","span","offset","marginRight","marginBottom","marginTop","mapStateToProps","state","presentationMusicReducer","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from 'react'\nimport { Form,  Row, Col, Button, Table } from \"react-bootstrap\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { ACTIONS } from \"redux/actions/types\";\nimport { mainAction } from \"redux/actions/index.actions\"\nimport dayjs from \"dayjs\"\nconst PresentationMusicUpload = (props) => {\n    const [file,setFile] = useState(null)\n    const [selectedFile,setSelectedFile] = useState()\n    const [fileUrl,setFileUrl] = useState(null)\n    let d = new Date()\n    const [id, setId] = useState(dayjs(d).format('YYYYMMDDHHmmss'));\n    useEffect(() => {\n        props.actions.mainAction(ACTIONS.LOAD_PUBLICATION_MUSIC, props.ID)\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [])\n  \n    const onFormSubmit = (e) =>{\n        e.preventDefault() // Stop form submit\n\n        fileUpload()\n    }\n    const onChange = (e) => {\n        setFile(e.target.files[0])\n        setFileUrl(window.URL.createObjectURL(e.target.files[0]))\n        setSelectedFile(e.target.files[0].name)\n        console.log(e.target.files[0].name)\n    }\n    const fileUpload =()=>{\n        let mp3File = {\n            id,\n            file,\n            fileurl:fileUrl,\n            pres_id:props.ID\n        }\n        props.actions.mainAction(ACTIONS.CREATE_PUBLICATION_MUSIC,mp3File)\n        //props.history.push('/dashboard/publications/edit/'+props.ID)\n    }\n    const deleteMusic = (ID,NAME) => {\n        props.actions.mainAction(ACTIONS.DELETE_PUBLICATION_MUSIC,{ID,name:NAME})\n    }\n    const renderMusicTracks = (props) => {\n      // console.log(props)\n       return  Object.values(props ? props.music : [] ).map(track=>{\n            return (<><tr key={track.id}>\n                <td>\n             <figcaption>{`Listen to ${track.musicName}`}</figcaption>\n             <audio\n                 controls\n                 src={`https://firebasestorage.googleapis.com/v0/b/johandemeij-513b2.appspot.com/o/music%2F${track.musicName}?alt=media`}>\n                     Your browser does not support the\n                     <code>audio</code> element.\n             </audio>\n         </td>\n         <td><Button onClick={()=>deleteMusic(track.id,track.musicName)}>Delete</Button></td>\n         </tr>\n                </>)\n        })\n       \n    }\n    const selecteImageToUpload = (e) => {\n        e.preventDefault()\n        document.querySelector('input#mp3-file').click()\n    }\n    console.log(props,props.music.length)\n    return (\n        <section id=\"music\">\n            <Form >\n\n                <Row>\n                <Col lg={{span:3,offset: props.music.length > 0 ? 3:0}}>\n                        \n                        <Button  variant=\"outline-secondary\" style={{marginRight:\"10px\",marginBottom:\"15px\"}} onClick={(e)=>selecteImageToUpload(e)}>choose a file</Button> {selectedFile}\n                        <input type=\"file\" id=\"mp3-file\" onChange={(e)=>onChange(e)} />\n                    </Col>\n                    <Col lg={3}>\n                        <Button onClick={(e)=>fileUpload(e)}>Add music</Button>\n                    </Col>\n                    \n                {Object.values(props.music).length > 0 ? <Col lg={3}><Table striped bordered hover>\n  <thead>\n    <tr>\n      <th colSpan=\"2\">music</th>\n      \n    </tr>\n  </thead>\n  <tbody>\n      {renderMusicTracks(props)}\n  </tbody>\n</Table></Col> : \"\"}\n                \n                </Row>\n            </Form>\n            <Row style={{marginTop:\"15px\"}}>\n                \n            </Row>\n        </section>\n   )\n}\n\n\nfunction mapStateToProps(state) {\n    \n    return {\n      music:state.presentationMusicReducer\n    };\n  }\n  \nfunction mapDispatchToProps(dispatch) {\n    return {\n      actions: bindActionCreators({ mainAction }, dispatch)\n    };\n  }\n  \nexport default connect(mapStateToProps, mapDispatchToProps)(PresentationMusicUpload);\n"]},"metadata":{},"sourceType":"module"}