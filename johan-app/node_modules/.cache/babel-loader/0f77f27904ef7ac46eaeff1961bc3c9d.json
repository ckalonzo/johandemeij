{"ast":null,"code":"import _objectSpread from\"/Applications/MAMP/htdocs/websites/johan-de-meij/johan-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{ACTIONS}from'redux/actions/types.js';import{mainAction}from\"redux/actions/index.actions\";import _ from\"lodash\";import{createPresentation,updatePresentation,updatePresentationImage,uploadPresentationImage}from\"API/indexAPI\";var initialState={};export default function presentationReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case ACTIONS.CREATE_NEW_PUBLICATION:{createPresentation(action.payload).then(function(json){action.asyncDispatch(mainAction(ACTIONS.CREATE_NEW_PUBLICATION_SUCCESS,json));}).catch(function(err){console.log(action,err);action.asyncDispatch(mainAction(ACTIONS.CREATE_NEW_PUBLICATION_FAIL,err));});return action.payload;}case ACTIONS.CREATE_NEW_PUBLICATION_SUCCESS:{return action.payload;}case ACTIONS.CREATE_NEW_PUBLICATION_FAIL:{return state;}case ACTIONS.LOAD_PRESENTATION:{var stateCopy=_.cloneDeep(state);stateCopy.currentID=action.payload;fetch(' https://johandemeji.com/api/loadPresentationByID/'+action.payload).then(function(data){return data.json();}).then(function(res){action.asyncDispatch(mainAction(ACTIONS.LOAD_PRESENTATION_SUCCESS,res.data));}).catch(function(err){return action.asyncDispatch(mainAction(ACTIONS.LOAD_PRESENTATION_FAIL,err));});return state;}case ACTIONS.LOAD_PRESENTATION_SUCCESS:{return action.payload.length>0?action.payload[0]:[];}case ACTIONS.LOAD_PRESENTATION_FAIL:{return state;}case ACTIONS.UPDATE_PUBLICATION:{updatePresentation(action.payload).then(function(json){console.log(json);action.asyncDispatch(mainAction(ACTIONS.UPDATE_PUBLICATION_SUCCESS,json.data.data));}).catch(function(err){action.asyncDispatch(mainAction(ACTIONS.UPDATE_PUBLICATION_FAIL,err));});return state;}case ACTIONS.UPDATE_PUBLICATION_SUCCESS:{var _stateCopy=_.cloneDeep(state);action.asyncDispatch(mainAction(ACTIONS.LOAD_PRESENTATION,_stateCopy.ID));return _objectSpread({state:state},action.payload);}case ACTIONS.UPDATE_PUBLICATION_FAIL:{return state;}case ACTIONS.UPDATE_PRESENTATION_IMAGE:{var _stateCopy2=_.cloneDeep(action.payload);var image=_stateCopy2.image;updatePresentationImage(image).then(function(json){if(json.status!==404||json.status!==500){action.asyncDispatch(mainAction(ACTIONS.UPDATE_PRESENTATION_IMAGE_SUCCESS,{submitted:_stateCopy2,json:json}));}else{action.asyncDispatch(mainAction(ACTIONS.UPDATE_PRESENTATION_IMAGE_FAIL,json.response.message));}}).catch(function(err){return action.asyncDispatch(mainAction(ACTIONS.UPDATE_PRESENTATION_IMAGE_FAIL,err));});return state;}case ACTIONS.UPDATE_PRESENTATION_IMAGE_SUCCESS:{var _stateCopy3=_.cloneDeep(state);var newImage={_id:action.payload.submitted._id,albumID:action.payload.submitted.albumID,caption:action.payload.submitted.caption,cover:action.payload.submitted.cover,imageName:action.payload.json.data.filename,updatedAt:Date.now()};_stateCopy3.currentID=action.payload.submitted.albumID;action.asyncDispatch(mainAction(ACTIONS.UPDATE_POST_IMAGE,newImage));return _stateCopy3;}case ACTIONS.UPDATE_PRESENTATION_IMAGE_FAIL:{return state;}case ACTIONS.UPLOAD_PRESENTATION_IMAGE:{var _stateCopy4=_.cloneDeep(action.payload);var _image=_stateCopy4.image;console.log(action);uploadPresentationImage(_image).then(function(json){if(json.status!==404||json.status!==500){action.asyncDispatch(mainAction(ACTIONS.UPLOAD_PRESENTATION_IMAGE_SUCCESS,{submitted:_stateCopy4,json:json}));}else{action.asyncDispatch(mainAction(ACTIONS.UPLOAD_PRESENTATION_IMAGE_FAIL,json.response.message));}}).catch(function(err){return action.asyncDispatch(mainAction(ACTIONS.UPLOAD_PRESENTATION_IMAGE_FAIL,err));});return state;}case ACTIONS.UPLOAD_PRESENTATION_IMAGE_SUCCESS:{console.log(action);var _stateCopy5=_.cloneDeep(state);var _image2='';if(action.payload.submitted.cover===\"frontCover\"){_image2={_id:action.payload.submitted._id,frontCover:action.payload.json.data.filename,frontCaption:action.payload.submitted.caption};}else{_image2={_id:action.payload.submitted._id,backCover:action.payload.json.data.filename,backCaption:action.payload.submitted.caption};}action.asyncDispatch(mainAction(ACTIONS.UPDATE_PUBLICATION,_image2));return _stateCopy5;}case ACTIONS.UPLOAD_PRESENTATION_IMAGE_FAIL:{return state;}case ACTIONS.UPDATE_PRESENTATION_IMAGE:{console.log(action);var _image3='';if(action.submitted.cover===\"frontCover\"){_image3={frontCover:action.json.data.filename,frontCaption:action.submitted.caption};}else{_image3={backCover:action.json.data.filename,backCaption:action.submitted.caption};}action.asyncDispatch(mainAction(ACTIONS.UPDATE_PUBLICATION,_image3));return state;}default:return _objectSpread({},state);}}","map":{"version":3,"sources":["/Applications/MAMP/htdocs/websites/johan-de-meij/johan-app/src/redux/reducers/presentation.reducer.js"],"names":["ACTIONS","mainAction","_","createPresentation","updatePresentation","updatePresentationImage","uploadPresentationImage","initialState","presentationReducer","state","action","type","CREATE_NEW_PUBLICATION","payload","then","json","asyncDispatch","CREATE_NEW_PUBLICATION_SUCCESS","catch","err","console","log","CREATE_NEW_PUBLICATION_FAIL","LOAD_PRESENTATION","stateCopy","cloneDeep","currentID","fetch","data","res","LOAD_PRESENTATION_SUCCESS","LOAD_PRESENTATION_FAIL","length","UPDATE_PUBLICATION","UPDATE_PUBLICATION_SUCCESS","UPDATE_PUBLICATION_FAIL","ID","UPDATE_PRESENTATION_IMAGE","image","status","UPDATE_PRESENTATION_IMAGE_SUCCESS","submitted","UPDATE_PRESENTATION_IMAGE_FAIL","response","message","newImage","_id","albumID","caption","cover","imageName","filename","updatedAt","Date","now","UPDATE_POST_IMAGE","UPLOAD_PRESENTATION_IMAGE","UPLOAD_PRESENTATION_IMAGE_SUCCESS","UPLOAD_PRESENTATION_IMAGE_FAIL","frontCover","frontCaption","backCover","backCaption"],"mappings":"gLAAA,OAASA,OAAT,KAAwB,wBAAxB,CACA,OAASC,UAAT,KAA2B,6BAA3B,CACA,MAAQC,CAAAA,CAAR,KAAe,QAAf,CACA,OAAQC,kBAAR,CAA2BC,kBAA3B,CAA8CC,uBAA9C,CAAsEC,uBAAtE,KAAoG,cAApG,CACA,GAAMC,CAAAA,YAAY,CAAG,EAArB,CACA,cAAe,SAASC,CAAAA,mBAAT,EAA4D,IAA9BC,CAAAA,KAA8B,2DAAtBF,YAAsB,IAARG,CAAAA,MAAQ,2CACvE,OAAQA,MAAM,CAACC,IAAf,EAEI,IAAKX,CAAAA,OAAO,CAACY,sBAAb,CAAqC,CACrCT,kBAAkB,CAACO,MAAM,CAACG,OAAR,CAAlB,CAAmCC,IAAnC,CAAwC,SAAAC,IAAI,CAAG,CAC3CL,MAAM,CAACM,aAAP,CAAqBf,UAAU,CAACD,OAAO,CAACiB,8BAAT,CAAwCF,IAAxC,CAA/B,EACH,CAFD,EAEGG,KAFH,CAES,SAAAC,GAAG,CAAI,CACZC,OAAO,CAACC,GAAR,CAAYX,MAAZ,CAAmBS,GAAnB,EACAT,MAAM,CAACM,aAAP,CAAqBf,UAAU,CAACD,OAAO,CAACsB,2BAAT,CAAqCH,GAArC,CAA/B,EACH,CALD,EAMA,MAAOT,CAAAA,MAAM,CAACG,OAAd,CACC,CACD,IAAKb,CAAAA,OAAO,CAACiB,8BAAb,CAA6C,CAC7C,MAAOP,CAAAA,MAAM,CAACG,OAAd,CACC,CACD,IAAKb,CAAAA,OAAO,CAACsB,2BAAb,CAA0C,CAC1C,MAAOb,CAAAA,KAAP,CACC,CACD,IAAKT,CAAAA,OAAO,CAACuB,iBAAb,CAAgC,CAChC,GAAIC,CAAAA,SAAS,CAAGtB,CAAC,CAACuB,SAAF,CAAYhB,KAAZ,CAAhB,CACAe,SAAS,CAACE,SAAV,CAAsBhB,MAAM,CAACG,OAA7B,CACIc,KAAK,CAAE,qDAAsDjB,MAAM,CAACG,OAA/D,CAAL,CACCC,IADD,CACM,SAACc,IAAD,QAASA,CAAAA,IAAI,CAACb,IAAL,EAAT,EADN,EAECD,IAFD,CAEM,SAACe,GAAD,CAAS,CACfnB,MAAM,CAACM,aAAP,CAAqBf,UAAU,CAACD,OAAO,CAAC8B,yBAAT,CAAmCD,GAAG,CAACD,IAAvC,CAA/B,EAEC,CALD,EAKGV,KALH,CAKS,SAAAC,GAAG,QAAIT,CAAAA,MAAM,CAACM,aAAP,CAAqBf,UAAU,CAACD,OAAO,CAAC+B,sBAAT,CAAgCZ,GAAhC,CAA/B,CAAJ,EALZ,EAMA,MAAOV,CAAAA,KAAP,CACH,CACD,IAAMT,CAAAA,OAAO,CAAC8B,yBAAd,CAAwC,CAEpC,MAAOpB,CAAAA,MAAM,CAACG,OAAP,CAAemB,MAAf,CAAwB,CAAxB,CAA4BtB,MAAM,CAACG,OAAP,CAAe,CAAf,CAA5B,CAA8C,EAArD,CACH,CACD,IAAMb,CAAAA,OAAO,CAAC+B,sBAAd,CAAqC,CACjC,MAAOtB,CAAAA,KAAP,CACH,CACD,IAAKT,CAAAA,OAAO,CAACiC,kBAAb,CAAgC,CAChC7B,kBAAkB,CAACM,MAAM,CAACG,OAAR,CAAlB,CAAmCC,IAAnC,CAAwC,SAAAC,IAAI,CAAE,CAC1CK,OAAO,CAACC,GAAR,CAAYN,IAAZ,EACAL,MAAM,CAACM,aAAP,CAAqBf,UAAU,CAACD,OAAO,CAACkC,0BAAT,CAAoCnB,IAAI,CAACa,IAAL,CAAUA,IAA9C,CAA/B,EACH,CAHD,EAGGV,KAHH,CAGS,SAAAC,GAAG,CAAE,CACVT,MAAM,CAACM,aAAP,CAAqBf,UAAU,CAACD,OAAO,CAACmC,uBAAT,CAAiChB,GAAjC,CAA/B,EACH,CALD,EAMA,MAAOV,CAAAA,KAAP,CACC,CACD,IAAKT,CAAAA,OAAO,CAACkC,0BAAb,CAAwC,CACxC,GAAIV,CAAAA,UAAS,CAAGtB,CAAC,CAACuB,SAAF,CAAYhB,KAAZ,CAAhB,CACAC,MAAM,CAACM,aAAP,CAAqBf,UAAU,CAACD,OAAO,CAACuB,iBAAT,CAA2BC,UAAS,CAACY,EAArC,CAA/B,EACA,sBAAQ3B,KAAK,CAALA,KAAR,EAAiBC,MAAM,CAACG,OAAxB,EACC,CACD,IAAKb,CAAAA,OAAO,CAACmC,uBAAb,CAAqC,CACrC,MAAO1B,CAAAA,KAAP,CACC,CACD,IAAKT,CAAAA,OAAO,CAACqC,yBAAb,CAAuC,CACnC,GAAIb,CAAAA,WAAS,CAAGtB,CAAC,CAACuB,SAAF,CAAYf,MAAM,CAACG,OAAnB,CAAhB,CACC,GAAIyB,CAAAA,KAAK,CAAGd,WAAS,CAACc,KAAtB,CACAjC,uBAAuB,CAACiC,KAAD,CAAvB,CAA+BxB,IAA/B,CAAoC,SAACC,IAAD,CAAQ,CAE3C,GAAGA,IAAI,CAACwB,MAAL,GAAc,GAAd,EAAqBxB,IAAI,CAACwB,MAAL,GAAc,GAAtC,CAA2C,CACzC7B,MAAM,CAACM,aAAP,CAAqBf,UAAU,CAACD,OAAO,CAACwC,iCAAT,CAA2C,CAACC,SAAS,CAACjB,WAAX,CAAqBT,IAAI,CAAJA,IAArB,CAA3C,CAA/B,EACD,CAFD,IAEO,CACLL,MAAM,CAACM,aAAP,CAAqBf,UAAU,CAACD,OAAO,CAAC0C,8BAAT,CAAwC3B,IAAI,CAAC4B,QAAL,CAAcC,OAAtD,CAA/B,EACD,CACF,CAPA,EAOE1B,KAPF,CAOQ,SAAAC,GAAG,QAAIT,CAAAA,MAAM,CAACM,aAAP,CAAqBf,UAAU,CAACD,OAAO,CAAC0C,8BAAT,CAAwCvB,GAAxC,CAA/B,CAAJ,EAPX,EASD,MAAOV,CAAAA,KAAP,CACH,CACD,IAAKT,CAAAA,OAAO,CAACwC,iCAAb,CAA+C,CACzC,GAAIhB,CAAAA,WAAS,CAAGtB,CAAC,CAACuB,SAAF,CAAYhB,KAAZ,CAAhB,CAEA,GAAIoC,CAAAA,QAAQ,CAAG,CACbC,GAAG,CAACpC,MAAM,CAACG,OAAP,CAAe4B,SAAf,CAAyBK,GADhB,CAEbC,OAAO,CAACrC,MAAM,CAACG,OAAP,CAAe4B,SAAf,CAAyBM,OAFpB,CAGbC,OAAO,CAACtC,MAAM,CAACG,OAAP,CAAe4B,SAAf,CAAyBO,OAHpB,CAIbC,KAAK,CAACvC,MAAM,CAACG,OAAP,CAAe4B,SAAf,CAAyBQ,KAJlB,CAKbC,SAAS,CAACxC,MAAM,CAACG,OAAP,CAAeE,IAAf,CAAoBa,IAApB,CAAyBuB,QALtB,CAMbC,SAAS,CAACC,IAAI,CAACC,GAAL,EANG,CAAf,CAQA9B,WAAS,CAACE,SAAV,CAAsBhB,MAAM,CAACG,OAAP,CAAe4B,SAAf,CAAyBM,OAA/C,CACArC,MAAM,CAACM,aAAP,CAAqBf,UAAU,CAAED,OAAO,CAACuD,iBAAV,CAA4BV,QAA5B,CAA/B,EACF,MAAOrB,CAAAA,WAAP,CACH,CACD,IAAKxB,CAAAA,OAAO,CAAC0C,8BAAb,CAA4C,CACxC,MAAOjC,CAAAA,KAAP,CACH,CACD,IAAKT,CAAAA,OAAO,CAACwD,yBAAb,CAAuC,CACrC,GAAIhC,CAAAA,WAAS,CAAGtB,CAAC,CAACuB,SAAF,CAAYf,MAAM,CAACG,OAAnB,CAAhB,CACC,GAAIyB,CAAAA,MAAK,CAAGd,WAAS,CAACc,KAAtB,CACAlB,OAAO,CAACC,GAAR,CAAYX,MAAZ,EACAJ,uBAAuB,CAACgC,MAAD,CAAvB,CAA+BxB,IAA/B,CAAoC,SAACC,IAAD,CAAQ,CAE3C,GAAGA,IAAI,CAACwB,MAAL,GAAc,GAAd,EAAqBxB,IAAI,CAACwB,MAAL,GAAc,GAAtC,CAA2C,CACzC7B,MAAM,CAACM,aAAP,CAAqBf,UAAU,CAACD,OAAO,CAACyD,iCAAT,CAA2C,CAAChB,SAAS,CAACjB,WAAX,CAAqBT,IAAI,CAAJA,IAArB,CAA3C,CAA/B,EACD,CAFD,IAEO,CACLL,MAAM,CAACM,aAAP,CAAqBf,UAAU,CAACD,OAAO,CAAC0D,8BAAT,CAAwC3C,IAAI,CAAC4B,QAAL,CAAcC,OAAtD,CAA/B,EACD,CACF,CAPA,EAOE1B,KAPF,CAOQ,SAAAC,GAAG,QAAIT,CAAAA,MAAM,CAACM,aAAP,CAAqBf,UAAU,CAACD,OAAO,CAAC0D,8BAAT,CAAwCvC,GAAxC,CAA/B,CAAJ,EAPX,EASD,MAAOV,CAAAA,KAAP,CACD,CACD,IAAKT,CAAAA,OAAO,CAACyD,iCAAb,CAA+C,CAC7CrC,OAAO,CAACC,GAAR,CAAYX,MAAZ,EACE,GAAIc,CAAAA,WAAS,CAAGtB,CAAC,CAACuB,SAAF,CAAYhB,KAAZ,CAAhB,CAEA,GAAI6B,CAAAA,OAAK,CAAG,EAAZ,CACF,GAAG5B,MAAM,CAACG,OAAP,CAAe4B,SAAf,CAAyBQ,KAAzB,GAAmC,YAAtC,CAAoD,CAClDX,OAAK,CAAG,CACNQ,GAAG,CAACpC,MAAM,CAACG,OAAP,CAAe4B,SAAf,CAAyBK,GADvB,CAENa,UAAU,CAACjD,MAAM,CAACG,OAAP,CAAeE,IAAf,CAAoBa,IAApB,CAAyBuB,QAF9B,CAGNS,YAAY,CAAClD,MAAM,CAACG,OAAP,CAAe4B,SAAf,CAAyBO,OAHhC,CAAR,CAKD,CAND,IAMO,CACLV,OAAK,CAAG,CACNQ,GAAG,CAACpC,MAAM,CAACG,OAAP,CAAe4B,SAAf,CAAyBK,GADvB,CAENe,SAAS,CAACnD,MAAM,CAACG,OAAP,CAAeE,IAAf,CAAoBa,IAApB,CAAyBuB,QAF7B,CAGNW,WAAW,CAACpD,MAAM,CAACG,OAAP,CAAe4B,SAAf,CAAyBO,OAH/B,CAAR,CAKD,CACCtC,MAAM,CAACM,aAAP,CAAqBf,UAAU,CAAED,OAAO,CAACiC,kBAAV,CAA6BK,OAA7B,CAA/B,EACF,MAAOd,CAAAA,WAAP,CACD,CACD,IAAKxB,CAAAA,OAAO,CAAC0D,8BAAb,CAA4C,CAC1C,MAAOjD,CAAAA,KAAP,CACD,CACD,IAAKT,CAAAA,OAAO,CAACqC,yBAAb,CAAuC,CACrCjB,OAAO,CAACC,GAAR,CAAYX,MAAZ,EACA,GAAI4B,CAAAA,OAAK,CAAG,EAAZ,CACA,GAAG5B,MAAM,CAAC+B,SAAP,CAAiBQ,KAAjB,GAA2B,YAA9B,CAA4C,CAC1CX,OAAK,CAAG,CACNqB,UAAU,CAACjD,MAAM,CAACK,IAAP,CAAYa,IAAZ,CAAiBuB,QADtB,CAENS,YAAY,CAAClD,MAAM,CAAC+B,SAAP,CAAiBO,OAFxB,CAAR,CAID,CALD,IAKO,CACLV,OAAK,CAAG,CACNuB,SAAS,CAACnD,MAAM,CAACK,IAAP,CAAYa,IAAZ,CAAiBuB,QADrB,CAENW,WAAW,CAACpD,MAAM,CAAC+B,SAAP,CAAiBO,OAFvB,CAAR,CAID,CACDtC,MAAM,CAACM,aAAP,CAAqBf,UAAU,CAAED,OAAO,CAACiC,kBAAV,CAA6BK,OAA7B,CAA/B,EACA,MAAO7B,CAAAA,KAAP,CACD,CACH,QACE,wBACKA,KADL,EA7IJ,CAiJD","sourcesContent":["import { ACTIONS } from 'redux/actions/types.js'\nimport { mainAction } from \"redux/actions/index.actions\"\nimport  _ from \"lodash\"\nimport {createPresentation,updatePresentation,updatePresentationImage,uploadPresentationImage} from \"API/indexAPI\"\nconst initialState = {};\nexport default function presentationReducer (state = initialState, action) {\n    switch (action.type) {\n  \n        case ACTIONS.CREATE_NEW_PUBLICATION: {\n        createPresentation(action.payload).then(json =>{\n            action.asyncDispatch(mainAction(ACTIONS.CREATE_NEW_PUBLICATION_SUCCESS,json))\n        }).catch(err => {\n            console.log(action,err)\n            action.asyncDispatch(mainAction(ACTIONS.CREATE_NEW_PUBLICATION_FAIL,err))\n        })\n        return action.payload\n        }\n        case ACTIONS.CREATE_NEW_PUBLICATION_SUCCESS: {\n        return action.payload\n        }\n        case ACTIONS.CREATE_NEW_PUBLICATION_FAIL: {\n        return state\n        }\n        case ACTIONS.LOAD_PRESENTATION: {\n        let stateCopy = _.cloneDeep(state)\n        stateCopy.currentID = action.payload\n            fetch (' https://johandemeji.com/api/loadPresentationByID/'+ action.payload)\n            .then((data)=> data.json())\n            .then((res) => {\n            action.asyncDispatch(mainAction(ACTIONS.LOAD_PRESENTATION_SUCCESS,res.data))\n            \n            }).catch(err => action.asyncDispatch(mainAction(ACTIONS.LOAD_PRESENTATION_FAIL,err)))\n            return state\n        }\n        case  ACTIONS.LOAD_PRESENTATION_SUCCESS:{\n            \n            return action.payload.length > 0 ? action.payload[0]:[]\n        }\n        case  ACTIONS.LOAD_PRESENTATION_FAIL:{\n            return state\n        }\n        case ACTIONS.UPDATE_PUBLICATION:{\n        updatePresentation(action.payload).then(json=>{\n            console.log(json)\n            action.asyncDispatch(mainAction(ACTIONS.UPDATE_PUBLICATION_SUCCESS,json.data.data))\n        }).catch(err=>{\n            action.asyncDispatch(mainAction(ACTIONS.UPDATE_PUBLICATION_FAIL,err))\n        })\n        return state\n        }\n        case ACTIONS.UPDATE_PUBLICATION_SUCCESS:{\n        let stateCopy = _.cloneDeep(state)\n        action.asyncDispatch(mainAction(ACTIONS.LOAD_PRESENTATION,stateCopy.ID))\n        return {state,...action.payload}\n        }\n        case ACTIONS.UPDATE_PUBLICATION_FAIL:{\n        return state\n        }\n        case ACTIONS.UPDATE_PRESENTATION_IMAGE:{\n            let stateCopy = _.cloneDeep(action.payload)\n             let image = stateCopy.image\n             updatePresentationImage(image).then((json)=>{\n    \n              if(json.status!==404 || json.status!==500) {\n                action.asyncDispatch(mainAction(ACTIONS.UPDATE_PRESENTATION_IMAGE_SUCCESS,{submitted:stateCopy,json}))\n              } else {\n                action.asyncDispatch(mainAction(ACTIONS.UPDATE_PRESENTATION_IMAGE_FAIL,json.response.message))\n              }\n            }).catch(err => action.asyncDispatch(mainAction(ACTIONS.UPDATE_PRESENTATION_IMAGE_FAIL,err)))\n          \n            return state\n        }\n        case ACTIONS.UPDATE_PRESENTATION_IMAGE_SUCCESS:{\n              let stateCopy = _.cloneDeep(state)\n              \n              let newImage = {\n                _id:action.payload.submitted._id,\n                albumID:action.payload.submitted.albumID,\n                caption:action.payload.submitted.caption,\n                cover:action.payload.submitted.cover,\n                imageName:action.payload.json.data.filename,\n                updatedAt:Date.now()\n              }\n              stateCopy.currentID = action.payload.submitted.albumID\n              action.asyncDispatch(mainAction( ACTIONS.UPDATE_POST_IMAGE,newImage))\n            return stateCopy\n        }\n        case ACTIONS.UPDATE_PRESENTATION_IMAGE_FAIL:{\n            return state\n        }\n        case ACTIONS.UPLOAD_PRESENTATION_IMAGE:{\n          let stateCopy = _.cloneDeep(action.payload)\n           let image = stateCopy.image\n           console.log(action)\n           uploadPresentationImage(image).then((json)=>{\n  \n            if(json.status!==404 || json.status!==500) {\n              action.asyncDispatch(mainAction(ACTIONS.UPLOAD_PRESENTATION_IMAGE_SUCCESS,{submitted:stateCopy,json}))\n            } else {\n              action.asyncDispatch(mainAction(ACTIONS.UPLOAD_PRESENTATION_IMAGE_FAIL,json.response.message))\n            }\n          }).catch(err => action.asyncDispatch(mainAction(ACTIONS.UPLOAD_PRESENTATION_IMAGE_FAIL,err)))\n        \n          return state\n        }\n        case ACTIONS.UPLOAD_PRESENTATION_IMAGE_SUCCESS:{\n          console.log(action)\n            let stateCopy = _.cloneDeep(state)\n            \n            let image = ''\n          if(action.payload.submitted.cover === \"frontCover\") {\n            image = {\n              _id:action.payload.submitted._id,\n              frontCover:action.payload.json.data.filename,\n              frontCaption:action.payload.submitted.caption \n            }\n          } else {\n            image = {\n              _id:action.payload.submitted._id,\n              backCover:action.payload.json.data.filename,\n              backCaption:action.payload.submitted.caption \n            }\n          }\n            action.asyncDispatch(mainAction( ACTIONS.UPDATE_PUBLICATION,image))\n          return stateCopy\n        }\n        case ACTIONS.UPLOAD_PRESENTATION_IMAGE_FAIL:{\n          return state\n        }\n        case ACTIONS.UPDATE_PRESENTATION_IMAGE:{\n          console.log(action)\n          let image = ''\n          if(action.submitted.cover === \"frontCover\") {\n            image = {\n              frontCover:action.json.data.filename,\n              frontCaption:action.submitted.caption \n            }\n          } else {\n            image = {\n              backCover:action.json.data.filename,\n              backCaption:action.submitted.caption \n            }\n          }\n          action.asyncDispatch(mainAction( ACTIONS.UPDATE_PUBLICATION,image))\n          return state\n        }\n      default: \n        return {\n          ...state\n        }\n    }\n  }"]},"metadata":{},"sourceType":"module"}