{"ast":null,"code":"var _jsxFileName = \"/Applications/MAMP/htdocs/websites/johandemeij-master/johan-app/src/components/dashboard/PostImage.jsx\";\nimport React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { mainAction } from \"redux/actions/index.actions\";\nimport { Form, Container, Row, Col, Button } from \"react-bootstrap\";\nimport { ACTIONS } from \"redux/actions/types\";\n\nconst ProfileImage = props => {\n  const [selectedFile, setSelectedFile] = useState();\n  const [uploadStatus, setUploadStatus] = useState(false);\n  const [caption, setCaption] = useState(props.postImage.caption);\n  const [disabled, setDisabled] = useState(false);\n  const [validated, setValidated] = useState(false);\n  const [file, setFile] = useState();\n  const {\n    ID,\n    images\n  } = props;\n  useEffect(() => {\n    // Update the document title using the browser API\n    document.title = `Johan De Meij | Edit Post`; //if(props.postImages)`\n    //let image = Object.values(props.postImages).filter(postImage => postImage.albumID === ID)\n\n    props.actions.mainAction(ACTIONS.LOAD_POST_IMAGE, {\n      images,\n      ID\n    });\n\n    if (ID) {\n      setDisabled(true);\n    }\n\n    setSelectedFile(props.postImage.imageName);\n    console.log(props); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const handleImageSubmit = e => {};\n\n  const uploadImage = () => {\n    props.actions.mainAction(ACTIONS.UPLOAD_IMAGE, file);\n    setUploadStatus(true);\n  };\n\n  const onChangeHandler = e => {\n    setSelectedFile(window.URL.createObjectURL(e.target.files[0]));\n    setFile(e.target.files[0]);\n  };\n\n  const renderUploadButtons = () => {\n    if (selectedFile && !uploadStatus) return /*#__PURE__*/React.createElement(Button, {\n      variant: \"dark\",\n      onClick: () => uploadImage(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 16\n      }\n    }, \"upload\");\n    return /*#__PURE__*/React.createElement(Button, {\n      variant: \"primary\",\n      onClick: e => selecteImageToUpload(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 16\n      }\n    }, \"change image\");\n  };\n\n  const selecteImageToUpload = e => {\n    document.querySelector('input#post-image').click();\n  };\n\n  return /*#__PURE__*/React.createElement(\"section\", {\n    id: \"images\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    noValidate: true,\n    validated: validated,\n    onSubmit: handleImageSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: {\n      span: 4\n    },\n    className: \"post-image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: selectedFile ? \"/images/posts/\" + selectedFile : \"/images/missing.png\",\n    onClick: e => selecteImageToUpload(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    lg: {\n      span: 4\n    },\n    className: \"caption\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 14\n    }\n  }, /*#__PURE__*/React.createElement(Form.Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 14\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    as: Col,\n    controlId: \"caption\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 21\n    }\n  }, \"Caption\"), /*#__PURE__*/React.createElement(Form.Control, {\n    required: true,\n    type: \"text\",\n    placeholder: \"\",\n    defaultValue: caption,\n    onChange: e => setCaption(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(Form.Control.Feedback, {\n    type: \"invalid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 21\n    }\n  }, \"Please provide a caption.\"), /*#__PURE__*/React.createElement(Form.Control.Feedback, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 21\n    }\n  }, \"Looks good!\")))), /*#__PURE__*/React.createElement(Col, {\n    lg: {\n      span: 4\n    },\n    className: \"action-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 16\n    }\n  }, disabled ? renderUploadButtons() : /*#__PURE__*/React.createElement(Button, {\n    variant: \"primary\",\n    disabled: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 96\n    }\n  }, \"change image\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    id: \"post-image\",\n    onChange: e => onChangeHandler(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 153\n    }\n  })))));\n};\n\nfunction mapStateToProps(state) {\n  return {\n    postImage: state.postImageReducer\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    actions: bindActionCreators({\n      mainAction\n    }, dispatch)\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ProfileImage);","map":{"version":3,"sources":["/Applications/MAMP/htdocs/websites/johandemeij-master/johan-app/src/components/dashboard/PostImage.jsx"],"names":["React","useEffect","useState","connect","bindActionCreators","mainAction","Form","Container","Row","Col","Button","ACTIONS","ProfileImage","props","selectedFile","setSelectedFile","uploadStatus","setUploadStatus","caption","setCaption","postImage","disabled","setDisabled","validated","setValidated","file","setFile","ID","images","document","title","actions","LOAD_POST_IMAGE","imageName","console","log","handleImageSubmit","e","uploadImage","UPLOAD_IMAGE","onChangeHandler","window","URL","createObjectURL","target","files","renderUploadButtons","selecteImageToUpload","querySelector","click","span","value","mapStateToProps","state","postImageReducer","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { mainAction } from \"redux/actions/index.actions\"\nimport { Form, Container, Row, Col, Button} from \"react-bootstrap\";\nimport { ACTIONS } from \"redux/actions/types\";\n\nconst ProfileImage = (props) => {\n    const [selectedFile,setSelectedFile] = useState()\n    const [uploadStatus,setUploadStatus] = useState(false)\n    const [caption,setCaption] = useState(props.postImage.caption)\n    const [disabled,setDisabled] = useState(false)\n    const [validated, setValidated] = useState(false);\n    const [file,setFile] = useState()\n    const {ID,images} = props\n    useEffect(() => {\n        // Update the document title using the browser API\n        document.title = `Johan De Meij | Edit Post`;\n        \n        //if(props.postImages)`\n        //let image = Object.values(props.postImages).filter(postImage => postImage.albumID === ID)\n        props.actions.mainAction(ACTIONS.LOAD_POST_IMAGE,{images,ID})\n        if(ID){\n            setDisabled(true)\n            \n         }\n        setSelectedFile(props.postImage.imageName)\n            console.log(props)\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n      }, []);\n    const handleImageSubmit = (e) => {\n\n    }\n    const uploadImage = () => {\n        props.actions.mainAction(ACTIONS.UPLOAD_IMAGE,file)\n        setUploadStatus(true)\n      }\n      const onChangeHandler = (e) => {\n        setSelectedFile(window.URL.createObjectURL(e.target.files[0]))\n        setFile(e.target.files[0])\n      } \n    \n      const renderUploadButtons = () => {\n        if(selectedFile && !uploadStatus)\n        return <Button variant=\"dark\" onClick={()=>uploadImage()}>upload</Button>\n        return <Button variant=\"primary\" onClick={(e)=>selecteImageToUpload(e)} >change image</Button>\n      }\n      const selecteImageToUpload = (e) => {\n        document.querySelector('input#post-image').click()\n      }\n    return(\n        <section id=\"images\">\n          <Form noValidate validated={validated} onSubmit={handleImageSubmit}>\n            <Row>\n            <Col lg={{span:4}} className=\"post-image\">\n              <img src={selectedFile ? \"/images/posts/\"+selectedFile :\"/images/missing.png\"}  onClick={(e)=>selecteImageToUpload(e)} />\n            </Col>\n             <Col lg={{span:4}} className=\"caption\">\n             <Form.Row>\n                  <Form.Group as={Col}  controlId=\"caption\">\n                    <Form.Label>Caption</Form.Label>\n                    <Form.Control\n                      required\n                      type=\"text\"\n                      placeholder=\"\"\n                      defaultValue={caption}\n                      onChange={e => setCaption(e.target.value)}\n                      \n                    />\n                    <Form.Control.Feedback type=\"invalid\">\n                        Please provide a caption.\n                      </Form.Control.Feedback>\n                    <Form.Control.Feedback>Looks good!</Form.Control.Feedback>\n                  </Form.Group>\n                  </Form.Row>\n               </Col>\n               <Col lg={{span:4}}  className=\"action-button\">{disabled ? renderUploadButtons():<Button variant=\"primary\" disabled>change image</Button>}<input type=\"file\" id=\"post-image\" onChange={(e)=>onChangeHandler(e)}/></Col>\n               </Row>\n            </Form>\n          </section>\n    )\n}\nfunction mapStateToProps(state) {\n    return {\n      postImage:state.postImageReducer\n    };\n  }\n  \n  function mapDispatchToProps(dispatch) {\n    return {\n      actions: bindActionCreators({mainAction}, dispatch)\n    };\n  }\n  \n  export default connect(mapStateToProps, mapDispatchToProps)(ProfileImage);"]},"metadata":{},"sourceType":"module"}