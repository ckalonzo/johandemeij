{"ast":null,"code":"\"use strict\";\n/*!\n * Copyright 2018 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst crypto_1 = require(\"crypto\");\n\nconst google_gax_1 = require(\"google-gax\");\n/**\n * A Promise implementation that supports deferred resolution.\n * @private\n */\n\n\nclass Deferred {\n  constructor() {\n    this.resolve = () => {};\n\n    this.reject = () => {};\n\n    this.promise = new Promise((resolve, reject) => {\n      this.resolve = resolve;\n      this.reject = reject;\n    });\n  }\n\n}\n\nexports.Deferred = Deferred;\n/**\n * Generate a unique client-side identifier.\n *\n * Used for the creation of new documents.\n *\n * @private\n * @returns {string} A unique 20-character wide identifier.\n */\n\nfunction autoId() {\n  const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n  let autoId = '';\n\n  while (autoId.length < 20) {\n    const bytes = crypto_1.randomBytes(40);\n    bytes.forEach(b => {\n      // Length of `chars` is 62. We only take bytes between 0 and 62*4-1\n      // (both inclusive). The value is then evenly mapped to indices of `char`\n      // via a modulo operation.\n      const maxValue = 62 * 4 - 1;\n\n      if (autoId.length < 20 && b <= maxValue) {\n        autoId += chars.charAt(b % 62);\n      }\n    });\n  }\n\n  return autoId;\n}\n\nexports.autoId = autoId;\n/**\n * Generate a short and semi-random client-side identifier.\n *\n * Used for the creation of request tags.\n *\n * @private\n * @returns {string} A random 5-character wide identifier.\n */\n\nfunction requestTag() {\n  return autoId().substr(0, 5);\n}\n\nexports.requestTag = requestTag;\n/**\n * Determines whether `value` is a JavaScript object.\n *\n * @private\n */\n\nfunction isObject(value) {\n  return Object.prototype.toString.call(value) === '[object Object]';\n}\n\nexports.isObject = isObject;\n/**\n * Verifies that 'obj' is a plain JavaScript object that can be encoded as a\n * 'Map' in Firestore.\n *\n * @private\n * @param input The argument to verify.\n * @returns 'true' if the input can be a treated as a plain object.\n */\n\nfunction isPlainObject(input) {\n  return isObject(input) && (Object.getPrototypeOf(input) === Object.prototype || Object.getPrototypeOf(input) === null || input.constructor.name === 'Object');\n}\n\nexports.isPlainObject = isPlainObject;\n/**\n * Returns whether `value` has no custom properties.\n *\n * @private\n */\n\nfunction isEmpty(value) {\n  return Object.keys(value).length === 0;\n}\n\nexports.isEmpty = isEmpty;\n/**\n * Determines whether `value` is a JavaScript function.\n *\n * @private\n */\n\nfunction isFunction(value) {\n  return typeof value === 'function';\n}\n\nexports.isFunction = isFunction;\n/**\n * Determines whether the provided error is considered permanent for the given\n * RPC.\n *\n * @private\n */\n\nfunction isPermanentRpcError(err, methodName, config) {\n  if (err.code !== undefined) {\n    const serviceConfigName = methodName[0].toUpperCase() + methodName.slice(1);\n    const retryCodeNames = config.methods[serviceConfigName].retry_codes_name;\n    const retryCodes = config.retry_codes[retryCodeNames].map(errorName => google_gax_1.Status[errorName]);\n    return retryCodes.indexOf(err.code) === -1;\n  } else {\n    return false;\n  }\n}\n\nexports.isPermanentRpcError = isPermanentRpcError;","map":{"version":3,"sources":["/Applications/MAMP/htdocs/websites/johan-de-meij/johan-app/node_modules/@google-cloud/firestore/build/src/util.js"],"names":["Object","defineProperty","exports","value","crypto_1","require","google_gax_1","Deferred","constructor","resolve","reject","promise","Promise","autoId","chars","length","bytes","randomBytes","forEach","b","maxValue","charAt","requestTag","substr","isObject","prototype","toString","call","isPlainObject","input","getPrototypeOf","name","isEmpty","keys","isFunction","isPermanentRpcError","err","methodName","config","code","undefined","serviceConfigName","toUpperCase","slice","retryCodeNames","methods","retry_codes_name","retryCodes","retry_codes","map","errorName","Status","indexOf"],"mappings":"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","sourcesContent":["\"use strict\";\n/*!\n * Copyright 2018 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst crypto_1 = require(\"crypto\");\nconst google_gax_1 = require(\"google-gax\");\n/**\n * A Promise implementation that supports deferred resolution.\n * @private\n */\nclass Deferred {\n    constructor() {\n        this.resolve = () => { };\n        this.reject = () => { };\n        this.promise = new Promise((resolve, reject) => {\n            this.resolve = resolve;\n            this.reject = reject;\n        });\n    }\n}\nexports.Deferred = Deferred;\n/**\n * Generate a unique client-side identifier.\n *\n * Used for the creation of new documents.\n *\n * @private\n * @returns {string} A unique 20-character wide identifier.\n */\nfunction autoId() {\n    const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n    let autoId = '';\n    while (autoId.length < 20) {\n        const bytes = crypto_1.randomBytes(40);\n        bytes.forEach(b => {\n            // Length of `chars` is 62. We only take bytes between 0 and 62*4-1\n            // (both inclusive). The value is then evenly mapped to indices of `char`\n            // via a modulo operation.\n            const maxValue = 62 * 4 - 1;\n            if (autoId.length < 20 && b <= maxValue) {\n                autoId += chars.charAt(b % 62);\n            }\n        });\n    }\n    return autoId;\n}\nexports.autoId = autoId;\n/**\n * Generate a short and semi-random client-side identifier.\n *\n * Used for the creation of request tags.\n *\n * @private\n * @returns {string} A random 5-character wide identifier.\n */\nfunction requestTag() {\n    return autoId().substr(0, 5);\n}\nexports.requestTag = requestTag;\n/**\n * Determines whether `value` is a JavaScript object.\n *\n * @private\n */\nfunction isObject(value) {\n    return Object.prototype.toString.call(value) === '[object Object]';\n}\nexports.isObject = isObject;\n/**\n * Verifies that 'obj' is a plain JavaScript object that can be encoded as a\n * 'Map' in Firestore.\n *\n * @private\n * @param input The argument to verify.\n * @returns 'true' if the input can be a treated as a plain object.\n */\nfunction isPlainObject(input) {\n    return (isObject(input) &&\n        (Object.getPrototypeOf(input) === Object.prototype ||\n            Object.getPrototypeOf(input) === null ||\n            input.constructor.name === 'Object'));\n}\nexports.isPlainObject = isPlainObject;\n/**\n * Returns whether `value` has no custom properties.\n *\n * @private\n */\nfunction isEmpty(value) {\n    return Object.keys(value).length === 0;\n}\nexports.isEmpty = isEmpty;\n/**\n * Determines whether `value` is a JavaScript function.\n *\n * @private\n */\nfunction isFunction(value) {\n    return typeof value === 'function';\n}\nexports.isFunction = isFunction;\n/**\n * Determines whether the provided error is considered permanent for the given\n * RPC.\n *\n * @private\n */\nfunction isPermanentRpcError(err, methodName, config) {\n    if (err.code !== undefined) {\n        const serviceConfigName = methodName[0].toUpperCase() + methodName.slice(1);\n        const retryCodeNames = config.methods[serviceConfigName].retry_codes_name;\n        const retryCodes = config.retry_codes[retryCodeNames].map(errorName => google_gax_1.Status[errorName]);\n        return retryCodes.indexOf(err.code) === -1;\n    }\n    else {\n        return false;\n    }\n}\nexports.isPermanentRpcError = isPermanentRpcError;\n//# sourceMappingURL=util.js.map"]},"metadata":{},"sourceType":"script"}