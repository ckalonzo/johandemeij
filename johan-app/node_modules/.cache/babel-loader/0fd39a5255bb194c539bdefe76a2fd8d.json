{"ast":null,"code":"import _objectSpread from\"/Users/carlkalonzo/Documents/DEV/johandemeij/johan-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{ACTIONS}from'redux/actions/types.js';import{mainAction}from\"redux/actions/index.actions\";import{db,storage}from\"../../firebase\";var initialState={gallery:{},galleries:[],photos:[]};export default function galleryReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case ACTIONS.LOAD_GALLERY:{db.collection(\"photoGalleryImages\")// .where(\"galleryId\", \"==\", action.payload)\n.get().then(function(querySnapshot){var data=querySnapshot.docs.map(function(doc){return doc.data();});action.asyncDispatch(mainAction(ACTIONS.LOAD_GALLERY_SUCCESS,data));});return state;}case ACTIONS.LOAD_GALLERY_SUCCESS:{state.gallery=action.payload;return state;}case ACTIONS.LOAD_GALLERY_FAIL:{return state;}case ACTIONS.LOAD_GALLERIES:{db.collection(\"photoGallery\").get().then(function(querySnapshot){var data=querySnapshot.docs.map(function(doc){return doc.data();});console.log(data);action.asyncDispatch(mainAction(ACTIONS.LOAD_GALLERIES_SUCCESS,data));});return state;}case ACTIONS.LOAD_GALLERIES_SUCCESS:{state.gallery=_objectSpread({},action.payload[0]);return state;}case ACTIONS.LOAD_GALLERIES_FAIL:{return state;}case ACTIONS.DELETE_GALLERY:{return state;}case ACTIONS.DELETE_GALLERY_SUCCESS:{return state;}case ACTIONS.DELETE_GALLERY_FAIL:{return state;}case ACTIONS.UPDATE_GALLERY:{return state;}case ACTIONS.UPDATE_GALLERY_SUCCESS:{return state;}case ACTIONS.UPDATE_GALLERY_FAIL:{return state;}case ACTIONS.INSERT_GALLERY_IMAGE:{var postImageRef=storage.ref('gallery/'+action.payload.name).put(action.payload.file);postImageRef.on('state_changed',function(snapshot){//progress function\n},function(error){//error\nconsole.log(error);},function(){//complete\nstorage.ref('gallery/').child(action.payload.name).getDownloadURL().then(function(url){console.log(url);action.asyncDispatch(mainAction(ACTIONS.INSERT_GALLERY_IMAGE_SUCCESS,action.payload));});});return state;}case ACTIONS.INSERT_GALLERY_IMAGE_SUCCESS:{var image={id:action.payload.id,date:action.payload.date,caption:action.payload.caption,// file: action.payload.path,\nname:action.payload.name};db.collection(\"photoGalleryImages\").doc().set(image).then(function(){action.asyncDispatch(mainAction(ACTIONS.LOAD_GALLERY,[]));});return state;}case ACTIONS.INSERT_GALLERY_IMAGE_FAIL:{return state;}case ACTIONS.DELETE_GALLERY_IMAGE:{var _postImageRef=storage.ref('gallery/'+action.payload.name);_postImageRef.delete().then(function(){return console.log(\"file deleted\");});action.asyncDispatch(mainAction(ACTIONS.DELETE_GALLERY_IMAGE_SUCCESS,action.payload));return state;}case ACTIONS.DELETE_GALLERY_IMAGE_SUCCESS:{db.collection(\"photoGalleryImages\").where(\"id\",\"==\",action.payload.ID).get().then(function(querySnapshot){querySnapshot.forEach(function(doc){return doc.ref.delete();});action.asyncDispatch(mainAction(ACTIONS.LOAD_GALLERY,[]));});return state;}case ACTIONS.DELETE_GALLERY_IMAGE_FAIL:{return state;}case ACTIONS.UPDATE_GALLERY_IMAGE:{return state;}case ACTIONS.UPDATE_GALLERY_IMAGE_SUCCESS:{return state;}case ACTIONS.UPDATE_GALLERY_IMAGE_FAIL:{return state;}default:return state;}}","map":{"version":3,"sources":["/Users/carlkalonzo/Documents/DEV/johandemeij/johan-app/src/redux/reducers/gallery.reducer.js"],"names":["ACTIONS","mainAction","db","storage","initialState","gallery","galleries","photos","galleryReducer","state","action","type","LOAD_GALLERY","collection","get","then","querySnapshot","data","docs","map","doc","asyncDispatch","LOAD_GALLERY_SUCCESS","payload","LOAD_GALLERY_FAIL","LOAD_GALLERIES","console","log","LOAD_GALLERIES_SUCCESS","LOAD_GALLERIES_FAIL","DELETE_GALLERY","DELETE_GALLERY_SUCCESS","DELETE_GALLERY_FAIL","UPDATE_GALLERY","UPDATE_GALLERY_SUCCESS","UPDATE_GALLERY_FAIL","INSERT_GALLERY_IMAGE","postImageRef","ref","name","put","file","on","snapshot","error","child","getDownloadURL","url","INSERT_GALLERY_IMAGE_SUCCESS","image","id","date","caption","set","INSERT_GALLERY_IMAGE_FAIL","DELETE_GALLERY_IMAGE","delete","DELETE_GALLERY_IMAGE_SUCCESS","where","ID","forEach","DELETE_GALLERY_IMAGE_FAIL","UPDATE_GALLERY_IMAGE","UPDATE_GALLERY_IMAGE_SUCCESS","UPDATE_GALLERY_IMAGE_FAIL"],"mappings":"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","sourcesContent":["import {\n    ACTIONS\n} from 'redux/actions/types.js'\nimport {\n    mainAction\n} from \"redux/actions/index.actions\"\nimport {\n    db,\n    storage\n} from \"../../firebase\";\nconst initialState = {\n    gallery: {},\n    galleries:[],\n    photos: []\n};\nexport default function galleryReducer(state = initialState, action) {\n    switch (action.type) {\n        case ACTIONS.LOAD_GALLERY: {\n            db.collection(\"photoGalleryImages\")\n               // .where(\"galleryId\", \"==\", action.payload)\n                .get()\n                .then(querySnapshot => {\n                    const data = querySnapshot.docs.map(doc => doc.data());\n                    action.asyncDispatch(mainAction(ACTIONS.LOAD_GALLERY_SUCCESS, data))\n                });\n            return state\n        }\n        case ACTIONS.LOAD_GALLERY_SUCCESS: {\n            state.gallery = action.payload\n            return state\n        }\n\n        case ACTIONS.LOAD_GALLERY_FAIL: {\n\n            return state\n        }\n        case ACTIONS.LOAD_GALLERIES: {\n            db.collection(\"photoGallery\")\n                .get()\n                .then(querySnapshot => {\n                    const data = querySnapshot.docs.map(doc => doc.data());\n                    console.log(data)\n                    action.asyncDispatch(mainAction(ACTIONS.LOAD_GALLERIES_SUCCESS, data))\n                });\n            return state\n        }\n        case ACTIONS.LOAD_GALLERIES_SUCCESS: {\n            state.gallery = {...action.payload[0]}\n            return state\n        }\n\n        case ACTIONS.LOAD_GALLERIES_FAIL: {\n\n            return state\n        }\n\n        case ACTIONS.DELETE_GALLERY: {\n\n            return state\n        }\n\n        case ACTIONS.DELETE_GALLERY_SUCCESS: {\n\n            return state\n        }\n\n        case ACTIONS.DELETE_GALLERY_FAIL: {\n\n            return state\n        }\n\n\n        case ACTIONS.UPDATE_GALLERY: {\n\n            return state\n        }\n\n        case ACTIONS.UPDATE_GALLERY_SUCCESS: {\n\n            return state\n        }\n\n        case ACTIONS.UPDATE_GALLERY_FAIL: {\n\n            return state\n        }\n\n\n        case ACTIONS.INSERT_GALLERY_IMAGE: {\n\n            \n              let postImageRef = storage.ref('gallery/'+action.payload.name).put(action.payload.file);\n              postImageRef.on('state_changed',(snapshot)=>{\n                //progress function\n              },(error)=>{\n                //error\n                console.log(error)\n              },()=>{\n                //complete\n                storage.ref('gallery/').child(action.payload.name).getDownloadURL().then(url=>{\n                  console.log(url)\n                  action.asyncDispatch(mainAction(ACTIONS.INSERT_GALLERY_IMAGE_SUCCESS,action.payload))\n                })\n              })\n       \n            return state\n        }\n\n        case ACTIONS.INSERT_GALLERY_IMAGE_SUCCESS: {\n            let image = {\n                id: action.payload.id,\n                date:action.payload.date,\n                caption: action.payload.caption,\n               // file: action.payload.path,\n                name:action.payload.name\n              }\n            db.collection(\"photoGalleryImages\")\n            .doc()\n            .set(image)\n            .then(() => {\n                action.asyncDispatch(mainAction(ACTIONS.LOAD_GALLERY,[]))\n            });\n            return state\n        }\n\n        case ACTIONS.INSERT_GALLERY_IMAGE_FAIL: {\n\n            return state\n        }\n\n        case ACTIONS.DELETE_GALLERY_IMAGE: {\n        let postImageRef = storage.ref('gallery/'+action.payload.name)\n        postImageRef.delete().then(()=>console.log(\"file deleted\"));\n        action.asyncDispatch(mainAction(ACTIONS.DELETE_GALLERY_IMAGE_SUCCESS, action.payload))  \n            return state\n        }\n\n        case ACTIONS.DELETE_GALLERY_IMAGE_SUCCESS: {\n            db.collection(\"photoGalleryImages\")\n            .where(\"id\",\"==\",action.payload.ID)\n            .get()\n            .then((querySnapshot)=>{\n                querySnapshot.forEach((doc)=> doc.ref.delete())\n                action.asyncDispatch(mainAction(ACTIONS.LOAD_GALLERY,[]))\n            })\n\n            return state\n        }\n\n        case ACTIONS.DELETE_GALLERY_IMAGE_FAIL: {\n\n            return state\n        }\n\n\n        case ACTIONS.UPDATE_GALLERY_IMAGE: {\n\n            return state\n        }\n\n        case ACTIONS.UPDATE_GALLERY_IMAGE_SUCCESS: {\n\n            return state\n        }\n\n        case ACTIONS.UPDATE_GALLERY_IMAGE_FAIL: {\n\n            return state\n        }\n\n\n        default:\n            return state\n\n    }\n}"]},"metadata":{},"sourceType":"module"}