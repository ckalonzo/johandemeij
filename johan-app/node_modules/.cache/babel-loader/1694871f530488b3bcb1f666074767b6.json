{"ast":null,"code":"import _slicedToArray from\"/Applications/MAMP/htdocs/WEB/johandemeij/johan-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import{mainAction}from\"redux/actions/index.actions\";import{Form,Row,Col,Button}from\"react-bootstrap\";import{ACTIONS}from\"redux/actions/types\";var ProfileImage=function ProfileImage(props){var mainProps=props;var _useState=useState(),_useState2=_slicedToArray(_useState,2),selectedFile=_useState2[0],setSelectedFile=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),uploadStatus=_useState4[0],setUploadStatus=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),frontCaption=_useState6[0],setFrontCaption=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),backCaption=_useState8[0],setBackCaption=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),validated=_useState10[0],setValidated=_useState10[1];var _useState11=useState(\"frontCover\"),_useState12=_slicedToArray(_useState11,2),coverLocation=_useState12[0],setCoverLocation=_useState12[1];var _useState13=useState(),_useState14=_slicedToArray(_useState13,2),file=_useState14[0],setFile=_useState14[1];//const {ID,images} = props\nuseEffect(function(){document.title=\"Johan De Meij | Edit Post\";// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);var handleImageSubmit=function handleImageSubmit(e){// console.log(props)\n};var updateCaption=function updateCaption(){var caption={docId:props.docId,albumID:props.ID,caption:props.type===\"front\"?frontCaption:backCaption,cover:props.type===\"front\"?\"frontCover\":\"backCover\"};mainProps.actions.mainAction(ACTIONS.UPDATE_CAPTION,caption);};var uploadImage=function uploadImage(){var image={docId:props.docId,image:file,path:selectedFile,albumID:props.ID,caption:props.type===\"front\"?frontCaption:backCaption,cover:props.type===\"front\"?\"frontCover\":\"backCover\"};mainProps.actions.mainAction(ACTIONS.UPLOAD_PRESENTATION_IMAGE,image);};var insertImage=function insertImage(){var image={docId:props.docId,image:file,path:selectedFile,albumID:props.ID,caption:props.type===\"front\"?frontCaption:backCaption,cover:props.type===\"front\"?\"frontCover\":\"backCover\"};mainProps.actions.mainAction(ACTIONS.UPLOAD_PRESENTATION_IMAGE,image);};var deletePresentationImage=function deletePresentationImage(){var image={imageType:props.type===\"front\"?\"frontCover\":\"backCover\",docId:props.docId,name:props.image,ID:props.ID};mainProps.actions.mainAction(ACTIONS.DELETE_PRESENTATION_IMAGE,image);};var onChangeHandler=function onChangeHandler(e){setSelectedFile(window.URL.createObjectURL(e.target.files[0]));setFile(e.target.files[0]);setUploadStatus(true);};var renderUploadButtons=function renderUploadButtons(_id){if(selectedFile&&uploadStatus)return/*#__PURE__*/React.createElement(Button,{variant:\"dark\",onClick:function onClick(){return uploadImage();}},\"upload\");return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Button,{variant:\"primary\",onClick:function onClick(e){return selecteImageToUpload(e);}},\"Change\"),/*#__PURE__*/React.createElement(Button,{variant:\"danger\",onClick:function onClick(){if(window.confirm(\"Delete this item?\"))deletePresentationImage(_id);}},\"Delete\"));};var renderInsertButtons=function renderInsertButtons(){if(selectedFile&&uploadStatus){return/*#__PURE__*/React.createElement(Button,{variant:\"warning\",onClick:function onClick(){return insertImage();}},\"upload\");}else{return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Button,{variant:\"primary\",style:{marginRight:\"15px\"},onClick:function onClick(e){return selecteImageToUpload(e);}},\"Change\"),/*#__PURE__*/React.createElement(Button,{variant:\"danger\",onClick:function onClick(e){if(window.confirm(\"Delete this item?\"))deletePresentationImage(e);}},\"Delete\"));}};var selecteImageToUpload=function selecteImageToUpload(e){props.type===\"front\"?document.querySelector('input#post-image-front').click():document.querySelector('input#post-image-back').click();};var postImage=Object.values(props.postImage?props.postImage:[]).map(function(image){return image;});var renderImage=function renderImage(){if(props.image){return/*#__PURE__*/React.createElement(\"img\",{src:!selectedFile?\"https://firebasestorage.googleapis.com/v0/b/johandemeij-513b2.appspot.com/o/posts%2F\"+props.image+'?alt=media':selectedFile,onClick:function onClick(e){return selecteImageToUpload(e);}});}else{return/*#__PURE__*/React.createElement(\"img\",{src:!selectedFile?\"/images/missing.png\":selectedFile,onClick:function onClick(e){return selecteImageToUpload(e);}});}};return/*#__PURE__*/React.createElement(\"section\",{id:\"images\"},/*#__PURE__*/React.createElement(Form,{noValidate:true,validated:validated,onSubmit:handleImageSubmit},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{lg:{span:2},className:\"post-image\"},renderImage(),/*#__PURE__*/React.createElement(\"div\",{style:{marginTop:\"15px\",textAlign:\"center\",font:\"400 8px/10px 'Work Sans', sans-serif\"}},!uploadStatus?props.imageName:\"\")),/*#__PURE__*/React.createElement(Col,{lg:{span:6},className:\"caption\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Form.Row,null,/*#__PURE__*/React.createElement(Form.Group,{controlId:props.type===\"front\"?\"frontCaption\":\"backCaption\"},/*#__PURE__*/React.createElement(Form.Label,null,props.type===\"front\"?\"Front Cover \":\"Back Cover \",\"Caption\"),/*#__PURE__*/React.createElement(Form.Control,{required:true,type:\"text\",placeholder:\"\",defaultValue:props.caption,onChange:function onChange(e){return props.type===\"front\"?setFrontCaption(e.target.value):setBackCaption(e.target.value);}}))))),/*#__PURE__*/React.createElement(Col,{lg:{span:4},className:\"action-button\"},props.imageName?renderUploadButtons(props._id):renderInsertButtons(),props.type===\"front\"?/*#__PURE__*/React.createElement(\"input\",{type:\"file\",id:\"post-image-front\",onChange:function onChange(e){return onChangeHandler(e);}}):/*#__PURE__*/React.createElement(\"input\",{type:\"file\",id:\"post-image-back\",onChange:function onChange(e){return onChangeHandler(e);}})))));};function mapStateToProps(state){return{postImage:state.singlePostReducer};}function mapDispatchToProps(dispatch){return{actions:bindActionCreators({mainAction:mainAction},dispatch)};}export default connect(mapStateToProps,mapDispatchToProps)(ProfileImage);","map":{"version":3,"sources":["/Applications/MAMP/htdocs/WEB/johandemeij/johan-app/src/components/dashboard/PublicationImage.jsx"],"names":["React","useEffect","useState","connect","bindActionCreators","mainAction","Form","Row","Col","Button","ACTIONS","ProfileImage","props","mainProps","selectedFile","setSelectedFile","uploadStatus","setUploadStatus","frontCaption","setFrontCaption","backCaption","setBackCaption","validated","setValidated","coverLocation","setCoverLocation","file","setFile","document","title","handleImageSubmit","e","updateCaption","caption","docId","albumID","ID","type","cover","actions","UPDATE_CAPTION","uploadImage","image","path","UPLOAD_PRESENTATION_IMAGE","insertImage","deletePresentationImage","imageType","name","DELETE_PRESENTATION_IMAGE","onChangeHandler","window","URL","createObjectURL","target","files","renderUploadButtons","_id","selecteImageToUpload","confirm","renderInsertButtons","marginRight","querySelector","click","postImage","Object","values","map","renderImage","span","marginTop","textAlign","font","imageName","value","mapStateToProps","state","singlePostReducer","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { mainAction } from \"redux/actions/index.actions\"\nimport { Form, Row, Col, Button} from \"react-bootstrap\";\nimport { ACTIONS } from \"redux/actions/types\";\n\nconst ProfileImage = (props) => {\n  let mainProps = props\n  \n    const [selectedFile,setSelectedFile] = useState()\n    const [uploadStatus,setUploadStatus] = useState(false)\n    const [frontCaption,setFrontCaption] = useState()\n    const [backCaption,setBackCaption] = useState()\n    const [validated, setValidated] = useState(false);\n    const [coverLocation,setCoverLocation]= useState(\"frontCover\")\n    const [file,setFile] = useState()\n   //const {ID,images} = props\n    useEffect(() => {\n        document.title = `Johan De Meij | Edit Post`;\n       \n        // eslint-disable-next-line react-hooks/exhaustive-deps\n      }, []);\n    const handleImageSubmit = (e) => {\n     // console.log(props)\n    }\n    const updateCaption = () =>{\n      let caption = {\n        docId:props.docId,\n        albumID:props.ID,\n        caption:props.type === \"front\" ? frontCaption:backCaption,\n        cover:props.type === \"front\" ? \"frontCover\":\"backCover\"\n      }\n       mainProps.actions.mainAction(ACTIONS.UPDATE_CAPTION,caption)\n    }\n    const uploadImage = () => {\n    \n      let image = {\n        docId:props.docId,\n        image:file,\n        path:selectedFile,\n        albumID:props.ID,\n        caption:props.type === \"front\" ? frontCaption:backCaption,\n        cover:props.type === \"front\" ? \"frontCover\":\"backCover\"\n      }\n       mainProps.actions.mainAction(ACTIONS.UPLOAD_PRESENTATION_IMAGE,image)\n      }\n      \n    const insertImage = () => {\n    \n      let image = {\n        docId:props.docId,\n        image:file,\n        path:selectedFile,\n        albumID:props.ID,\n        caption:props.type === \"front\" ? frontCaption:backCaption,\n        cover:props.type === \"front\" ? \"frontCover\":\"backCover\"\n      }\n       mainProps.actions.mainAction(ACTIONS.UPLOAD_PRESENTATION_IMAGE,image)\n      }\n    const deletePresentationImage = () => {\n        let image = {\n          imageType:props.type === \"front\" ? \"frontCover\":\"backCover\",\n          docId:props.docId,\n          name:props.image,\n          ID:props.ID,\n        }\n\n       mainProps.actions.mainAction(ACTIONS.DELETE_PRESENTATION_IMAGE,image)\n    } \n      const onChangeHandler = (e) => {\n        setSelectedFile(window.URL.createObjectURL(e.target.files[0]))\n        setFile(e.target.files[0])\n        setUploadStatus(true)\n      } \n      const renderUploadButtons = (_id) => {\n        if(selectedFile && uploadStatus)\n        return <Button variant=\"dark\" onClick={()=>uploadImage()}>upload</Button>\n        return (<>\n        <Button variant=\"primary\" onClick={(e)=>selecteImageToUpload(e)} >Change</Button>\n        <Button variant=\"danger\" onClick={()=>{if(window.confirm(\"Delete this item?\"))deletePresentationImage(_id)}} >Delete</Button>\n        </>)\n      }\n      const renderInsertButtons = () => {\n        if(selectedFile && uploadStatus){\n        return <Button variant=\"warning\" onClick={()=>insertImage()}>upload</Button>\n        } else {\n           return (<>\n           <Button variant=\"primary\" style={{marginRight:\"15px\"}}onClick={(e)=>selecteImageToUpload(e)} >Change</Button>\n           <Button variant=\"danger\" onClick={(e)=>{if(window.confirm(\"Delete this item?\"))deletePresentationImage(e)}} >Delete</Button>\n           </>)\n        }\n       \n      }\n      const selecteImageToUpload = (e) => {\n        props.type === \"front\" ?\n        document.querySelector('input#post-image-front').click():\n        document.querySelector('input#post-image-back').click()\n      }\n      let postImage = Object.values(props.postImage?props.postImage:[]).map(image => {\n        return image\n      })\n      const renderImage = () => {\n       if(props.image){\n        return (<img src={!selectedFile ? \"https://firebasestorage.googleapis.com/v0/b/johandemeij-513b2.appspot.com/o/posts%2F\"+props.image+'?alt=media':selectedFile} onClick={(e)=>selecteImageToUpload(e)} />)\n       } else {\n        return (<img src={!selectedFile ? \"/images/missing.png\":selectedFile} onClick={(e)=>selecteImageToUpload(e)} />)\n       }\n\n      }\n\n    return(\n        <section id=\"images\">\n          <Form noValidate validated={validated} onSubmit={handleImageSubmit}>\n            <Row>\n            <Col lg={{span:2}} className=\"post-image\">\n             {renderImage()}\n    <div style={{marginTop:\"15px\",textAlign:\"center\",font: \"400 8px/10px 'Work Sans', sans-serif\"}}>{!uploadStatus ? props.imageName:\"\"}</div>\n            </Col>\n             <Col lg={{span:6}} className=\"caption\">\n             <div><Form.Row>\n              <Form.Group controlId={props.type === \"front\" ? \"frontCaption\":\"backCaption\"}>\n              <Form.Label>{props.type === \"front\" ? \"Front Cover \":\"Back Cover \"}Caption</Form.Label>\n              <Form.Control\n                      required\n                      type=\"text\"\n                      placeholder=\"\"\n                      defaultValue={props.caption}\n                      onChange={e =>props.type === \"front\" ? setFrontCaption(e.target.value):setBackCaption(e.target.value)}\n                    />\n              </Form.Group>\n            </Form.Row></div>\n               </Col>\n    <Col lg={{span:4}}  className=\"action-button\">{props.imageName ? renderUploadButtons(props._id):renderInsertButtons()}{\nprops.type === \"front\" ?\n<input type=\"file\" id={\"post-image-front\"} onChange={(e)=>onChangeHandler(e)}/> :\n<input type=\"file\" id={\"post-image-back\"} onChange={(e)=>onChangeHandler(e)}/>\n    }</Col>\n               </Row>\n            </Form>\n          </section>\n    )\n}\nfunction mapStateToProps(state) {\n    return {\n      postImage:state.singlePostReducer\n    };\n  }\n  \n  function mapDispatchToProps(dispatch) {\n    return {\n      actions: bindActionCreators({mainAction}, dispatch)\n    };\n  }\n  \n  export default connect(mapStateToProps, mapDispatchToProps)(ProfileImage);"]},"metadata":{},"sourceType":"module"}