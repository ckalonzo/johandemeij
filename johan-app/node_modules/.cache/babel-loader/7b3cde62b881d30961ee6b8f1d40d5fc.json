{"ast":null,"code":"var _jsxFileName = \"/Applications/MAMP/htdocs/websites/johan-de-meij/johan-app/src/components/dashboard/PublicationImage.jsx\";\nimport React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { mainAction } from \"redux/actions/index.actions\";\nimport { Form, Row, Col, Button } from \"react-bootstrap\";\nimport { ACTIONS } from \"redux/actions/types\";\n\nconst PublicationImage = props => {\n  const [selectedFile, setSelectedFile] = useState(\"/images/missing.png\");\n  const [selectedFile_2, setSelectedFile_2] = useState(\"/images/missing.png\");\n  const [uploadStatus, setUploadStatus] = useState(false);\n  const [caption, setCaption] = useState();\n  const [validated, setValidated] = useState(false);\n  const [coverLocation, setCoverLocation] = useState(\"frontCover\");\n  const [file, setFile] = useState(); //const {ID,images} = props\n\n  useEffect(() => {\n    document.title = `Johan De Meij | Edit Post`; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const handleImageSubmit = e => {// console.log(props)\n  };\n\n  const uploadImage = () => {\n    let image = {\n      _id: props.ID,\n      image: file,\n      caption,\n      cover: props.type === \"front\" ? \"frontCover\" : \"backCover\"\n    };\n    console.log(image);\n    props.actions.mainAction(ACTIONS.UPLOAD_PRESENTATION_IMAGE, image); // setUploadStatus(true)\n  };\n\n  const insertImage = () => {\n    let image = {\n      _id: props.ID,\n      image: file,\n      caption,\n      cover: props.type === \"front\" ? \"frontCover\" : \"backCover\"\n    };\n    props.actions.mainAction(ACTIONS.UPLOAD_PRESENTATION_IMAGE, image);\n  };\n\n  const onChangeHandler = e => {\n    setSelectedFile(window.URL.createObjectURL(e.target.files[0]));\n    setFile(e.target.files[0]);\n    setUploadStatus(true);\n  };\n\n  const onSecondChangeHandler = e => {\n    setSelectedFile_2(window.URL.createObjectURL(e.target.files[0]));\n    setFile(e.target.files[0]);\n    setUploadStatus(true);\n  };\n\n  const renderUploadButtons = _id => {\n    if (selectedFile && uploadStatus) return /*#__PURE__*/React.createElement(Button, {\n      variant: \"dark\",\n      onClick: () => uploadImage(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 16\n      }\n    }, \"upload\");\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Button, {\n      variant: \"primary\",\n      onClick: e => selecteImageToUpload(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }\n    }, \"Change\"));\n  };\n\n  const renderInsertButtons = () => {\n    if (selectedFile && uploadStatus) return /*#__PURE__*/React.createElement(Button, {\n      variant: \"warning\",\n      onClick: () => insertImage(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 16\n      }\n    }, \"upload\");\n    return /*#__PURE__*/React.createElement(Button, {\n      variant: \"primary\",\n      onClick: e => selecteSecondImageToUpload(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 16\n      }\n    }, \"Insert image\");\n  };\n\n  const selecteImageToUpload = e => {\n    document.querySelector('input#post-image').click();\n  };\n\n  const selecteSecondImageToUpload = e => {\n    document.querySelector('input#post-image2').click();\n  };\n\n  let postImage = Object.values(props.postImage ? props.postImage : []).map(image => {\n    return image;\n  });\n  return /*#__PURE__*/React.createElement(\"section\", {\n    id: \"images\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    noValidate: true,\n    validated: validated,\n    onSubmit: handleImageSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: {\n      span: 2\n    },\n    className: \"post-image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: props.image ? \"https://firebasestorage.googleapis.com/v0/b/johandemeij-513b2.appspot.com/o/posts%2F\" + props.image + '?alt=media' : props.type === \"front\" ? selectedFile : selectedFile_2,\n    onClick: e => props.type === \"front\" ? selecteImageToUpload(e) : selecteSecondImageToUpload(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 14\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginTop: \"15px\",\n      textAlign: \"center\",\n      font: \"400 8px/10px 'Work Sans', sans-serif\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 5\n    }\n  }, !uploadStatus ? props.imageName : \"\")), /*#__PURE__*/React.createElement(Col, {\n    lg: {\n      span: 6\n    },\n    className: \"caption\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 14\n    }\n  }, /*#__PURE__*/React.createElement(Form.Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 14\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    as: Col,\n    controlId: \"caption\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 5\n    }\n  }, props.type === \"front\" ? \"Front Cover \" : \"Back Cover \", \"Caption\"), /*#__PURE__*/React.createElement(Form.Control, {\n    required: true,\n    type: \"text\",\n    placeholder: \"\",\n    defaultValue: props.caption ? props.caption : '',\n    onChange: e => setCaption(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(Form.Control.Feedback, {\n    type: \"invalid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 21\n    }\n  }, \"Please provide a caption.\"), /*#__PURE__*/React.createElement(Form.Control.Feedback, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 21\n    }\n  }, \"Looks good!\")))), /*#__PURE__*/React.createElement(Col, {\n    lg: {\n      span: 4\n    },\n    className: \"action-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 16\n    }\n  }, props.image ? renderUploadButtons(props._id) : renderInsertButtons(), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    id: props.type === \"front\" ? \"post-image\" : \"post-image2\",\n    onChange: e => props.type === \"front\" ? onChangeHandler(e) : onSecondChangeHandler(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 131\n    }\n  })))));\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 15\n    }\n  }, \"Loading\"));\n};\n\nfunction mapStateToProps(state) {\n  return {\n    postImage: state.singlePostReducer\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    actions: bindActionCreators({\n      mainAction\n    }, dispatch)\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PublicationImage);","map":{"version":3,"sources":["/Applications/MAMP/htdocs/websites/johan-de-meij/johan-app/src/components/dashboard/PublicationImage.jsx"],"names":["React","useEffect","useState","connect","bindActionCreators","mainAction","Form","Row","Col","Button","ACTIONS","PublicationImage","props","selectedFile","setSelectedFile","selectedFile_2","setSelectedFile_2","uploadStatus","setUploadStatus","caption","setCaption","validated","setValidated","coverLocation","setCoverLocation","file","setFile","document","title","handleImageSubmit","e","uploadImage","image","_id","ID","cover","type","console","log","actions","UPLOAD_PRESENTATION_IMAGE","insertImage","onChangeHandler","window","URL","createObjectURL","target","files","onSecondChangeHandler","renderUploadButtons","selecteImageToUpload","renderInsertButtons","selecteSecondImageToUpload","querySelector","click","postImage","Object","values","map","span","marginTop","textAlign","font","imageName","value","mapStateToProps","state","singlePostReducer","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { mainAction } from \"redux/actions/index.actions\"\nimport { Form, Row, Col, Button} from \"react-bootstrap\";\nimport { ACTIONS } from \"redux/actions/types\";\n\nconst PublicationImage = (props) => {\n    const [selectedFile,setSelectedFile] = useState(\"/images/missing.png\")\n    const [selectedFile_2,setSelectedFile_2] = useState(\"/images/missing.png\")\n    const [uploadStatus,setUploadStatus] = useState(false)\n    const [caption,setCaption] = useState()\n    const [validated, setValidated] = useState(false);\n    const [coverLocation,setCoverLocation]= useState(\"frontCover\")\n    const [file,setFile] = useState()\n   //const {ID,images} = props\n    useEffect(() => {\n        document.title = `Johan De Meij | Edit Post`;\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n      }, []);\n    const handleImageSubmit = (e) => {\n     // console.log(props)\n    }\n    const uploadImage = () => {\n    \n      let image = {\n        _id:props.ID,\n        image:file,\n        caption,\n        cover:props.type === \"front\" ? \"frontCover\":\"backCover\"\n      }\n      console.log(image)\n      props.actions.mainAction(ACTIONS.UPLOAD_PRESENTATION_IMAGE,image)\n        // setUploadStatus(true)\n      }\n      \n    const insertImage = () => {\n\n      let image = {\n        _id:props.ID,\n        image:file,\n        caption,\n        cover:props.type === \"front\" ? \"frontCover\":\"backCover\"\n      }\n       props.actions.mainAction(ACTIONS.UPLOAD_PRESENTATION_IMAGE,image)\n      }\n     \n      const onChangeHandler = (e) => {\n        setSelectedFile(window.URL.createObjectURL(e.target.files[0]))\n        setFile(e.target.files[0])\n        setUploadStatus(true)\n      } \n      const onSecondChangeHandler = (e) => {\n        setSelectedFile_2(window.URL.createObjectURL(e.target.files[0]))\n        setFile(e.target.files[0])\n        setUploadStatus(true)\n      } \n    \n      const renderUploadButtons = (_id) => {\n        if(selectedFile && uploadStatus)\n        return <Button variant=\"dark\" onClick={()=>uploadImage()}>upload</Button>\n        return (<>\n        <Button variant=\"primary\" onClick={(e)=>selecteImageToUpload(e)} >Change</Button>\n        </>)\n      }\n      const renderInsertButtons = () => {\n        if(selectedFile && uploadStatus)\n        return <Button variant=\"warning\" onClick={()=>insertImage()}>upload</Button>\n        return <Button variant=\"primary\" onClick={(e)=>selecteSecondImageToUpload(e)} >Insert image</Button>\n      }\n\n      const selecteImageToUpload = (e) => {\n        document.querySelector('input#post-image').click()\n      }\n      const selecteSecondImageToUpload = (e) => {\n        document.querySelector('input#post-image2').click()\n      }\n      let postImage = Object.values(props.postImage?props.postImage:[]).map(image => {\n        return image\n      })\n    return(\n        <section id=\"images\">\n          <Form noValidate validated={validated} onSubmit={handleImageSubmit}>\n            <Row>\n            <Col lg={{span:2}} className=\"post-image\">\n             <img src={props.image ? \"https://firebasestorage.googleapis.com/v0/b/johandemeij-513b2.appspot.com/o/posts%2F\"+props.image+'?alt=media':props.type===\"front\"?selectedFile:selectedFile_2} onClick={(e)=>props.type===\"front\"?selecteImageToUpload(e):selecteSecondImageToUpload(e)}/>\n    <div style={{marginTop:\"15px\",textAlign:\"center\",font: \"400 8px/10px 'Work Sans', sans-serif\"}}>{!uploadStatus ? props.imageName:\"\"}</div>\n            </Col>\n             <Col lg={{span:6}} className=\"caption\">\n             <Form.Row>\n                  <Form.Group as={Col}  controlId=\"caption\">\n    <Form.Label>{props.type === \"front\" ? \"Front Cover \":\"Back Cover \"}Caption</Form.Label>\n                    <Form.Control\n                      required\n                      type=\"text\"\n                      placeholder=\"\"\n                      defaultValue={props.caption ? props.caption:''}\n                      onChange={e => setCaption(e.target.value)}\n                      \n                    />\n                    <Form.Control.Feedback type=\"invalid\">\n                        Please provide a caption.\n                      </Form.Control.Feedback>\n                    <Form.Control.Feedback>Looks good!</Form.Control.Feedback>\n                  </Form.Group>\n                  </Form.Row>\n               </Col>\n               <Col lg={{span:4}}  className=\"action-button\">{props.image  ? renderUploadButtons(props._id):renderInsertButtons()}<input type=\"file\" id={props.type === \"front\"?\"post-image\":\"post-image2\"} onChange={(e)=>props.type===\"front\"?onChangeHandler(e):onSecondChangeHandler(e)}/></Col>\n               </Row>\n            </Form>\n          </section>\n    )\n    return (<><div>Loading</div></>)\n}\nfunction mapStateToProps(state) {\n    return {\n      postImage:state.singlePostReducer\n    };\n  }\n  \n  function mapDispatchToProps(dispatch) {\n    return {\n      actions: bindActionCreators({mainAction}, dispatch)\n    };\n  }\n  \n  export default connect(mapStateToProps, mapDispatchToProps)(PublicationImage);"]},"metadata":{},"sourceType":"module"}