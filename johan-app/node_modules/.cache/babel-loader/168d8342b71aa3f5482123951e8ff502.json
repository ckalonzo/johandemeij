{"ast":null,"code":"import _slicedToArray from\"/Applications/MAMP/htdocs/websites/johan-de-meij/johan-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import{mainAction}from\"redux/actions/index.actions\";import{Table,Form,Row,Col,Button}from\"react-bootstrap\";import{ACTIONS}from\"redux/actions/types\";import dayjs from\"dayjs\";import _ from\"lodash\";var AdditionalInfo=function AdditionalInfo(props){useEffect(function(){// Update the document title using the browser API\nwindow.scrollTo(0,0);props.actions.mainAction(ACTIONS.LOAD_CD_INFO,props.cdId);// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);var d=new Date();var newId=dayjs(d).format('YYYYMMDDHHmmss');var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),status=_useState2[0],setStatus=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),title=_useState4[0],setTitle=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),time=_useState6[0],setTime=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),grade=_useState8[0],setGrade=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),composer=_useState10[0],setComposer=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),addInfo=_useState12[0],setAddInfo=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),addNewInfo=_useState14[0],setNewInfo=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),validated=_useState16[0],setValidated=_useState16[1];var handleSubmit=function handleSubmit(){return;};var updateAdditionalInfo=function updateAdditionalInfo(id,cdId){var infoItem={id:id,time:document.getElementById(\"time\").value,grade:document.getElementById(\"grade\").value,track_title:document.getElementById(\"title\").value,composer:document.getElementById(\"composer\").value,addInfo:document.getElementById(\"addInfo\").value,cdId:cdId};props.actions.mainAction(ACTIONS.UPDATE_CD_INFO,infoItem);};var addAdditionalInfo=function addAdditionalInfo(cdId){var infoItem={id:newId,time:document.getElementById(\"time\").value,grade:document.getElementById(\"grade\").value,track_title:document.getElementById(\"title\").value,composer:document.getElementById(\"composer\").value,addInfo:document.getElementById(\"addInfo\").value,cdId:props.match.params.id};props.actions.mainAction(ACTIONS.CREATE_CD_INFO,infoItem);setTimeout(function(){window.location.reload();},1000);};var deleteCd=function deleteCd(id,cdId){props.actions.mainAction(ACTIONS.DELETE_CD_INFO,{id:id,cdId:props.match.params.id});setTimeout(function(){window.location.reload();},1000);};var List=function List(){var displayButtons=function displayButtons(id,whichButtonsToShow,cdId){if(whichButtonsToShow===\"update\")return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return setStatus(\"\");},variant:\"secondary\"},\"CANCEL\"),\" \",/*#__PURE__*/React.createElement(Button,{eventKey:id,onClick:function onClick(e){setStatus(e.target.attributes.getNamedItem('eventKey').value);updateAdditionalInfo(id,cdId);},variant:\"primary\"},\"UPDATE\"));if(whichButtonsToShow===\"add\")return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return setNewInfo(false);},variant:\"secondary\"},\"CANCEL\"),\" \",/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){addAdditionalInfo(cdId);},variant:\"primary\"},\"ADD\"));return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){if(window.confirm(\"Delete this item?\"))deleteCd(id);},variant:\"danger\"},\"DEL\"),\" \",/*#__PURE__*/React.createElement(Button,{eventKey:id,onClick:function onClick(e){setStatus(e.target.attributes.getNamedItem('eventKey').value);},variant:\"primary\"},\"EDIT\"));};var ListItems=function ListItems(){if(addNewInfo)return/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,\" \",/*#__PURE__*/React.createElement(Form.Group,{controlId:\"title\"},/*#__PURE__*/React.createElement(Form.Control,{required:true,as:\"select\"// onChange={e => setTitle(e.target.value)}\n},/*#__PURE__*/React.createElement(\"option\",{value:\"\"},\"SELECT A CD\"),Object.values(_.orderBy(props.allPresentations?props.allPresentations:[],\"cdName\",\"asc\")).map(function(CD){return/*#__PURE__*/React.createElement(\"option\",{key:CD.id,value:CD.id},CD.cdName);})),/*#__PURE__*/React.createElement(Form.Control.Feedback,null,\"Looks good!\"))),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(Form.Group,{controlId:\"time\"},/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",size:\"sm\",placeholder:\"\"// onChange={e => setTime(e.target.value)}\n}),/*#__PURE__*/React.createElement(Form.Control.Feedback,null,\"Looks good!\"))),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(Form.Group,{controlId:\"grade\"},/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",size:\"sm\",placeholder:\"\"// onChange={e => setGrade(e.target.value)}\n}),/*#__PURE__*/React.createElement(Form.Control.Feedback,null,\"Looks good!\"))),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(Form.Group,{controlId:\"composer\"},/*#__PURE__*/React.createElement(Form.Control,{as:\"textarea\",rows:\"3\",size:\"sm\",placeholder:\"\"//  onChange={e => setComposer(e.target.value)}\n}),/*#__PURE__*/React.createElement(Form.Control.Feedback,null,\"Looks good!\"))),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(Form.Group,{controlId:\"addInfo\"},/*#__PURE__*/React.createElement(Form.Control,{type:\"textarea\",size:\"sm\",as:\"textarea\",rows:\"3\",placeholder:\"\"// onChange={e => setAddInfo(e.target.value)}\n}),/*#__PURE__*/React.createElement(Form.Control.Feedback,null,\"Looks good!\"))),/*#__PURE__*/React.createElement(\"td\",null,displayButtons(\"\",\"add\")));return Object.values(props.additionalInfo).map(function(info){if(info.id!==status)return/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,info.title[0]),/*#__PURE__*/React.createElement(\"td\",null,info.time),/*#__PURE__*/React.createElement(\"td\",null,info.grade),/*#__PURE__*/React.createElement(\"td\",null,info.composer),/*#__PURE__*/React.createElement(\"td\",null,info.addInfo),/*#__PURE__*/React.createElement(\"td\",null,displayButtons(info.id)));return/*#__PURE__*/React.createElement(\"tr\",{className:info.id===status?\"active\":\"\",key:info.id},/*#__PURE__*/React.createElement(\"td\",null,\" \",/*#__PURE__*/React.createElement(Form.Group,{controlId:\"title\"},/*#__PURE__*/React.createElement(Form.Control,{required:true,as:\"select\"// onChange={e => setTitle(e.target.value)}\n,defaultValue:info.track_title},/*#__PURE__*/React.createElement(\"option\",{value:\"\"},\"SELECT A CD\"),Object.values(_.orderBy(props.allPresentations?props.allPresentations:[],\"cdName\",\"asc\")).map(function(CD){return+CD.id===+info.track_title?/*#__PURE__*/React.createElement(\"option\",{key:CD.id,value:CD.id,selected:true},CD.cdName):/*#__PURE__*/React.createElement(\"option\",{key:CD.id,value:CD.id},CD.cdName);})),/*#__PURE__*/React.createElement(Form.Control.Feedback,null,\"Looks good!\"))),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(Form.Group,{controlId:\"time\"},/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",size:\"sm\",placeholder:\"\",defaultValue:info.time// onChange={e => setTime(e.target.value)}\n}),/*#__PURE__*/React.createElement(Form.Control.Feedback,null,\"Looks good!\"))),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(Form.Group,{controlId:\"grade\"},/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",size:\"sm\",placeholder:\"\",defaultValue:info.grade// onChange={e => setGrade(e.target.value)}\n}),/*#__PURE__*/React.createElement(Form.Control.Feedback,null,\"Looks good!\"))),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(Form.Group,{controlId:\"composer\"},/*#__PURE__*/React.createElement(Form.Control,{as:\"textarea\",rows:\"3\",size:\"sm\",placeholder:\"\",defaultValue:info.composer//  onChange={e => setComposer(e.target.value)}\n}),/*#__PURE__*/React.createElement(Form.Control.Feedback,null,\"Looks good!\"))),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(Form.Group,{controlId:\"addInfo\"},/*#__PURE__*/React.createElement(Form.Control,{type:\"textarea\",size:\"sm\",as:\"textarea\",rows:\"3\",placeholder:\"\",defaultValue:info.addInfo// onChange={e => setAddInfo(e.target.value)}\n}),/*#__PURE__*/React.createElement(Form.Control.Feedback,null,\"Looks good!\"))),/*#__PURE__*/React.createElement(\"td\",null,displayButtons(info.id,\"update\",info.cdId)));});};return/*#__PURE__*/React.createElement(Form,null,/*#__PURE__*/React.createElement(Table,{striped:true,bordered:true,hover:true,className:\"additional-info\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"title\"),/*#__PURE__*/React.createElement(\"th\",null,\"time\"),/*#__PURE__*/React.createElement(\"th\",null,\"grade\"),/*#__PURE__*/React.createElement(\"th\",null,\"composer\"),/*#__PURE__*/React.createElement(\"th\",null,\"additional info\"),/*#__PURE__*/React.createElement(\"th\",null,/*#__PURE__*/React.createElement(Button,{variant:\"primary\",onClick:function onClick(){return setNewInfo(true);}},\"ADD INFO\")))),/*#__PURE__*/React.createElement(\"tbody\",null,/*#__PURE__*/React.createElement(ListItems,null))));};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(List,null));};function mapStateToProps(state){return{allPresentations:_.orderBy(state.AllPresentationsReducer,\"id\",\"asc\"),additionalInfo:state.cdInfoReducer};}function mapDispatchToProps(dispatch){return{actions:bindActionCreators({mainAction:mainAction},dispatch)};}export default connect(mapStateToProps,mapDispatchToProps)(AdditionalInfo);","map":{"version":3,"sources":["/Applications/MAMP/htdocs/websites/johan-de-meij/johan-app/src/components/dashboard/AdditionalInfo.jsx"],"names":["React","useEffect","useState","connect","bindActionCreators","mainAction","Table","Form","Row","Col","Button","ACTIONS","dayjs","_","AdditionalInfo","props","window","scrollTo","actions","LOAD_CD_INFO","cdId","d","Date","newId","format","status","setStatus","title","setTitle","time","setTime","grade","setGrade","composer","setComposer","addInfo","setAddInfo","addNewInfo","setNewInfo","validated","setValidated","handleSubmit","updateAdditionalInfo","id","infoItem","document","getElementById","value","track_title","UPDATE_CD_INFO","addAdditionalInfo","match","params","CREATE_CD_INFO","setTimeout","location","reload","deleteCd","DELETE_CD_INFO","List","displayButtons","whichButtonsToShow","e","target","attributes","getNamedItem","confirm","ListItems","Object","values","orderBy","allPresentations","map","CD","cdName","additionalInfo","info","mapStateToProps","state","AllPresentationsReducer","cdInfoReducer","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { mainAction } from \"redux/actions/index.actions\"\nimport { Table, Form, Row, Col, Button} from \"react-bootstrap\";\nimport { ACTIONS } from \"redux/actions/types\";\nimport dayjs from \"dayjs\"\nimport _ from \"lodash\"\nconst AdditionalInfo = (props) => {\n    useEffect(() => {\n        // Update the document title using the browser API\n        window.scrollTo(0,0)\n        props.actions.mainAction(ACTIONS.LOAD_CD_INFO,props.cdId)\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n      }, []);\n      const d = new Date()\n      const newId= dayjs(d).format('YYYYMMDDHHmmss');\n      const [status,setStatus] =  useState(\"\")\n      const [title,setTitle] = useState(\"\")\n      const [time,setTime] = useState(\"\")\n      const [grade,setGrade] = useState(\"\")\n      const [composer,setComposer] = useState(\"\")\n      const [addInfo,setAddInfo] = useState(\"\")\n      const [addNewInfo,setNewInfo] = useState(false)\n      const [validated, setValidated] = useState(false);\n      const handleSubmit = () => {\n          return\n      }\n      const updateAdditionalInfo = (id,cdId) => {\n          let infoItem = {\n            id,\n            time:document.getElementById(\"time\").value,\n            grade:document.getElementById(\"grade\").value,\n            track_title:document.getElementById(\"title\").value,\n            composer:document.getElementById(\"composer\").value,\n            addInfo:document.getElementById(\"addInfo\").value,\n            cdId\n          }\n          props.actions.mainAction(ACTIONS.UPDATE_CD_INFO,infoItem)\n      }\n      const addAdditionalInfo = (cdId) => {\n        let infoItem = {\n          id:newId,\n          time:document.getElementById(\"time\").value,\n            grade:document.getElementById(\"grade\").value,\n            track_title:document.getElementById(\"title\").value,\n            composer:document.getElementById(\"composer\").value,\n            addInfo:document.getElementById(\"addInfo\").value,\n            cdId:props.match.params.id\n        }\n        props.actions.mainAction(ACTIONS.CREATE_CD_INFO,infoItem)\n        setTimeout(()=>{ \n            window.location.reload()\n           }, 1000);\n    }\n    const deleteCd = (id,cdId) => {\n        props.actions.mainAction(ACTIONS.DELETE_CD_INFO,{id:id,cdId:props.match.params.id})\n        setTimeout(()=>{ \n            window.location.reload()\n           }, 1000);\n       \n    }\n      const List = () => {\n          const displayButtons = (id,whichButtonsToShow,cdId) => {\n              if(whichButtonsToShow === \"update\")\n              return(<><Button onClick={()=>setStatus(\"\")} variant=\"secondary\">CANCEL</Button> <Button eventKey={id} onClick={(e)=>{setStatus(e.target.attributes.getNamedItem('eventKey').value);updateAdditionalInfo(id,cdId)}} variant=\"primary\">UPDATE</Button></>)\n              if(whichButtonsToShow === \"add\")\n              return(<><Button onClick={()=>setNewInfo(false)} variant=\"secondary\">CANCEL</Button> <Button  onClick={()=>{addAdditionalInfo(cdId)}} variant=\"primary\">ADD</Button></>)\n\n              return(<><Button onClick={()=>{if(window.confirm(\"Delete this item?\"))deleteCd(id)}} variant=\"danger\">DEL</Button> <Button  eventKey={id} onClick={(e)=>{setStatus(e.target.attributes.getNamedItem('eventKey').value)}} variant=\"primary\">EDIT</Button></>)\n          }\n          const ListItems = () =>{\n              if(addNewInfo)\n              return (<tr>\n               <td> <Form.Group controlId=\"title\"><Form.Control\n                                        required\n                                        as=\"select\"\n                                       // onChange={e => setTitle(e.target.value)}\n                                       \n                                        >\n                                <option value=\"\" >SELECT A CD</option>\n                                {Object.values(_.orderBy(props.allPresentations ? props.allPresentations:[],\"cdName\",\"asc\")).map\n                                (CD=>{\n                                return <option key={CD.id} value={CD.id} >{CD.cdName}</option>\n                                })}\n                    </Form.Control><Form.Control.Feedback>Looks good!</Form.Control.Feedback></Form.Group></td>\n                    <td><Form.Group controlId=\"time\"><Form.Control\n                                        type=\"text\"\n                                        size=\"sm\"\n                                        placeholder=\"\"\n                                        \n                                       // onChange={e => setTime(e.target.value)}\n                                        /><Form.Control.Feedback>Looks good!</Form.Control.Feedback></Form.Group></td>\n                    <td><Form.Group controlId=\"grade\"><Form.Control\n                                        type=\"text\"\n                                        size=\"sm\"\n                                        placeholder=\"\"\n                                        \n                                       // onChange={e => setGrade(e.target.value)}\n                                        \n                                        /><Form.Control.Feedback>Looks good!</Form.Control.Feedback></Form.Group></td>\n                    <td><Form.Group controlId=\"composer\"><Form.Control\n                                        as=\"textarea\" rows=\"3\"\n                                        size=\"sm\"\n                                        placeholder=\"\"\n                                        \n                                      //  onChange={e => setComposer(e.target.value)}\n                                        /><Form.Control.Feedback>Looks good!</Form.Control.Feedback></Form.Group></td>\n                    <td><Form.Group controlId=\"addInfo\"><Form.Control\n                                        type=\"textarea\"\n                                        size=\"sm\"\n                                        as=\"textarea\" rows=\"3\"\n                                        placeholder=\"\"\n                                        \n                                       // onChange={e => setAddInfo(e.target.value)}\n                                        /><Form.Control.Feedback>Looks good!</Form.Control.Feedback></Form.Group></td>\n              <td>{displayButtons(\"\",\"add\")}</td>\n              </tr>)\n              return Object.values(props.additionalInfo).map(info => {\n              if(info.id !== status)\n              return (<tr>\n              <td>{info.title[0]}</td>\n              <td>{info.time}</td>\n              <td>{info.grade}</td>\n              <td>{info.composer}</td>\n              <td>{info.addInfo}</td>\n              <td>{displayButtons(info.id)}</td>\n              </tr>)\n                return (<tr className={info.id === status ? \"active\":\"\"} key={info.id} >\n                    <td> <Form.Group controlId=\"title\"><Form.Control\n                                        required\n                                        as=\"select\"\n                                       // onChange={e => setTitle(e.target.value)}\n                                        defaultValue={info.track_title}\n                                        >\n                                <option value=\"\" >SELECT A CD</option>\n                                {Object.values(_.orderBy(props.allPresentations ? props.allPresentations:[],\"cdName\",\"asc\")).map\n                                (CD=>{\n                                return +CD.id === +info.track_title ? <option key={CD.id} value={CD.id} selected>{CD.cdName}</option>\n                                : <option key={CD.id} value={CD.id} >{CD.cdName}</option>\n                                })}\n                    </Form.Control><Form.Control.Feedback>Looks good!</Form.Control.Feedback></Form.Group></td>\n                    <td><Form.Group controlId=\"time\"><Form.Control\n                                        type=\"text\"\n                                        size=\"sm\"\n                                        placeholder=\"\"\n                                        defaultValue={info.time}\n                                       // onChange={e => setTime(e.target.value)}\n                                        /><Form.Control.Feedback>Looks good!</Form.Control.Feedback></Form.Group></td>\n                    <td><Form.Group controlId=\"grade\"><Form.Control\n                                        type=\"text\"\n                                        size=\"sm\"\n                                        placeholder=\"\"\n                                        defaultValue={info.grade}\n                                       // onChange={e => setGrade(e.target.value)}\n                                        \n                                        /><Form.Control.Feedback>Looks good!</Form.Control.Feedback></Form.Group></td>\n                    <td><Form.Group controlId=\"composer\"><Form.Control\n                                        as=\"textarea\" rows=\"3\"\n                                        size=\"sm\"\n                                        placeholder=\"\"\n                                        defaultValue={info.composer}\n                                      //  onChange={e => setComposer(e.target.value)}\n                                        /><Form.Control.Feedback>Looks good!</Form.Control.Feedback></Form.Group></td>\n                    <td><Form.Group controlId=\"addInfo\"><Form.Control\n                                        type=\"textarea\"\n                                        size=\"sm\"\n                                        as=\"textarea\" rows=\"3\"\n                                        placeholder=\"\"\n                                        defaultValue={info.addInfo}\n                                       // onChange={e => setAddInfo(e.target.value)}\n                                        /><Form.Control.Feedback>Looks good!</Form.Control.Feedback></Form.Group></td>\n                    <td>{displayButtons(info.id,\"update\",info.cdId)}</td>\n                    </tr>)\n              })\n              \n          }\n          return (\n            <Form>\n            <Table striped bordered hover className=\"additional-info\">\n           \n            <thead>\n              <tr>\n                <th>title</th>\n                <th>time</th>\n                <th>grade</th>\n                <th>composer</th>\n                <th>additional info</th>\n                <th><Button  variant=\"primary\" onClick={()=>setNewInfo(true)}>ADD INFO</Button></th>\n              </tr>\n            </thead>\n            <tbody>\n               <ListItems />\n            </tbody>\n            \n          </Table>\n          </Form>\n          )\n      }\n      return (<>\n        <List />\n      </>)\n}\n\nfunction mapStateToProps(state) {\n    \n    return {\n    allPresentations:_.orderBy(state.AllPresentationsReducer,\"id\",\"asc\"),\n      additionalInfo:state.cdInfoReducer\n    };\n  }\n  \n  function mapDispatchToProps(dispatch) {\n    return {\n      actions: bindActionCreators({mainAction}, dispatch)\n    };\n  }\n  \n  export default connect(mapStateToProps, mapDispatchToProps)(AdditionalInfo);\n  "]},"metadata":{},"sourceType":"module"}