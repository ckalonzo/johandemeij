{"ast":null,"code":"var _jsxFileName = \"/Applications/MAMP/htdocs/websites/johan-de-meij/johan-app/src/components/dashboard/NewGalleryImage.jsx\";\nimport React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { mainAction } from \"redux/actions/index.actions\";\nimport { Form, Row, Col, Button, Container, Table } from \"react-bootstrap\";\nimport { ACTIONS } from \"redux/actions/types\";\nimport SideNav from \"components/dashboard/SideNav\";\nimport ReactHtmlParser from 'react-html-parser';\nimport dayjs from \"dayjs\";\n\nconst GalleryImage = props => {\n  let mainProps = props;\n  let d = new Date();\n  let id = dayjs(d).format(\"YYYYMMDDHHmmss\");\n  const [selectedFile, setSelectedFile] = useState();\n  const [caption, setCaption] = useState();\n  const [uploadStatus, setUploadStatus] = useState(false);\n  const [validated, setValidated] = useState(false);\n  const [file, setFile] = useState();\n  useEffect(() => {\n    document.title = `Johan De Meij | Edit Post`;\n    props.actions.mainAction(ACTIONS.LOAD_GALLERY, {}); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const handleImageSubmit = e => {// console.log(props)\n  };\n\n  const uploadImage = () => {\n    let image = {\n      name: file.name,\n      id,\n      caption,\n      date: d,\n      path: selectedFile\n    };\n    mainProps.actions.mainAction(ACTIONS.INSERT_GALLERY_IMAGE, image);\n  };\n\n  const deleteGalleryImage = () => {\n    let image = {\n      docId: props.docId\n    };\n    mainProps.actions.mainAction(ACTIONS.DELETE_GALLERY_IMAGE, image);\n  };\n\n  const onChangeHandler = e => {\n    setSelectedFile(window.URL.createObjectURL(e.target.files[0]));\n    setFile(e.target.files[0]);\n    setUploadStatus(true);\n    console.log(window.URL.createObjectURL(e.target.files[0]), e.target.files[0]);\n  };\n\n  const selecteImageToUpload = e => {\n    document.querySelector(\"input#gallery-image\").click();\n  };\n\n  const renderImage = () => {\n    if (props.image) {\n      return /*#__PURE__*/React.createElement(\"img\", {\n        width: \"100%\",\n        height: \"100%\",\n        \"object-fit\": \"contain\",\n        src: !selectedFile ? \"https://firebasestorage.googleapis.com/v0/b/johandemeij-513b2.appspot.com/o/gallery%2F\" + props.image + \"?alt=media\" : selectedFile,\n        onClick: e => selecteImageToUpload(e),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 9\n        }\n      });\n    } else {\n      return /*#__PURE__*/React.createElement(\"img\", {\n        width: \"100%\",\n        height: \"100%\",\n        \"object-fit\": \"contain\",\n        src: !selectedFile ? \"/images/missing.png\" : selectedFile,\n        onClick: e => selecteImageToUpload(e),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 9\n        }\n      });\n    }\n  };\n\n  const ImageList = () => {\n    console.log(props);\n    return Object.values(props.galleryImages).map(image => {\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        width: \"250px\",\n        \"object-fit\": \"contain\",\n        src: \"https://firebasestorage.googleapis.com/v0/b/johandemeij-513b2.appspot.com/o/gallery%2F\" + image.name + \"?alt=media\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"ul\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"li\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 5\n        }\n      }, image.date ? ReactHtmlParser(\"<span>Date created:</span> \" + image.date) : \"\"), /*#__PURE__*/React.createElement(\"li\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 5\n        }\n      }, image.name ? ReactHtmlParser(\"<span>Name:</span> \" + image.name) : \"\"), /*#__PURE__*/React.createElement(\"li\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 5\n        }\n      }, image.caption ? ReactHtmlParser(\"<span>Caption:</span> \" + image.caption) : \"\"), /*#__PURE__*/React.createElement(\"li\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 5\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        variant: \"danger\",\n        size: \"lg\",\n        block: true,\n        onClick: e => deleteGalleryImage(e),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 9\n        }\n      }, \"Delete\"))))));\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Container, {\n    className: \"dashboard\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: {\n      span: 2\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(SideNav, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    lg: {\n      span: \"10\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"section\", {\n    id: \"images\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 13\n    }\n  }, \"id:\", id, /*#__PURE__*/React.createElement(Form, {\n    noValidate: true,\n    validated: validated,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: {\n      span: 4\n    },\n    className: \"gallery-image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 19\n    }\n  }, renderImage()), /*#__PURE__*/React.createElement(Col, {\n    lg: {\n      span: 8\n    },\n    className: \"caption\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Form.Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 21\n    }\n  }, \"ID: \", id, /*#__PURE__*/React.createElement(Form.Group, {\n    controlId: \"date\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 25\n    }\n  }, \"Date\"), /*#__PURE__*/React.createElement(Form.Control, {\n    required: true,\n    type: \"text\",\n    placeholder: \"\",\n    defaultValue: d //onChange={}\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(Form.Group, {\n    controlId: \"backCaption\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 25\n    }\n  }, \"Caption\"), /*#__PURE__*/React.createElement(Form.Control, {\n    required: true,\n    type: \"text\",\n    placeholder: \"\",\n    defaultValue: props.caption //onChange={}\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 25\n    }\n  }))), /*#__PURE__*/React.createElement(Form.Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    id: \"gallery-image\",\n    onChange: e => onChangeHandler(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 23\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    variant: \"dark\",\n    onClick: e => uploadImage(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 23\n    }\n  }, \"Upload\"), \" \")))), /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    className: \"gallery-images\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Table, {\n    className: \"table table-hover\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    style: {\n      \"textAlign\": \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 19\n    }\n  }, \"Image\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    style: {\n      \"textAlign\": \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 19\n    }\n  }, \"info\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    style: {\n      \"textAlign\": \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 19\n    }\n  }))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(ImageList, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 16\n    }\n  }))))))))));\n};\n\nfunction mapStateToProps(state) {\n  return {\n    galleryImages: state.galleryReducer.gallery\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    actions: bindActionCreators({\n      mainAction\n    }, dispatch)\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(GalleryImage);","map":{"version":3,"sources":["/Applications/MAMP/htdocs/websites/johan-de-meij/johan-app/src/components/dashboard/NewGalleryImage.jsx"],"names":["React","useEffect","useState","connect","bindActionCreators","mainAction","Form","Row","Col","Button","Container","Table","ACTIONS","SideNav","ReactHtmlParser","dayjs","GalleryImage","props","mainProps","d","Date","id","format","selectedFile","setSelectedFile","caption","setCaption","uploadStatus","setUploadStatus","validated","setValidated","file","setFile","document","title","actions","LOAD_GALLERY","handleImageSubmit","e","uploadImage","image","name","date","path","INSERT_GALLERY_IMAGE","deleteGalleryImage","docId","DELETE_GALLERY_IMAGE","onChangeHandler","window","URL","createObjectURL","target","files","console","log","selecteImageToUpload","querySelector","click","renderImage","ImageList","Object","values","galleryImages","map","span","mapStateToProps","state","galleryReducer","gallery","mapDispatchToProps","dispatch"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,kBAAT,QAAmC,OAAnC;AACA,SAASC,UAAT,QAA2B,6BAA3B;AACA,SAASC,IAAT,EAAeC,GAAf,EAAoBC,GAApB,EAAyBC,MAAzB,EAAiCC,SAAjC,EAA2CC,KAA3C,QAAwD,iBAAxD;AACA,SAASC,OAAT,QAAwB,qBAAxB;AACA,OAAOC,OAAP,MAAoB,8BAApB;AACA,OAAOC,eAAP,MAA4B,mBAA5B;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AACA,MAAMC,YAAY,GAAIC,KAAD,IAAW;AAC9B,MAAIC,SAAS,GAAGD,KAAhB;AACA,MAAIE,CAAC,GAAG,IAAIC,IAAJ,EAAR;AACA,MAAIC,EAAE,GAACN,KAAK,CAACI,CAAD,CAAL,CAASG,MAAT,CAAgB,gBAAhB,CAAP;AACA,QAAM,CAACC,YAAD,EAAeC,eAAf,IAAkCtB,QAAQ,EAAhD;AACA,QAAM,CAACuB,OAAD,EAASC,UAAT,IAAuBxB,QAAQ,EAArC;AACA,QAAM,CAACyB,YAAD,EAAeC,eAAf,IAAkC1B,QAAQ,CAAC,KAAD,CAAhD;AACA,QAAM,CAAC2B,SAAD,EAAYC,YAAZ,IAA4B5B,QAAQ,CAAC,KAAD,CAA1C;AACA,QAAM,CAAC6B,IAAD,EAAOC,OAAP,IAAkB9B,QAAQ,EAAhC;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACdgC,IAAAA,QAAQ,CAACC,KAAT,GAAkB,2BAAlB;AACAjB,IAAAA,KAAK,CAACkB,OAAN,CAAc9B,UAAd,CAAyBO,OAAO,CAACwB,YAAjC,EAA8C,EAA9C,EAFc,CAGd;AACD,GAJQ,EAIN,EAJM,CAAT;;AAKA,QAAMC,iBAAiB,GAAIC,CAAD,IAAO,CAC/B;AACD,GAFD;;AAIA,QAAMC,WAAW,GAAG,MAAM;AACxB,QAAIC,KAAK,GAAG;AAAEC,MAAAA,IAAI,EAAEV,IAAI,CAACU,IAAb;AAAmBpB,MAAAA,EAAnB;AAAuBI,MAAAA,OAAvB;AAAgCiB,MAAAA,IAAI,EAAEvB,CAAtC;AAAyCwB,MAAAA,IAAI,EAAEpB;AAA/C,KAAZ;AACAL,IAAAA,SAAS,CAACiB,OAAV,CAAkB9B,UAAlB,CAA6BO,OAAO,CAACgC,oBAArC,EAA2DJ,KAA3D;AACD,GAHD;;AAKA,QAAMK,kBAAkB,GAAG,MAAM;AAC/B,QAAIL,KAAK,GAAG;AAAEM,MAAAA,KAAK,EAAE7B,KAAK,CAAC6B;AAAf,KAAZ;AACA5B,IAAAA,SAAS,CAACiB,OAAV,CAAkB9B,UAAlB,CAA6BO,OAAO,CAACmC,oBAArC,EAA2DP,KAA3D;AACD,GAHD;;AAIA,QAAMQ,eAAe,GAAIV,CAAD,IAAO;AAC7Bd,IAAAA,eAAe,CAACyB,MAAM,CAACC,GAAP,CAAWC,eAAX,CAA2Bb,CAAC,CAACc,MAAF,CAASC,KAAT,CAAe,CAAf,CAA3B,CAAD,CAAf;AACArB,IAAAA,OAAO,CAACM,CAAC,CAACc,MAAF,CAASC,KAAT,CAAe,CAAf,CAAD,CAAP;AACAzB,IAAAA,eAAe,CAAC,IAAD,CAAf;AACA0B,IAAAA,OAAO,CAACC,GAAR,CAAYN,MAAM,CAACC,GAAP,CAAWC,eAAX,CAA2Bb,CAAC,CAACc,MAAF,CAASC,KAAT,CAAe,CAAf,CAA3B,CAAZ,EAA0Df,CAAC,CAACc,MAAF,CAASC,KAAT,CAAe,CAAf,CAA1D;AACD,GALD;;AAOA,QAAMG,oBAAoB,GAAIlB,CAAD,IAAO;AAClCL,IAAAA,QAAQ,CAACwB,aAAT,CAAuB,qBAAvB,EAA8CC,KAA9C;AACD,GAFD;;AAIA,QAAMC,WAAW,GAAG,MAAM;AACxB,QAAI1C,KAAK,CAACuB,KAAV,EAAiB;AACf,0BACE;AACE,QAAA,KAAK,EAAC,MADR;AAEE,QAAA,MAAM,EAAC,MAFT;AAGE,sBAAW,SAHb;AAIE,QAAA,GAAG,EACD,CAACjB,YAAD,GACI,2FACAN,KAAK,CAACuB,KADN,GAEA,YAHJ,GAIIjB,YATR;AAWE,QAAA,OAAO,EAAGe,CAAD,IAAOkB,oBAAoB,CAAClB,CAAD,CAXtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF;AAeD,KAhBD,MAgBO;AACL,0BACE;AACE,QAAA,KAAK,EAAC,MADR;AAEE,QAAA,MAAM,EAAC,MAFT;AAGE,sBAAW,SAHb;AAIE,QAAA,GAAG,EAAE,CAACf,YAAD,GAAgB,qBAAhB,GAAwCA,YAJ/C;AAKE,QAAA,OAAO,EAAGe,CAAD,IAAOkB,oBAAoB,CAAClB,CAAD,CALtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF;AASD;AACF,GA5BD;;AA6BF,QAAMsB,SAAS,GAAE,MAAI;AACrBN,IAAAA,OAAO,CAACC,GAAR,CAAYtC,KAAZ;AACE,WAAO4C,MAAM,CAACC,MAAP,CAAc7C,KAAK,CAAC8C,aAApB,EAAmCC,GAAnC,CAAuCxB,KAAK,IAAE;AAEnD,0BAAO,uDACL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAI;AACE,QAAA,KAAK,EAAC,OADR;AAEE,sBAAW,SAFb;AAGE,QAAA,GAAG,EAAE,2FAA2FA,KAAK,CAACC,IAAjG,GAAwG,YAH/G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAJ,CADF,eAMM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKD,KAAK,CAACE,IAAN,GAAa5B,eAAe,CAAC,gCAA8B0B,KAAK,CAACE,IAArC,CAA5B,GAAyE,EAA9E,CADY,eAEZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKF,KAAK,CAACC,IAAN,GAAa3B,eAAe,CAAC,wBAAsB0B,KAAK,CAACC,IAA7B,CAA5B,GAAiE,EAAtE,CAFY,eAGZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKD,KAAK,CAACf,OAAN,GAAgBX,eAAe,CAAC,2BAAyB0B,KAAK,CAACf,OAAhC,CAA/B,GAA0E,EAA/E,CAHY,eAIZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAI,oBAAC,MAAD;AACA,QAAA,OAAO,EAAC,QADR;AAEA,QAAA,IAAI,EAAC,IAFL;AAEU,QAAA,KAAK,MAFf;AAGA,QAAA,OAAO,EAAGa,CAAD,IAAOO,kBAAkB,CAACP,CAAD,CAHlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAJ,CAJY,CAAJ,CANN,CADK,CAAP;AAqBD,KAvBM,CAAP;AAwBD,GA1BD;;AA2BE,sBACE,uDACE,oBAAC,SAAD;AAAW,IAAA,SAAS,EAAC,WAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,GAAD;AAAK,IAAA,EAAE,EAAE;AAAE2B,MAAAA,IAAI,EAAE;AAAR,KAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,eAIE,oBAAC,GAAD;AAAK,IAAA,EAAE,EAAE;AAAEA,MAAAA,IAAI,EAAE;AAAR,KAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAS,IAAA,EAAE,EAAC,QAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YACM5C,EADN,eAEE,oBAAC,IAAD;AACE,IAAA,UAAU,MADZ;AAEE,IAAA,SAAS,EAAEQ,SAFb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAIE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,GAAD;AAAK,IAAA,EAAE,EAAE;AAAEoC,MAAAA,IAAI,EAAE;AAAR,KAAT;AAAsB,IAAA,SAAS,EAAC,eAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGN,WAAW,EADd,CADF,eAIE,oBAAC,GAAD;AAAK,IAAA,EAAE,EAAE;AAAEM,MAAAA,IAAI,EAAE;AAAR,KAAT;AAAsB,IAAA,SAAS,EAAC,SAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD,CAAM,GAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACO5C,EADP,eAEA,oBAAC,IAAD,CAAM,KAAN;AAAY,IAAA,SAAS,EAAC,MAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ,eAEI,oBAAC,IAAD,CAAM,OAAN;AACE,IAAA,QAAQ,MADV;AAEE,IAAA,IAAI,EAAC,MAFP;AAGE,IAAA,WAAW,EAAC,EAHd;AAIE,IAAA,YAAY,EAAEF,CAJhB,CAKE;AALF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,CAFA,eAYE,oBAAC,IAAD,CAAM,KAAN;AAAY,IAAA,SAAS,EAAE,aAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,eAEE,oBAAC,IAAD,CAAM,OAAN;AACE,IAAA,QAAQ,MADV;AAEE,IAAA,IAAI,EAAC,MAFP;AAGE,IAAA,WAAW,EAAC,EAHd;AAIE,IAAA,YAAY,EAAEF,KAAK,CAACQ,OAJtB,CAKE;AALF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CAZF,CADF,eAwBE,oBAAC,IAAD,CAAM,GAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AACE,IAAA,IAAI,EAAC,MADP;AAEE,IAAA,EAAE,EAAE,eAFN;AAGE,IAAA,QAAQ,EAAGa,CAAD,IAAOU,eAAe,CAACV,CAAD,CAHlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAME,oBAAC,MAAD;AACE,IAAA,OAAO,EAAC,MADV;AAEE,IAAA,OAAO,EAAGA,CAAD,IAAOC,WAAW,CAACD,CAAD,CAF7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cANF,EAWY,GAXZ,CAxBF,CAJF,CAJF,CAFF,eAmDE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACA,oBAAC,GAAD;AAAK,IAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACA,oBAAC,KAAD;AAAO,IAAA,SAAS,EAAC,mBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAI,IAAA,KAAK,EAAC,KAAV;AAAgB,IAAA,KAAK,EAAE;AAAE,mBAAa;AAAf,KAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADF,eAEE;AAAI,IAAA,KAAK,EAAC,KAAV;AAAgB,IAAA,KAAK,EAAE;AAAE,mBAAa;AAAf,KAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAFF,eAGE;AAAI,IAAA,KAAK,EAAC,KAAV;AAAgB,IAAA,KAAK,EAAE;AAAE,mBAAa;AAAf,KAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHF,CADF,CADA,eAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,CARA,CADA,CADA,CAnDF,CADF,CAJF,CADF,CADF,CADF;AAkFD,CAjLD;;AAkLA,SAAS4B,eAAT,CAAyBC,KAAzB,EAAgC;AAC9B,SAAO;AACLJ,IAAAA,aAAa,EAAEI,KAAK,CAACC,cAAN,CAAqBC;AAD/B,GAAP;AAGD;;AAED,SAASC,kBAAT,CAA4BC,QAA5B,EAAsC;AACpC,SAAO;AACLpC,IAAAA,OAAO,EAAE/B,kBAAkB,CAAC;AAAEC,MAAAA;AAAF,KAAD,EAAiBkE,QAAjB;AADtB,GAAP;AAGD;;AAED,eAAepE,OAAO,CAAC+D,eAAD,EAAkBI,kBAAlB,CAAP,CAA6CtD,YAA7C,CAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { mainAction } from \"redux/actions/index.actions\";\nimport { Form, Row, Col, Button, Container,Table } from \"react-bootstrap\";\nimport { ACTIONS } from \"redux/actions/types\";\nimport SideNav from \"components/dashboard/SideNav\";\nimport ReactHtmlParser from 'react-html-parser';\nimport dayjs from \"dayjs\";\nconst GalleryImage = (props) => {\n  let mainProps = props;\n  let d = new Date();\n  let id=dayjs(d).format(\"YYYYMMDDHHmmss\");\n  const [selectedFile, setSelectedFile] = useState();\n  const [caption,setCaption] = useState()\n  const [uploadStatus, setUploadStatus] = useState(false);\n  const [validated, setValidated] = useState(false);\n  const [file, setFile] = useState();\n\n  useEffect(() => {\n    document.title = `Johan De Meij | Edit Post`;\n    props.actions.mainAction(ACTIONS.LOAD_GALLERY,{})\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  const handleImageSubmit = (e) => {\n    // console.log(props)\n  };\n\n  const uploadImage = () => {\n    let image = { name: file.name, id, caption, date: d, path: selectedFile};\n    mainProps.actions.mainAction(ACTIONS.INSERT_GALLERY_IMAGE, image);\n  };\n\n  const deleteGalleryImage = () => {\n    let image = { docId: props.docId };\n    mainProps.actions.mainAction(ACTIONS.DELETE_GALLERY_IMAGE, image);\n  };\n  const onChangeHandler = (e) => {\n    setSelectedFile(window.URL.createObjectURL(e.target.files[0]));\n    setFile(e.target.files[0]);\n    setUploadStatus(true);\n    console.log(window.URL.createObjectURL(e.target.files[0]),e.target.files[0])\n  };\n\n  const selecteImageToUpload = (e) => {\n    document.querySelector(\"input#gallery-image\").click();\n  };\n\n  const renderImage = () => {\n    if (props.image) {\n      return (\n        <img\n          width=\"100%\"\n          height=\"100%\"\n          object-fit=\"contain\"\n          src={\n            !selectedFile\n              ? \"https://firebasestorage.googleapis.com/v0/b/johandemeij-513b2.appspot.com/o/gallery%2F\" +\n                props.image +\n                \"?alt=media\"\n              : selectedFile\n          }\n          onClick={(e) => selecteImageToUpload(e)}\n        />\n      );\n    } else {\n      return (\n        <img\n          width=\"100%\"\n          height=\"100%\"\n          object-fit=\"contain\"\n          src={!selectedFile ? \"/images/missing.png\" : selectedFile}\n          onClick={(e) => selecteImageToUpload(e)}\n        />\n      );\n    }\n  };\nconst ImageList =()=>{\nconsole.log(props)\n  return Object.values(props.galleryImages).map(image=>{\n    \n    return(<>\n      <tr>\n        <td><img\n              width=\"250px\"\n              object-fit=\"contain\"\n              src={\"https://firebasestorage.googleapis.com/v0/b/johandemeij-513b2.appspot.com/o/gallery%2F\" + image.name + \"?alt=media\"}\n            /></td>\n            <td><ul>\n    <li>{image.date ? ReactHtmlParser(\"<span>Date created:</span> \"+image.date) : \"\"}</li>\n    <li>{image.name ? ReactHtmlParser(\"<span>Name:</span> \"+image.name) : \"\"}</li>\n    <li>{image.caption ? ReactHtmlParser(\"<span>Caption:</span> \"+image.caption) : \"\"}</li>\n    <li><Button\n        variant=\"danger\"\n        size=\"lg\" block\n        onClick={(e) => deleteGalleryImage(e)} \n        >Delete\n        </Button>\n    </li>\n    </ul></td>\n      </tr>\n      </>)\n  })\n}\n  return (\n    <>\n      <Container className=\"dashboard\">\n        <Row>\n          <Col lg={{ span: 2 }}>\n            <SideNav />\n          </Col>\n          <Col lg={{ span: \"10\" }}>\n            <section id=\"images\">\n              id:{id}\n              <Form\n                noValidate\n                validated={validated}\n              >\n                <Row>\n                  <Col lg={{ span: 4 }} className=\"gallery-image\">\n                    {renderImage()}\n                  </Col>\n                  <Col lg={{ span: 8 }} className=\"caption\">\n                    <Form.Row>\n                      ID: {id}\n                    <Form.Group controlId=\"date\">\n                        <Form.Label>Date</Form.Label>\n                        <Form.Control\n                          required\n                          type=\"text\"\n                          placeholder=\"\"\n                          defaultValue={d}\n                          //onChange={}\n                        />\n                      </Form.Group>\n                      <Form.Group controlId={\"backCaption\"}>\n                        <Form.Label>Caption</Form.Label>\n                        <Form.Control\n                          required\n                          type=\"text\"\n                          placeholder=\"\"\n                          defaultValue={props.caption}\n                          //onChange={}\n                        />\n                      </Form.Group>\n                    </Form.Row>\n                    <Form.Row>\n                      <input\n                        type=\"file\"\n                        id={\"gallery-image\"}\n                        onChange={(e) => onChangeHandler(e)}\n                      />\n                      <Button\n                        variant=\"dark\"\n                        onClick={(e) => uploadImage(e)}\n                      >\n                        Upload\n                      </Button>{\" \"}\n                      \n                    </Form.Row>\n                  </Col>\n                </Row>\n              </Form>\n              <Row>\n              <Col className=\"gallery-images\">\n              <Table className=\"table table-hover\">\n              <thead >\n                <tr>\n                  <th scope=\"col\" style={{ \"textAlign\": \"center\" }}>Image</th>\n                  <th scope=\"col\" style={{ \"textAlign\": \"center\" }}>info</th>\n                  <th scope=\"col\" style={{ \"textAlign\": \"center\" }}></th>\n                </tr>\n              </thead>\n              <tbody>\n               <ImageList />\n              </tbody>\n            </Table>\n                    \n                  </Col>\n              </Row>\n            </section>\n          </Col>\n        </Row>\n      </Container>\n    </>\n  );\n};\nfunction mapStateToProps(state) {\n  return {\n    galleryImages: state.galleryReducer.gallery,\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    actions: bindActionCreators({ mainAction }, dispatch),\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(GalleryImage);\n"]},"metadata":{},"sourceType":"module"}