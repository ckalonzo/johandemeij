{"ast":null,"code":"import _slicedToArray from\"/Applications/MAMP/htdocs/WEB/johandemeij/johan-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Form,Row,Col,Button,Table}from\"react-bootstrap\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import{ACTIONS}from\"redux/actions/types\";import{mainAction}from\"redux/actions/index.actions\";import dayjs from\"dayjs\";var PresentationMusicUpload=function PresentationMusicUpload(props){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),file=_useState2[0],setFile=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),selectedFile=_useState4[0],setSelectedFile=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),fileUrl=_useState6[0],setFileUrl=_useState6[1];var d=new Date();var _useState7=useState(dayjs(d).format('YYYYMMDDHHmmss')),_useState8=_slicedToArray(_useState7,2),id=_useState8[0],setId=_useState8[1];useEffect(function(){props.actions.mainAction(ACTIONS.LOAD_PUBLICATION_MUSIC,props.ID);// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);var onFormSubmit=function onFormSubmit(e){e.preventDefault();// Stop form submit\nfileUpload();};var _onChange=function onChange(e){setFile(e.target.files[0]);setFileUrl(window.URL.createObjectURL(e.target.files[0]));setSelectedFile(e.target.files[0].name);console.log(e.target.files[0].name);};var fileUpload=function fileUpload(){var mp3File={id:id,file:file,fileurl:fileUrl,pres_id:props.ID};props.actions.mainAction(ACTIONS.CREATE_PUBLICATION_MUSIC,mp3File);//props.history.push('/dashboard/publications/edit/'+props.ID)\n};var deleteMusic=function deleteMusic(ID,NAME){props.actions.mainAction(ACTIONS.DELETE_PUBLICATION_MUSIC,{ID:ID,name:NAME});};var renderMusicTracks=function renderMusicTracks(props){// console.log(props)\nreturn Object.values(props?props.music:[]).map(function(track){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"tr\",{key:track.id},/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"figcaption\",null,\"Listen to \".concat(track.musicName)),/*#__PURE__*/React.createElement(\"audio\",{controls:true,src:\"https://firebasestorage.googleapis.com/v0/b/johandemeij-513b2.appspot.com/o/music%2F\".concat(track.musicName,\"?alt=media\")},\"Your browser does not support the\",/*#__PURE__*/React.createElement(\"code\",null,\"audio\"),\" element.\")),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return deleteMusic(track.id,track.musicName);}},\"Delete\"))));});};var selecteImageToUpload=function selecteImageToUpload(e){e.preventDefault();document.querySelector('input#mp3-file').click();};return/*#__PURE__*/React.createElement(\"section\",{id:\"music\"},/*#__PURE__*/React.createElement(Form,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{lg:{span:3,offset:Object.values(props.music).length>0?0:3}},/*#__PURE__*/React.createElement(Button,{variant:\"outline-secondary\",style:{marginRight:\"10px\",marginBottom:\"15px\"},onClick:function onClick(e){return selecteImageToUpload(e);}},\"choose a file\"),\" \",selectedFile,/*#__PURE__*/React.createElement(\"input\",{type:\"file\",id:\"mp3-file\",onChange:function onChange(e){return _onChange(e);}})),/*#__PURE__*/React.createElement(Col,{lg:3},/*#__PURE__*/React.createElement(Button,{onClick:function onClick(e){return fileUpload(e);}},\"Add music\")),Object.values(props.music).length>0?/*#__PURE__*/React.createElement(Col,{lg:3},/*#__PURE__*/React.createElement(Table,{striped:true,bordered:true,hover:true},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{colSpan:\"2\"},\"music\"))),/*#__PURE__*/React.createElement(\"tbody\",null,renderMusicTracks(props)))):\"\")),/*#__PURE__*/React.createElement(Row,{style:{marginTop:\"15px\"}}));};function mapStateToProps(state){return{music:state.presentationMusicReducer};}function mapDispatchToProps(dispatch){return{actions:bindActionCreators({mainAction:mainAction},dispatch)};}export default connect(mapStateToProps,mapDispatchToProps)(PresentationMusicUpload);","map":{"version":3,"sources":["/Applications/MAMP/htdocs/WEB/johandemeij/johan-app/src/components/dashboard/PresentationMusic.jsx"],"names":["React","useState","useEffect","Form","Row","Col","Button","Table","connect","bindActionCreators","ACTIONS","mainAction","dayjs","PresentationMusicUpload","props","file","setFile","selectedFile","setSelectedFile","fileUrl","setFileUrl","d","Date","format","id","setId","actions","LOAD_PUBLICATION_MUSIC","ID","onFormSubmit","e","preventDefault","fileUpload","onChange","target","files","window","URL","createObjectURL","name","console","log","mp3File","fileurl","pres_id","CREATE_PUBLICATION_MUSIC","deleteMusic","NAME","DELETE_PUBLICATION_MUSIC","renderMusicTracks","Object","values","music","map","track","musicName","selecteImageToUpload","document","querySelector","click","span","offset","length","marginRight","marginBottom","marginTop","mapStateToProps","state","presentationMusicReducer","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from 'react'\nimport { Form,  Row, Col, Button, Table } from \"react-bootstrap\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { ACTIONS } from \"redux/actions/types\";\nimport { mainAction } from \"redux/actions/index.actions\"\nimport dayjs from \"dayjs\"\nconst PresentationMusicUpload = (props) => {\n    const [file,setFile] = useState(null)\n    const [selectedFile,setSelectedFile] = useState()\n    const [fileUrl,setFileUrl] = useState(null)\n    let d = new Date()\n    const [id, setId] = useState(dayjs(d).format('YYYYMMDDHHmmss'));\n    useEffect(() => {\n        props.actions.mainAction(ACTIONS.LOAD_PUBLICATION_MUSIC, props.ID)\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [])\n  \n    const onFormSubmit = (e) =>{\n        e.preventDefault() // Stop form submit\n\n        fileUpload()\n    }\n    const onChange = (e) => {\n        setFile(e.target.files[0])\n        setFileUrl(window.URL.createObjectURL(e.target.files[0]))\n        setSelectedFile(e.target.files[0].name)\n        console.log(e.target.files[0].name)\n    }\n    const fileUpload =()=>{\n        let mp3File = {\n            id,\n            file,\n            fileurl:fileUrl,\n            pres_id:props.ID\n        }\n        props.actions.mainAction(ACTIONS.CREATE_PUBLICATION_MUSIC,mp3File)\n        //props.history.push('/dashboard/publications/edit/'+props.ID)\n    }\n    const deleteMusic = (ID,NAME) => {\n        props.actions.mainAction(ACTIONS.DELETE_PUBLICATION_MUSIC,{ID,name:NAME})\n    }\n    const renderMusicTracks = (props) => {\n      // console.log(props)\n       return  Object.values(props ? props.music : [] ).map(track=>{\n            return (<><tr key={track.id}>\n                <td>\n             <figcaption>{`Listen to ${track.musicName}`}</figcaption>\n             <audio\n                 controls\n                 src={`https://firebasestorage.googleapis.com/v0/b/johandemeij-513b2.appspot.com/o/music%2F${track.musicName}?alt=media`}>\n                     Your browser does not support the\n                     <code>audio</code> element.\n             </audio>\n         </td>\n         <td><Button onClick={()=>deleteMusic(track.id,track.musicName)}>Delete</Button></td>\n         </tr>\n                </>)\n        })\n       \n    }\n    const selecteImageToUpload = (e) => {\n        e.preventDefault()\n        document.querySelector('input#mp3-file').click()\n    }\n    return (\n        <section id=\"music\">\n            <Form >\n\n                <Row>\n                <Col lg={{span:3,offset: Object.values(props.music).length  > 0 ? 0:3}}>\n                        \n                        <Button  variant=\"outline-secondary\" style={{marginRight:\"10px\",marginBottom:\"15px\"}} onClick={(e)=>selecteImageToUpload(e)}>choose a file</Button> {selectedFile}\n                        <input type=\"file\" id=\"mp3-file\" onChange={(e)=>onChange(e)} />\n                    </Col>\n                    <Col lg={3}>\n                        <Button onClick={(e)=>fileUpload(e)}>Add music</Button>\n                    </Col>\n                    \n                {Object.values(props.music).length > 0 ? <Col lg={3}><Table striped bordered hover>\n  <thead>\n    <tr>\n      <th colSpan=\"2\">music</th>\n      \n    </tr>\n  </thead>\n  <tbody>\n      {renderMusicTracks(props)}\n  </tbody>\n</Table></Col> : \"\"}\n                \n                </Row>\n            </Form>\n            <Row style={{marginTop:\"15px\"}}>\n                \n            </Row>\n        </section>\n   )\n}\n\n\nfunction mapStateToProps(state) {\n    \n    return {\n      music:state.presentationMusicReducer\n    };\n  }\n  \nfunction mapDispatchToProps(dispatch) {\n    return {\n      actions: bindActionCreators({ mainAction }, dispatch)\n    };\n  }\n  \nexport default connect(mapStateToProps, mapDispatchToProps)(PresentationMusicUpload);\n"]},"metadata":{},"sourceType":"module"}