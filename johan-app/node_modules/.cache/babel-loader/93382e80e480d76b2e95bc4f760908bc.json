{"ast":null,"code":"import _slicedToArray from\"/Applications/MAMP/htdocs/websites/johan-de-meij/johan-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import{Form,Container,Row,Col,Button}from\"react-bootstrap\";import{ACTIONS}from\"redux/actions/types\";import SideNav from\"components/dashboard/SideNav\";import{mainAction}from\"redux/actions/index.actions\";import CKEditor from'@ckeditor/ckeditor5-react';import ClassicEditor from'@ckeditor/ckeditor5-build-classic';var EditPage=function EditPage(props){var _useState=useState(props.match.params.id),_useState2=_slicedToArray(_useState,2),id=_useState2[0],setId=_useState2[1];var _useState3=useState(props.page.content),_useState4=_slicedToArray(_useState3,2),content=_useState4[0],setContent=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),validated=_useState6[0],setValidated=_useState6[1];useEffect(function(){window.scrollTo(0,0);document.title=\"Johan De Meij | Edit Post\";props.actions.mainAction(ACTIONS.LOAD_PAGE,props.match.params.id);// window.location.reload()\n// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);var handleSubmit=function handleSubmit(event){event.preventDefault();var eventItem={id:id,content:content};var form=event.currentTarget;if(form.checkValidity()===false){event.stopPropagation();}setValidated(true);props.actions.mainAction(ACTIONS.UPDATE_PAGE,eventItem);window.scrollTo(0,0);};console.log(props);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Container,{className:\"dashboard\"},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{lg:{span:2}},/*#__PURE__*/React.createElement(SideNav,null)),/*#__PURE__*/React.createElement(Col,{lg:{span:\"10\"}},/*#__PURE__*/React.createElement(\"section\",{id:\"product\"},/*#__PURE__*/React.createElement(Form,{noValidate:true,validated:validated,onSubmit:handleSubmit},/*#__PURE__*/React.createElement(Form.Row,null,/*#__PURE__*/React.createElement(Form.Group,{as:Col,controlId:\"content\"},/*#__PURE__*/React.createElement(CKEditor,{editor:ClassicEditor,data:props.page?props.page.content:content,toolbar:('heading','|','bold','italic','link','bulletedList','numberedList','blockQuote'),onInit:function onInit(editor){// You can store the \"editor\" and use when it is needed.\n// console.log( 'Editor is ready to use!', editor );\n},onChange:function onChange(event,editor){var data=editor.getData();// console.log( { event, editor, data } );\nsetContent(data);},onBlur:function onBlur(event,editor){var data=editor.getData();console.log('Blur.',editor);setContent(data);},onFocus:function onFocus(event,editor){console.log('Focus.',editor);}}))),/*#__PURE__*/React.createElement(Button,{type:\"submit\"},\"Update\")))))));};function mapStateToProps(state){return{page:state.pageReducer};}function mapDispatchToProps(dispatch){return{actions:bindActionCreators({mainAction:mainAction},dispatch)};}export default connect(mapStateToProps,mapDispatchToProps)(EditPage);","map":{"version":3,"sources":["/Applications/MAMP/htdocs/websites/johan-de-meij/johan-app/src/components/dashboard/EditPage.jsx"],"names":["React","useEffect","useState","connect","bindActionCreators","Form","Container","Row","Col","Button","ACTIONS","SideNav","mainAction","CKEditor","ClassicEditor","EditPage","props","match","params","id","setId","page","content","setContent","validated","setValidated","window","scrollTo","document","title","actions","LOAD_PAGE","handleSubmit","event","preventDefault","eventItem","form","currentTarget","checkValidity","stopPropagation","UPDATE_PAGE","console","log","span","editor","data","getData","mapStateToProps","state","pageReducer","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { Form, Container, Row, Col, Button} from \"react-bootstrap\";\nimport { ACTIONS } from \"redux/actions/types\";\nimport SideNav from \"components/dashboard/SideNav\";\nimport { mainAction } from \"redux/actions/index.actions\"\nimport CKEditor from '@ckeditor/ckeditor5-react';\nimport ClassicEditor from '@ckeditor/ckeditor5-build-classic';\n\nconst EditPage = props => {\n  const [id, setId] = useState(props.match.params.id);\n  const [content, setContent] = useState(props.page.content);\n  const [validated, setValidated] = useState(false);\n\n\n  useEffect(() => {\n    window.scrollTo(0,0)\n    document.title = `Johan De Meij | Edit Post`;\n    props.actions.mainAction(ACTIONS.LOAD_PAGE,props.match.params.id)\n   // window.location.reload()\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  const handleSubmit = event => {\n    event.preventDefault();\n    \n    let eventItem = {\n     id,\n     content\n    }\n    const form = event.currentTarget;\n    if (form.checkValidity() === false) {\n      event.stopPropagation();\n    }\n    setValidated(true);\n   props.actions.mainAction(ACTIONS.UPDATE_PAGE,eventItem)\n   window.scrollTo(0,0)\n  };\n  console.log(props)\n  return (\n    <>\n      <Container className=\"dashboard\">\n        <Row>\n          \n          <Col lg={{ span: 2 }}>\n              <SideNav />\n          </Col>\n          <Col lg={{span:\"10\" }}> \n            <section id=\"product\">\n              <Form noValidate validated={validated} onSubmit={handleSubmit}>\n                <Form.Row>\n                  <Form.Group as={Col} controlId=\"content\">\n                    <CKEditor\n                        editor={ ClassicEditor }\n                        data={props.page ? props.page.content:content}\n                        toolbar= {'heading', '|', 'bold', 'italic', 'link', 'bulletedList', 'numberedList','blockQuote' }\n                        onInit={ editor => {\n                            // You can store the \"editor\" and use when it is needed.\n                           // console.log( 'Editor is ready to use!', editor );\n                        } }\n                        onChange={ ( event, editor ) => {\n                            const data = editor.getData();\n                           // console.log( { event, editor, data } );\n                            setContent(data)\n                        } }\n                        onBlur={ ( event, editor ) => {\n                          const data = editor.getData();\n                            console.log( 'Blur.', editor );\n                            setContent(data)\n                        } }\n                        onFocus={ ( event, editor ) => {\n                            console.log( 'Focus.', editor );\n                        } }\n                    />\n                  </Form.Group>\n                  </Form.Row>\n                <Button type=\"submit\">Update</Button>\n              </Form> \n            </section>\n          </Col>\n        </Row> \n      </Container>\n    </>\n  );\n};\nfunction mapStateToProps(state) {\n  return {\n    page:state.pageReducer\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    actions: bindActionCreators({mainAction}, dispatch)\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EditPage);\n"]},"metadata":{},"sourceType":"module"}