{"ast":null,"code":"import _objectSpread from\"/Users/carlkalonzo/Documents/DEV/johandemeij/johan-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{ACTIONS}from'redux/actions/types.js';import{mainAction}from\"redux/actions/index.actions\";import{db}from\"../../firebase\";import _ from'lodash';var initialState={};var d=new Date();//let day = d.getDate();\nvar month=d.getMonth()+1;var year=d.getFullYear();export default function agendaReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case ACTIONS.CREATE_NEW_AGENDA:{console.log(action);var stateCopy=_.cloneDeep(action.payload);db.collection(\"agendas\").add(stateCopy).then(function(docRef){console.log(docRef);stateCopy._id=docRef.id;action.asyncDispatch(mainAction(ACTIONS.CREATE_NEW_AGENDA_SUCCESS,stateCopy));});return state;}case ACTIONS.CREATE_NEW_AGENDA_SUCCESS:{window.location.reload(true);return action.payload;}case ACTIONS.DELETE_AGENDA:{db.collection(\"agendas\").where('id','==',action.payload).get().then(function(querySnapshot){querySnapshot.forEach(function(doc){return doc.ref.delete();});action.asyncDispatch(mainAction(ACTIONS.DELETE_AGENDA_SUCCESS,[]));});return state;}case ACTIONS.DELETE_AGENDA_SUCCESS:{action.asyncDispatch(mainAction(ACTIONS.LOAD_AGENDAS,[]));return state;}case ACTIONS.LOAD_CD_AGENDA:{db.collection(\"agendas\").where(\"year\",\">=\",year.toString()).orderBy(\"year\",\"asc\").orderBy(\"month\",\"asc\").get().then(function(snapshot){var data=snapshot.docs.map(function(doc){return doc.data();});action.asyncDispatch(mainAction(ACTIONS.LOAD_CD_AGENDA_SUCCESS,data));});return state;}case ACTIONS.LOAD_DASHBOARD_CD_AGENDA:{db.collection(\"agendas\").where(\"year\",\">=\",year.toString()).orderBy(\"year\",\"asc\").orderBy(\"month\",\"asc\").orderBy(\"day\",\"asc\").get().then(function(snapshot){var data=snapshot.docs.map(function(doc){return doc.data();});action.asyncDispatch(mainAction(ACTIONS.LOAD_DASHBOARD_CD_AGENDA_SUCCESS,data));});return state;}case ACTIONS.LOAD_CD_AGENDA_SUCCESS:{return _.orderBy(action.payload,['year','month','day'],['asc','asc','asc']);}case ACTIONS.LOAD_DASHBOARD_CD_AGENDA_SUCCESS:{var successData=_.orderBy(action.payload,['month','day','year'],['asc','asc','asc']);var dataArray=[];var extendedArray=[];successData.map(function(newData){newData.month<9&&+newData.year===+year?dataArray.push(newData):extendedArray.push(newData);});dataArray.push.apply(dataArray,extendedArray);return dataArray;}case ACTIONS.LOAD_CD_AGENDA_FAIL:{return state;}case ACTIONS.LOAD_AGENDAS:{console.log(action);db.collection(\"agendas\").where(\"year\",\">=\",year.toString()).orderBy(\"year\",\"asc\").orderBy(\"month\",\"asc\").get().then(function(snapshot){var data=snapshot.docs.map(function(doc){return doc.data();});var agendas=[];Object.values(data).map(function(agenda){agenda.date=\"\".concat(agenda.month,\"-\").concat(agenda.day,\"-\").concat(agenda.year);agenda.month=+agenda.month;if(+agenda.month>=+month||+agenda.year>+year)return agendas.push(agenda);});action.asyncDispatch(mainAction(ACTIONS.LOAD_CD_AGENDA_SUCCESS,agendas));});return state;}case ACTIONS.LOAD_AGENDAS_SUCCESS:{return action.payload;}case ACTIONS.LOAD_AGENDAS_FAIL:{return state;}case ACTIONS.LOAD_AGENDAS_FILTERED:{db.collection(\"agendas\").where(\"year\",\"==\",action.payload.year.toString()).orderBy(\"month\",\"asc\").get().then(function(snapshot){var agendas=[];var data=snapshot.docs.map(function(doc){return doc.data();});Object.values(data).map(function(agenda){agenda.date=\"\".concat(agenda.month,\"-\").concat(agenda.day,\"-\").concat(agenda.year);agenda.month=+agenda.month;return agendas.push(agenda);});action.asyncDispatch(mainAction(ACTIONS.LOAD_AGENDAS_SUCCESS,_.orderBy(agendas,['month','day'],['asc','asc'])));});return state;}case ACTIONS.LOAD_AGENDA:{db.collection(\"agendas\").where(\"id\",\"==\",action.payload).get().then(function(snapshot){var data=snapshot.docs.map(function(doc){return doc.data();});if(data.length>0)action.asyncDispatch(mainAction(ACTIONS.LOAD_AGENDA_SUCCESS,_objectSpread({},data)));});return state;}case ACTIONS.LOAD_AGENDA_SUCCESS:{return action.payload?action.payload[0]:state;}case ACTIONS.LOAD_AGENDA_FAIL:{return state;}case ACTIONS.UPDATE_AGENDA:{var _id='';db.collection(\"agendas\").where(\"id\",\"==\",action.payload.id).get().then(function(snapshot){var data=snapshot.docs.map(function(doc){_id=doc.id;return doc.data();});db.collection(\"agendas\").doc(_id).update(action.payload).then(function(){console.log(\"success\");action.asyncDispatch(mainAction(ACTIONS.UPDATE_AGENDA_SUCCESS,action.payload));});});return state;}case ACTIONS.UPDATE_AGENDA_SUCCESS:{var _stateCopy=_.cloneDeep(action.payload);action.asyncDispatch(mainAction(ACTIONS.LOAD_AGENDA,_stateCopy.id));return _stateCopy;}case ACTIONS.UPDATE_AGENDA_FAIL:{return state;}default:return _objectSpread({},state);}}","map":{"version":3,"sources":["/Users/carlkalonzo/Documents/DEV/johandemeij/johan-app/src/redux/reducers/agenda.reducer.js"],"names":["ACTIONS","mainAction","db","_","initialState","d","Date","month","getMonth","year","getFullYear","agendaReducer","state","action","type","CREATE_NEW_AGENDA","console","log","stateCopy","cloneDeep","payload","collection","add","then","docRef","_id","id","asyncDispatch","CREATE_NEW_AGENDA_SUCCESS","window","location","reload","DELETE_AGENDA","where","get","querySnapshot","forEach","doc","ref","delete","DELETE_AGENDA_SUCCESS","LOAD_AGENDAS","LOAD_CD_AGENDA","toString","orderBy","snapshot","data","docs","map","LOAD_CD_AGENDA_SUCCESS","LOAD_DASHBOARD_CD_AGENDA","LOAD_DASHBOARD_CD_AGENDA_SUCCESS","successData","dataArray","extendedArray","newData","push","LOAD_CD_AGENDA_FAIL","agendas","Object","values","agenda","date","day","LOAD_AGENDAS_SUCCESS","LOAD_AGENDAS_FAIL","LOAD_AGENDAS_FILTERED","LOAD_AGENDA","length","LOAD_AGENDA_SUCCESS","LOAD_AGENDA_FAIL","UPDATE_AGENDA","update","UPDATE_AGENDA_SUCCESS","UPDATE_AGENDA_FAIL"],"mappings":"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","sourcesContent":["import { ACTIONS } from 'redux/actions/types.js'\nimport { mainAction } from \"redux/actions/index.actions\"\nimport { db} from \"../../firebase\";\nimport _ from 'lodash'\nconst initialState = {\n};\nlet d = new Date();\n//let day = d.getDate();\nlet month = d.getMonth()+1;\nlet year = d.getFullYear()\nexport default function agendaReducer (state = initialState, action) {\n  switch (action.type) {\n    case ACTIONS.CREATE_NEW_AGENDA:{\nconsole.log(action)\n    let stateCopy = _.cloneDeep(action.payload)\n        db.collection(\"agendas\")\n          .add(stateCopy)\n          .then(function(docRef){\n            console.log(docRef)\n            stateCopy._id = docRef.id\n            action.asyncDispatch(mainAction(ACTIONS.CREATE_NEW_AGENDA_SUCCESS,stateCopy))\n          });\n    return state\n    }\n    case ACTIONS.CREATE_NEW_AGENDA_SUCCESS:{\n    window.location.reload(true)\n    return action.payload\n    }\n    case ACTIONS.DELETE_AGENDA:{\n    db.collection(\"agendas\")\n    .where('id','==',action.payload)\n     .get()\n     .then((querySnapshot) => {\n       querySnapshot.forEach((doc)=> doc.ref.delete())\n       action.asyncDispatch(mainAction(ACTIONS.DELETE_AGENDA_SUCCESS,[]))\n     });\n\n    return state\n    }  \n    case ACTIONS.DELETE_AGENDA_SUCCESS:{\n    action.asyncDispatch(mainAction(ACTIONS.LOAD_AGENDAS,[]))\n    return state\n    }  \n    case ACTIONS.LOAD_CD_AGENDA: {\n    db.collection(\"agendas\")\n    .where(\"year\",\">=\",year.toString())\n    .orderBy(\"year\",\"asc\")\n    .orderBy(\"month\",\"asc\")\n    .get()\n    .then(snapshot => {\n      const data = snapshot.docs.map(doc => {return doc.data()});\n      action.asyncDispatch(mainAction(ACTIONS.LOAD_CD_AGENDA_SUCCESS,data))\n    })\n    return state\n    }\n    case ACTIONS.LOAD_DASHBOARD_CD_AGENDA: {\n      db.collection(\"agendas\")\n      .where(\"year\",\">=\",year.toString())\n      .orderBy(\"year\",\"asc\")\n      .orderBy(\"month\",\"asc\")\n      .orderBy(\"day\",\"asc\")\n      .get()\n      .then(snapshot => {\n        const data = snapshot.docs.map(doc => {return doc.data()});\n        action.asyncDispatch(mainAction(ACTIONS.LOAD_DASHBOARD_CD_AGENDA_SUCCESS,data))\n      })\n    return state\n    }\n    case ACTIONS.LOAD_CD_AGENDA_SUCCESS: {\n    return _.orderBy(action.payload,['year','month','day'],['asc','asc','asc'])\n    }\n    case ACTIONS.LOAD_DASHBOARD_CD_AGENDA_SUCCESS: {\n      let successData = _.orderBy(action.payload,['month','day','year'],['asc','asc','asc'])\n      let dataArray = []\n      let extendedArray = []\n      successData.map(newData=>{\n        newData.month < 9 && +newData.year === +year ?  dataArray.push(newData) : extendedArray.push(newData)\n      })\n      dataArray.push(...extendedArray)\n      return dataArray\n      }\n    case ACTIONS.LOAD_CD_AGENDA_FAIL: {\n\n    return state\n    }\n    case ACTIONS.LOAD_AGENDAS: {\nconsole.log(action)\n    db.collection(\"agendas\")\n    .where(\"year\",\">=\",year.toString())\n    .orderBy(\"year\",\"asc\")\n    .orderBy(\"month\",\"asc\")\n    .get()\n    .then(snapshot => {\n      const data = snapshot.docs.map(doc => {return doc.data()});\n      let agendas = []\n      Object.values(data).map(agenda=>{\n        agenda.date = `${agenda.month}-${agenda.day}-${agenda.year}`\n        agenda.month = +agenda.month\n      if(+agenda.month >= +month || +agenda.year > +year)\n        return agendas.push(agenda)\n      })\n      action.asyncDispatch(mainAction(ACTIONS.LOAD_CD_AGENDA_SUCCESS,agendas))\n    })\n    return state\n    }\n    case ACTIONS.LOAD_AGENDAS_SUCCESS:{\n\n    return action.payload\n    }\n    case ACTIONS.LOAD_AGENDAS_FAIL:{\n    return state\n    }\n    case ACTIONS.LOAD_AGENDAS_FILTERED:{\n    db.collection(\"agendas\")\n    .where(\"year\",\"==\",action.payload.year.toString())\n    .orderBy(\"month\",\"asc\")\n    .get()\n    .then(snapshot => {\n      let agendas = []\n      const data = snapshot.docs.map(doc => {return doc.data()});\n      Object.values(data).map(agenda=>{\n        agenda.date = `${agenda.month}-${agenda.day}-${agenda.year}`\n        agenda.month = +agenda.month\n        return agendas.push(agenda)\n      })\n      action.asyncDispatch(mainAction(ACTIONS.LOAD_AGENDAS_SUCCESS,_.orderBy(agendas,['month','day'],['asc','asc'])))\n    })\n    return state\n    }\n    case ACTIONS.LOAD_AGENDA:{\n    db.collection(\"agendas\")\n    .where(\"id\",\"==\",action.payload)\n    .get()\n    .then(snapshot => {\n      const data = snapshot.docs.map(doc => doc.data());\n      if(data.length > 0)\n      action.asyncDispatch(mainAction(ACTIONS.LOAD_AGENDA_SUCCESS,{...data}))\n    })\n    return state\n    }\n    case ACTIONS.LOAD_AGENDA_SUCCESS:{\n\n     return action.payload ? action.payload[0] : state\n\n    }\n    case ACTIONS.LOAD_AGENDA_FAIL:{\n    return state\n    }\n    case ACTIONS.UPDATE_AGENDA:{\n      let _id =''\n      db.collection(\"agendas\")\n    .where(\"id\",\"==\",action.payload.id)\n    .get()\n    .then(snapshot => {\n      const data = snapshot.docs.map(doc => {\n        _id = doc.id\n        return doc.data()});\n        db.collection(\"agendas\").doc(_id)\n        .update(action.payload).then(()=>{\n          console.log(\"success\")\n        action.asyncDispatch(mainAction(ACTIONS.UPDATE_AGENDA_SUCCESS,action.payload))\n     });\n    })\n     \n    return state\n    }\n    case ACTIONS.UPDATE_AGENDA_SUCCESS:{\n    let stateCopy = _.cloneDeep(action.payload)\n    action.asyncDispatch(mainAction(ACTIONS.LOAD_AGENDA,stateCopy.id))\n    return stateCopy\n    }\n    case ACTIONS.UPDATE_AGENDA_FAIL:{\n   \n    return state\n    }\n    default: \n      return {\n        ...state\n    }\n  }\n}"]},"metadata":{},"sourceType":"module"}